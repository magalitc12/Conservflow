webpackJsonp([21],{"RU+x":function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{},[s("div",{},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tipo_card,expression:"tipo_card==1"}],staticClass:"container"},[s("div",{staticClass:"container"},[s("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(a){return t.AbrirModalArticulo(!0)}}},[s("i",{staticClass:"fas fa-plus"},[t._v(" ")]),t._v("Nuevo\r\n                ")]),t._v(" "),s("br")]),t._v(" "),s("div",{},[s("h5",[t._v("Grupos")]),t._v(" "),s("v-client-table",{ref:"tbl_articulo",attrs:{columns:t.columns_articulo,data:t.list_articulo,options:t.options_articulo},scopedSlots:t._u([{key:"id",fn:function(a){return[s("div",{staticClass:"btn-group",attrs:{role:"group"}},[s("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btn_id",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("i",{staticClass:"fas fa-grip-horizontal"}),t._v("  Acciones\r\n                            ")]),t._v(" "),s("div",{staticClass:"dropdown-menu"},[[s("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(s){return t.AbrirModalArticulo(!1,a.row)}}},[s("i",{staticClass:"fas fa-edit"}),t._v(" Actualizar\r\n                                    ")]),t._v(" "),s("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(s){return t.VerArticulos(a.row)}}},[s("i",{staticClass:"fas fa-eye"}),t._v(" Ver Artículos\r\n                                    ")])]],2)])]}}])})],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tipo_card,expression:"tipo_card==2"}],staticClass:"container"},[s("div",{staticClass:"container"},[s("h5",[t._v("Artículos del grupo: "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.nombre_grupo))])]),t._v(" "),s("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(a){return t.AbrirModalBuscarArticulos()}}},[s("i",{staticClass:"fas fa-plus"},[t._v(" ")]),t._v("Agregar\r\n                ")]),t._v(" "),s("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:t.Regresar}},[s("i",{staticClass:"fas fa-arrow-left"},[t._v(" ")]),t._v("Regresar\r\n                ")]),t._v(" "),s("br"),t._v(" "),s("br")]),t._v(" "),s("div",{},[s("v-client-table",{ref:"tbl_articulo",attrs:{columns:t.columns_articulos_grupo,data:t.list_articulos_grupo,options:t.options_articulos_grupo}})],1)])]),t._v(" "),s("div",{staticClass:"modal fade",class:{mostrar:t.ver_modal_articulo},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.titulo_modal_articulo)}}),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.CerrarModalArticulo()}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-2 form-control-label"},[t._v("Nombre")]),t._v(" "),s("div",{staticClass:"col-md-9"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:'"required"'},{name:"model",rawName:"v-model",value:t.articulo_modal.nombre,expression:"articulo_modal.nombre"}],staticClass:"form-control",attrs:{type:"text","data-vv-name":"Nombre"},domProps:{value:t.articulo_modal.nombre},on:{input:function(a){a.target.composing||t.$set(t.articulo_modal,"nombre",a.target.value)}}}),t._v(" "),s("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("Nombre")))])])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(a){return t.CerrarModalArticulo()}}},[s("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")]),t._v(" "),1==t.tipoAccion_modal_articulo?s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.Guardar(1)}}},[s("i",{staticClass:"fas fa-save"}),t._v(" Guardar")]):t._e(),t._v(" "),2==t.tipoAccion_modal_articulo?s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.Guardar(0)}}},[s("i",{staticClass:"fas fa-save"}),t._v(" Actualizar")]):t._e()])])])]),t._v(" "),s("div",{staticClass:"modal fade",class:{mostrar:t.ver_modal_articulos_pendientes},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h4",{staticClass:"modal-title"},[t._v("Artículos Pendientes por Agrupar")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.CerrarModalArticulosPendientes()}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),s("div",{staticClass:"modal-body"},[s("v-client-table",{ref:"tbl_articulo",attrs:{columns:t.columns_articulos_pendientes,data:t.list_articulos_pendientes,options:t.options_articulos_pendientes},scopedSlots:t._u([{key:"check",fn:function(a){return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.list_pendintes_temp[a.row.n],expression:"list_pendintes_temp[props.row.n]"}],attrs:{type:"checkbox",id:"chec_"+a.row.ai_id},domProps:{checked:Array.isArray(t.list_pendintes_temp[a.row.n])?t._i(t.list_pendintes_temp[a.row.n],null)>-1:t.list_pendintes_temp[a.row.n]},on:{change:[function(s){var o=t.list_pendintes_temp[a.row.n],e=s.target,r=!!e.checked;if(Array.isArray(o)){var i=t._i(o,null);e.checked?i<0&&t.$set(t.list_pendintes_temp,a.row.n,o.concat([null])):i>-1&&t.$set(t.list_pendintes_temp,a.row.n,o.slice(0,i).concat(o.slice(i+1)))}else t.$set(t.list_pendintes_temp,a.row.n,r)},function(s){return t.Checked(a.row,t.list_pendintes_temp[a.row.n])}]}})]}}])})],1),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:t.CerrarModalArticulosPendientes}},[s("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")]),t._v(" "),s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.GuardarArticulosPendientes}},[s("i",{staticClass:"fas fa-save"}),t._v(" Guardar")])])])])])])},staticRenderFns:[]}},kUzX:function(t,a,s){var o=s("VU/8")(s("woB1"),s("RU+x"),!1,null,null,null);t.exports=o.exports},woB1:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=s("00Zj").call(this);a.default={data:function(){return{url:"almacen/inventario/grupo",ver_modal_articulo:0,columns_articulo:["id","nombre"],list_articulo:[],options_articulo:{headings:{id:"Acciones",nombre:"Nombre"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,texts:o.texts},titulo_modal_articulo:"",tipoAccion_modal_articulo:0,articulo_modal:{},nombre_grupo:"",tipo_card:1,ver_modal_articulos_grupo:!1,columns_articulos_grupo:["nombre"],list_articulos_grupo:[],options_articulos_grupo:{perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,texts:o.texts},list_pendientes_models_temp:[],ver_modal_articulos_pendientes:!1,columns_articulos_pendientes:["descripcion","check"],list_articulos_pendientes:[],options_articulos_pendientes:{headings:{ai_id:"No",descripcion:"Artículo",check:"Seleccionado"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,texts:o.texts},grupo_id:0,list_pendintes_temp:[]}},computed:{},methods:{AbrirModalArticulo:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.ver_modal_articulo=!0,t?(this.titulo_modal_articulo="Registrar Articulo",this.tipoAccion_modal_articulo=1):(this.titulo_modal_articulo="Actualizar Articulo",this.tipoAccion_modal_articulo=2,this.articulo_modal.id=a.id,this.articulo_modal.nombre=a.nombre)},CerrarModalArticulo:function(){this.ver_modal_articulo=!1,this.articulo_modal={}},Guardar:function(t){var a=this;this.$validator.validate().then(function(s){if(s){var o=new FormData;t||o.append("id",a.articulo_modal.id),o.append("nombre",a.articulo_modal.nombre),axios.post(a.url+"/guardar",o).then(function(t){t.data.status?(toastr.success("Registrado correctamente"),a.CerrarModalArticulo(),a.ObtenerGrupos()):toastr.error(t.data.mensaje)})}})},ObtenerGrupos:function(){var t=this;axios.get(this.url+"/obtener").then(function(a){a.data.status?t.list_articulo=a.data.grupos:toastr.error(a.data.mensaje)})},VerArticulos:function(t){var a=this;this.grupo_id=t.id,this.nombre_grupo=t.nombre,axios.get(this.url+"/obtenerporgrupo/"+t.id).then(function(t){t.data.status?(a.list_articulos_grupo=t.data.articulos,a.tipo_card=2):toastr.error(t.data.mensaje)})},Regresar:function(){this.tipo_card=1,this.list_articulos_grupo=[]},AbrirModalBuscarArticulos:function(){var t=this;axios.get(this.url+"/obtenerendientes").then(function(a){if(t.ver_modal_articulos_pendientes=!0,a.data.status){var s=0;t.list_pendintes_temp=[],t.list_articulos_pendientes=[],a.data.articulos.forEach(function(a){t.list_articulos_pendientes.push({ai_id:a.ai_id,descripcion:a.descripcion,n:s}),t.list_pendintes_temp.push(!1),s+=1})}else toastr.error(a.data.mensaje)}).catch(function(t){console.error(t),toastr.error("Error. Informe al administrador")})},CerrarModalArticulosPendientes:function(){this.ver_modal_articulos_pendientes=!1,this.list_pendintes_temp=[],this.list_pendientes_models_temp=[]},GuardarArticulosPendientes:function(){var t=this;if(0!=this.list_pendientes_models_temp.length){var a=new FormData;a.append("grupo_id",this.grupo_id),a.append("list_articulos",this.list_pendientes_models_temp),axios.post(this.url+"/agrupararticulos",a).then(function(a){a.data.status?(t.VerArticulos({id:t.grupo_id,nombre:t.nombre_grupo}),toastr.success("Guardaro correctmente"),t.CerrarModalArticulosPendientes()):toastr.error(a.data.mensaje)})}else toastr.warning("Seleccione al menos un artículo")},Checked:function(t,a){a?this.list_pendientes_models_temp.push(t.ai_id):this.list_pendientes_models_temp=this.list_pendientes_models_temp.filter(function(a){return a!=t.ai_id})}},mounted:function(){this.ObtenerGrupos()}}}});
webpackJsonp([20],{"2TXB":function(t,a,e){var o=e("VU/8")(e("lCLL"),e("GLv1"),!1,null,null,null);t.exports=o.exports},GLv1:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"container"},[e("div",{staticClass:"form-row"},[e("label",{staticClass:"col-md-2",attrs:{for:""}},[t._v("Código")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.codigo,expression:"codigo"}],staticClass:"form-control col col-md-4 col-sm-10",attrs:{type:"text"},domProps:{value:t.codigo},on:{input:function(a){a.target.composing||(t.codigo=a.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-dark ml-2",on:{click:t.BuscarCodigo}},[e("i",{staticClass:"fas fa-search"})])]),t._v(" "),e("div",{staticClass:"form-row mt-2"},[e("label",{staticClass:"col-md-2",attrs:{for:""}},[t._v("Descripción")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.descripcion,expression:"descripcion"}],staticClass:"form-control col col-md-4 col-sm-10",attrs:{type:"text"},domProps:{value:t.descripcion},on:{input:function(a){a.target.composing||(t.descripcion=a.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-dark ml-2",on:{click:t.BuscarDescripcion}},[e("i",{staticClass:"fas fa-search"})])]),t._v(" "),e("div",{staticClass:"container",staticStyle:{"-moz-transform":"scaleX(-1)","-webkit-transform":"scaleX(-1)","-o-transform":"scaleX(-1)",transform:"scaleX(-1)"},attrs:{id:"barcode"}},[e("div",{staticClass:"col-md-6 col-sm-12 col-lg-6 mb-3"},[t._e()],2)]),t._v(" "),e("div",{staticClass:"form-row"},[e("label",{attrs:{for:""}},[t._v("Proyecto")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.articulo.nombre_proyecto,expression:"articulo.nombre_proyecto"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.articulo.nombre_proyecto},on:{input:function(a){a.target.composing||t.$set(t.articulo,"nombre_proyecto",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-row"},[e("label",{attrs:{for:""}},[t._v("Artículo")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.articulo.articulo,expression:"articulo.articulo"}],staticClass:"form-control",attrs:{rows:"4",disabled:""},domProps:{value:t.articulo.articulo},on:{input:function(a){a.target.composing||t.$set(t.articulo,"articulo",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"col-md-6"},[e("label",{attrs:{for:""}},[t._v("Cantidad Real ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.articulo.existencia_real,expression:"articulo.existencia_real"}],staticClass:"form-control",attrs:{type:"number",step:"0.1"},domProps:{value:t.articulo.existencia_real},on:{input:function(a){a.target.composing||t.$set(t.articulo,"existencia_real",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"col-md-6"},[e("label",{attrs:{for:""}},[t._v("Observaciones ")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.articulo.observaciones,expression:"articulo.observaciones"}],staticClass:"form-control",attrs:{rows:"4",type:"text"},domProps:{value:t.articulo.observaciones},on:{input:function(a){a.target.composing||t.$set(t.articulo,"observaciones",a.target.value)}}})])]),t._v(" "),e("br"),t._v(" "),e("button",{staticClass:"btn btn-dark",on:{click:t.Guardar}},[e("i",{staticClass:"fas fa-save mr-1"}),t._v(" Guardar\r\n        ")])]),t._v(" "),e("br"),t._v(" "),e("br"),t._v(" "),e("hr"),t._v(" "),e("br"),t._v(" "),e("br"),t._v(" "),e("div",{},[e("div",{staticClass:"form-row"},[e("label",{staticClass:"col-sm-2",attrs:{for:""}},[t._v("Proyecto")]),t._v(" "),e("v-select",{staticClass:"col-sm-6",attrs:{label:"nombre_corto",options:t.list_proyectos},model:{value:t.proyecto,callback:function(a){t.proyecto=a},expression:"proyecto"}}),t._v(" "),e("button",{staticClass:"btn btn-dark",on:{click:t.BuscarInventario}},[e("i",{staticClass:"fas fa-search"})]),t._v(" "),e("button",{staticClass:"btn btn-success",on:{click:t.GenerarReporte}},[e("i",{staticClass:"fas fa-file-excel mr-1"}),t._v(" Reporte General\r\n            ")])],1),t._v(" "),e("br"),t._v(" "),e("v-client-table",{attrs:{columns:t.columns_inventario,data:t.list_inventario,options:t.options_existencias}})],1),t._v(" "),e("div",{staticClass:"modal fade",class:{mostrar:t.ver_modal_existencias},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[e("vue-element-loading",{attrs:{active:t.isGuardar_loading}}),t._v(" "),e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[t._v("Artículos encontrados")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.CerrarModalExistencias()}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("v-client-table",{ref:"tbl_propuesta",attrs:{columns:t.columns_existencias,data:t.list_existencias,options:t.options_existencias},on:{"row-click":t.SeleccionarArticulo}})],1),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(a){return t.CerrarModalExistencias()}}},[e("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")])])])],1)])])},staticRenderFns:[]}},lCLL:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("Xxa5"),r=e.n(o);a.default={data:function(){return{isObtenerInvenrarioLoading:!0,isGuardar_loading:!1,list_existencias:[],url:"almacen/inventariogral",list_proyectos:[],codigo:"",columns_existencias:["nombre_proyecto","articulo"],options_existencias:{headings:{nombre_proyecto:"Proyecto"},perPage:10,perPageValues:[],filterByColumn:!0},proyecto:{},articulo:{},ver_modal_existencias:!1,list_inventario:[],columns_inventario:["descripcion","existencia_sistema","existencia_registrada"],options_inventario:{headings:{descripcion:"Artículo",existencia_registrada:"Existencia Fisica"},perPage:10,perPageValues:[],filterByColumn:!0},descripcion:""}},methods:{BuscarInventario:function(){var t=this;null!=this.proyecto.id&&(this.isObtenerInvenrarioLoading=!0,axios.get(this.url+"/obtener/"+this.proyecto.id).then(function(a){t.isObtenerInvenrarioLoading=!1,a.data.status?t.list_inventario=a.data.existencias:toastr.error(a.data.mensaje)}))},onLoaded:function(){var t,a=(t=r.a.mark(function t(a){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a;case 3:console.error(a),t.next=13;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),null==(e={NotAllowedError:"Permita el acceso a la camara",NotFoundError:"No existe camara en este dispositivo",NotSupportedError:"No es suguro la activacion de la camara (HTTPS, localhost)",NotReadableError:"La camra ya esta en uso",OverconstrainedError:"camara no soportada",StreamApiNotSupportedError:"Stream API no soportado para este navegador"}[t.t0.name])&&(e=t.t0),toastr.error(e);case 13:case"end":return t.stop()}},t,this,[[0,6]])}),function(){var a=t.apply(this,arguments);return new Promise(function(t,e){return function o(r,s){try{var i=a[r](s),n=i.value}catch(t){return void e(t)}if(!i.done)return Promise.resolve(n).then(function(t){o("next",t)},function(t){o("throw",t)});t(n)}("next")})});return function(t){return a.apply(this,arguments)}}(),BuscarCodigo:function(){var t=this;null!=this.codigo?this.codigo.length<=3?toastr.warning("Ingrese un código válido"):axios.get(this.url+"/buscar/"+this.codigo).then(function(a){a.data.status?(t.ver_modal_existencias=!0,t.list_existencias=a.data.existencias):toastr.error(a.data.mensaje)}).catch(function(t){toastr.error("Error. Reporte al administrador"),console.error(t)}):toastr.warning("Ingrese el código")},CerrarModalExistencias:function(){this.ver_modal_existencias=!1},onDecode:function(t){var a=this;if(null!=this.proyecto)if(null!=this.proyecto.id){var e=this.proyecto.id+"&"+t;axios.get(this.url+"/buscar/"+e).then(function(t){t.data.status?a.articulo=t.data.articulo:toastr.error(t.data.mensaje)}).catch(function(t){toastr.error("Error. Reporte al administrador"),console.error(t)})}else toastr.warning("Seleccione un proyecto");else toastr.warning("Seleccione un proyecto")},ObtenerProyectos:function(){var t=this;axios.get("calidad/inspecciones/obtenerproyectos").then(function(a){a.data.status?(t.list_proyectos=a.data.proyectos,t.list_proyectos.push({id:0,nombre_corto:"TODOS LOS PROYECTOS"})):toastr.error(a.data.mensaje)})},SeleccionarArticulo:function(t){this.articulo=t.row,this.articulo.existencia_real=0,this.ver_modal_existencias=!1},Guardar:function(){var t=this;if(null!=this.articulo.articulo_id)if(this.articulo.existencia_real<0)toastr.error("Ingrese una cantidad real válida");else{this.isGuardar_loading=!0;var a=new FormData;a.append("articulo_id",this.articulo.articulo_id),a.append("proyecto_id",this.articulo.proyecto_id),a.append("existecia_sistema",this.articulo.existencia_sistema),a.append("existencia_real",this.articulo.existencia_real),a.append("observaciones",this.articulo.observaciones),axios.post(this.url+"/guardarinv",a).then(function(a){t.isGuardar_loading=!1,a.data.status?(toastr.success("Guardado correctamente"),t.articulo={},t.codigo="MCF ",t.BuscarInventario()):toastr.error(a.data.mensaje)})}else toastr.warning("Seleccione un artículo")},BuscarDescripcion:function(){var t=this;this.descripcion.length<=3?toastr.warning("Ingrese un artículo"):axios.get(this.url+"/buscarpordesc/"+this.descripcion).then(function(a){a.data.status?(t.ver_modal_existencias=!0,t.list_existencias=a.data.existencias):toastr.error(a.data.mensaje)})},GenerarReporte:function(){window.open(this.url+"/reporte/0","_blank")}},mounted:function(){this.ObtenerProyectos()}}}});
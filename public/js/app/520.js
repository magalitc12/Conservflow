/*! For license information please see 520.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[520],{98520:(t,r,e)=>{e.r(r),e.d(r,{default:()=>s});function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){a=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{d({},"")}catch(t){d=function(t,r,e){return t[r]=e}}function v(t,r,e,o){var a=r&&r.prototype instanceof _?r:_,n=Object.create(a.prototype),s=new G(o||[]);return i(n,"_invoke",{value:O(t,e,s)}),n}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=v;var p="suspendedStart",h="suspendedYield",m="executing",y="completed",g={};function _(){}function b(){}function x(){}var w={};d(w,c,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(I([])));E&&E!==e&&n.call(E,c)&&(w=E);var L=x.prototype=_.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(r){d(t,r,(function(t){return this._invoke(r,t)}))}))}function P(t,r){function e(a,i,s,c){var l=f(t[a],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==o(d)&&n.call(d,"__await")?r.resolve(d.__await).then((function(t){e("next",t,s,c)}),(function(t){e("throw",t,s,c)})):r.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return e("throw",t,s,c)}))}c(l.arg)}var a;i(this,"_invoke",{value:function(t,o){function n(){return new r((function(r,a){e(t,o,r,a)}))}return a=a?a.then(n,n):n()}})}function O(r,e,o){var a=p;return function(n,i){if(a===m)throw Error("Generator is already running");if(a===y){if("throw"===n)throw i;return{value:t,done:!0}}for(o.method=n,o.arg=i;;){var s=o.delegate;if(s){var c=S(s,o);if(c){if(c===g)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===p)throw a=y,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=m;var l=f(r,e,o);if("normal"===l.type){if(a=o.done?y:h,l.arg===g)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(a=y,o.method="throw",o.arg=l.arg)}}}function S(r,e){var o=e.method,a=r.iterator[o];if(a===t)return e.delegate=null,"throw"===o&&r.iterator.return&&(e.method="return",e.arg=t,S(r,e),"throw"===e.method)||"return"!==o&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),g;var n=f(a,r.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,g;var i=n.arg;return i?i.done?(e[r.resultName]=i.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function N(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function j(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function I(r){if(r||""===r){var e=r[c];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,i=function e(){for(;++a<r.length;)if(n.call(r,a))return e.value=r[a],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(o(r)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=d(x,u,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},r.awrap=function(t){return{__await:t}},k(P.prototype),d(P.prototype,l,(function(){return this})),r.AsyncIterator=P,r.async=function(t,e,o,a,n){void 0===n&&(n=Promise);var i=new P(v(t,e,o,a),n);return r.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(L),d(L,u,"Generator"),d(L,c,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var o in r)e.push(o);return e.reverse(),function t(){for(;e.length;){var o=e.pop();if(o in r)return t.value=o,t.done=!1,t}return t.done=!0,t}},r.values=I,G.prototype={constructor:G,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function o(o,a){return s.type="throw",s.arg=r,e.next=o,a&&(e.method="next",e.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=r,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),g},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),j(e),g}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var o=e.completion;if("throw"===o.type){var a=o.arg;j(e)}return a}}throw Error("illegal catch attempt")},delegateYield:function(r,e,o){return this.delegate={iterator:I(r),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=t),g}},r}function n(t,r,e,o,a,n,i){try{var s=t[n](i),c=s.value}catch(t){return void e(t)}s.done?r(c):Promise.resolve(c).then(o,a)}const i={data:function(){return{isObtenerInvenrarioLoading:!0,isGuardar_loading:!1,list_existencias:[],url:"almacen/inventariogral",list_proyectos:[],codigo:"",columns_existencias:["nombre_proyecto","articulo"],options_existencias:{headings:{nombre_proyecto:"Proyecto"},perPage:10,perPageValues:[],filterByColumn:!0},proyecto:{},articulo:{},ver_modal_existencias:!1,list_inventario:[],columns_inventario:["descripcion","existencia_sistema","existencia_registrada"],options_inventario:{headings:{descripcion:"Artículo",existencia_registrada:"Existencia Fisica"},perPage:10,perPageValues:[],filterByColumn:!0},descripcion:""}},methods:{BuscarInventario:function(){var t=this;null!=this.proyecto.id&&(this.isObtenerInvenrarioLoading=!0,axios.get(this.url+"/obtener/"+this.proyecto.id).then((function(r){t.isObtenerInvenrarioLoading=!1,r.data.status?t.list_inventario=r.data.existencias:toastr.error(r.data.mensaje)})))},onLoaded:function(t){return(r=a().mark((function r(){var e;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t;case 3:console.error(t),r.next=13;break;case 6:r.prev=6,r.t0=r.catch(0),console.error(r.t0),null==(e={NotAllowedError:"Permita el acceso a la camara",NotFoundError:"No existe camara en este dispositivo",NotSupportedError:"No es suguro la activacion de la camara (HTTPS, localhost)",NotReadableError:"La camra ya esta en uso",OverconstrainedError:"camara no soportada",StreamApiNotSupportedError:"Stream API no soportado para este navegador"}[r.t0.name])&&(e=r.t0),toastr.error(e);case 13:case"end":return r.stop()}}),r,null,[[0,6]])})),function(){var t=this,e=arguments;return new Promise((function(o,a){var i=r.apply(t,e);function s(t){n(i,o,a,s,c,"next",t)}function c(t){n(i,o,a,s,c,"throw",t)}s(void 0)}))})();var r},BuscarCodigo:function(){var t=this;null!=this.codigo?this.codigo.length<=3?toastr.warning("Ingrese un código válido"):axios.get(this.url+"/buscar/"+this.codigo).then((function(r){r.data.status?(t.ver_modal_existencias=!0,t.list_existencias=r.data.existencias):toastr.error(r.data.mensaje)})).catch((function(t){toastr.error("Error. Reporte al administrador"),console.error(t)})):toastr.warning("Ingrese el código")},CerrarModalExistencias:function(){this.ver_modal_existencias=!1},onDecode:function(t){var r=this;if(null!=this.proyecto)if(null!=this.proyecto.id){var e=this.proyecto.id+"&"+t;axios.get(this.url+"/buscar/"+e).then((function(t){t.data.status?r.articulo=t.data.articulo:toastr.error(t.data.mensaje)})).catch((function(t){toastr.error("Error. Reporte al administrador"),console.error(t)}))}else toastr.warning("Seleccione un proyecto");else toastr.warning("Seleccione un proyecto")},ObtenerProyectos:function(){var t=this;axios.get("calidad/inspecciones/obtenerproyectos").then((function(r){r.data.status?(t.list_proyectos=r.data.proyectos,t.list_proyectos.push({id:0,nombre_corto:"TODOS LOS PROYECTOS"})):toastr.error(r.data.mensaje)}))},SeleccionarArticulo:function(t){this.articulo=t.row,this.articulo.existencia_real=0,this.ver_modal_existencias=!1},Guardar:function(){var t=this;if(null!=this.articulo.articulo_id)if(this.articulo.existencia_real<0)toastr.error("Ingrese una cantidad real válida");else{this.isGuardar_loading=!0;var r=new FormData;r.append("articulo_id",this.articulo.articulo_id),r.append("proyecto_id",this.articulo.proyecto_id),r.append("existecia_sistema",this.articulo.existencia_sistema),r.append("existencia_real",this.articulo.existencia_real),r.append("observaciones",this.articulo.observaciones),axios.post(this.url+"/guardarinv",r).then((function(r){t.isGuardar_loading=!1,r.data.status?(toastr.success("Guardado correctamente"),t.articulo={},t.codigo="MCF ",t.BuscarInventario()):toastr.error(r.data.mensaje)}))}else toastr.warning("Seleccione un artículo")},BuscarDescripcion:function(){var t=this;this.descripcion.length<=3?toastr.warning("Ingrese un artículo"):axios.get(this.url+"/buscarpordesc/"+this.descripcion).then((function(r){r.data.status?(t.ver_modal_existencias=!0,t.list_existencias=r.data.existencias):toastr.error(r.data.mensaje)}))},GenerarReporte:function(){window.open(this.url+"/reporte/0","_blank")}},mounted:function(){this.ObtenerProyectos()}};const s=(0,e(14486).A)(i,(function(){var t=this,r=t._self._c;return r("div",{staticClass:"container"},[r("div",{staticClass:"container"},[r("div",{staticClass:"form-row"},[r("label",{staticClass:"col-md-2",attrs:{for:""}},[t._v("Código")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.codigo,expression:"codigo"}],staticClass:"form-control col col-md-4 col-sm-10",attrs:{type:"text"},domProps:{value:t.codigo},on:{input:function(r){r.target.composing||(t.codigo=r.target.value)}}}),t._v(" "),r("button",{staticClass:"btn btn-dark ml-2",on:{click:t.BuscarCodigo}},[r("i",{staticClass:"fas fa-search"})])]),t._v(" "),r("div",{staticClass:"form-row mt-2"},[r("label",{staticClass:"col-md-2",attrs:{for:""}},[t._v("Descripción")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.descripcion,expression:"descripcion"}],staticClass:"form-control col col-md-4 col-sm-10",attrs:{type:"text"},domProps:{value:t.descripcion},on:{input:function(r){r.target.composing||(t.descripcion=r.target.value)}}}),t._v(" "),r("button",{staticClass:"btn btn-dark ml-2",on:{click:t.BuscarDescripcion}},[r("i",{staticClass:"fas fa-search"})])]),t._v(" "),r("div",{staticClass:"container",staticStyle:{"-moz-transform":"scaleX(-1)","-webkit-transform":"scaleX(-1)","-o-transform":"scaleX(-1)",transform:"scaleX(-1)"},attrs:{id:"barcode"}},[r("div",{staticClass:"col-md-6 col-sm-12 col-lg-6 mb-3"},[t._e()],2)]),t._v(" "),r("div",{staticClass:"form-row"},[r("label",{attrs:{for:""}},[t._v("Proyecto")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.articulo.nombre_proyecto,expression:"articulo.nombre_proyecto"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.articulo.nombre_proyecto},on:{input:function(r){r.target.composing||t.$set(t.articulo,"nombre_proyecto",r.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-row"},[r("label",{attrs:{for:""}},[t._v("Artículo")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.articulo.articulo,expression:"articulo.articulo"}],staticClass:"form-control",attrs:{rows:"4",disabled:""},domProps:{value:t.articulo.articulo},on:{input:function(r){r.target.composing||t.$set(t.articulo,"articulo",r.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"col-md-6"},[r("label",{attrs:{for:""}},[t._v("Cantidad Real ")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.articulo.existencia_real,expression:"articulo.existencia_real"}],staticClass:"form-control",attrs:{type:"number",step:"0.1"},domProps:{value:t.articulo.existencia_real},on:{input:function(r){r.target.composing||t.$set(t.articulo,"existencia_real",r.target.value)}}})])]),t._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"col-md-6"},[r("label",{attrs:{for:""}},[t._v("Observaciones ")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.articulo.observaciones,expression:"articulo.observaciones"}],staticClass:"form-control",attrs:{rows:"4",type:"text"},domProps:{value:t.articulo.observaciones},on:{input:function(r){r.target.composing||t.$set(t.articulo,"observaciones",r.target.value)}}})])]),t._v(" "),r("br"),t._v(" "),r("button",{staticClass:"btn btn-dark",on:{click:t.Guardar}},[r("i",{staticClass:"fas fa-save mr-1"}),t._v(" Guardar\n        ")])]),t._v(" "),r("br"),t._v(" "),r("br"),t._v(" "),r("hr"),t._v(" "),r("br"),t._v(" "),r("br"),t._v(" "),r("div",{},[r("div",{staticClass:"form-row"},[r("label",{staticClass:"col-sm-2",attrs:{for:""}},[t._v("Proyecto")]),t._v(" "),r("v-select",{staticClass:"col-sm-6",attrs:{label:"nombre_corto",options:t.list_proyectos},model:{value:t.proyecto,callback:function(r){t.proyecto=r},expression:"proyecto"}}),t._v(" "),r("button",{staticClass:"btn btn-dark",on:{click:t.BuscarInventario}},[r("i",{staticClass:"fas fa-search"})]),t._v(" "),r("button",{staticClass:"btn btn-success",on:{click:t.GenerarReporte}},[r("i",{staticClass:"fas fa-file-excel mr-1"}),t._v(" Reporte General\n            ")])],1),t._v(" "),r("br"),t._v(" "),r("v-client-table",{attrs:{columns:t.columns_inventario,data:t.list_inventario,options:t.options_existencias}})],1),t._v(" "),r("div",{staticClass:"modal fade",class:{mostrar:t.ver_modal_existencias},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[r("vue-element-loading",{attrs:{active:t.isGuardar_loading}}),t._v(" "),r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[r("h4",{staticClass:"modal-title"},[t._v("Artículos encontrados")]),t._v(" "),r("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(r){return t.CerrarModalExistencias()}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),r("div",{staticClass:"modal-body"},[r("v-client-table",{ref:"tbl_propuesta",attrs:{columns:t.columns_existencias,data:t.list_existencias,options:t.options_existencias},on:{"row-click":t.SeleccionarArticulo}})],1),t._v(" "),r("div",{staticClass:"modal-footer"},[r("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(r){return t.CerrarModalExistencias()}}},[r("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")])])])],1)])])}),[],!1,null,null,null).exports}}]);
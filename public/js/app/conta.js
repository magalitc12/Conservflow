/*! For license information please see conta.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[644],{14941:a=>{a.exports=function(){return{dateColumns:[],listColumns:{},datepickerOptions:{locale:{cancelLabel:"Clear"}},datepickerPerColumnOptions:{},initialPage:1,perPage:10,perPageValues:[10,25,50,100],groupBy:!1,collapseGroups:!1,destroyEventBus:!1,sendEmptyFilters:!1,params:{},sortable:!0,filterable:!0,groupMeta:[],initFilters:{},customFilters:[],templates:{},debounce:250,dateFormat:"DD/MM/YYYY",dateFormatPerColumn:{},toMomentFormat:!1,skin:"table table-striped table-bordered table-hover table-sm",skinBusqueda:"table table-striped table-bordered table-hover table-sm busqueda",columnsDisplay:{},columnsDropdown:!1,texts:{count:"Mostrando del {from} al  {to} de {count} registros|{count} registros|Un registro",first:"Primero",last:"Ultimo",filter:"Buscar:",filterPlaceholder:"Buscar...",limit:"Registros:",page:"Pagina:",noResults:"No se encontraron registros",filterBy:"Filtrar por {column}",loading:"Cargando...",defaultOption:"Seleccionar {column}",columns:"Columnas"},sortIcon:{base:"fa",up:"fa-chevron-up",down:"fa-chevron-down",is:"fa-sort"},sortingAlgorithm:function(a,t){return a.sort(this.getSortFn(t))},customSorting:{},multiSorting:{},clientMultiSorting:!0,serverMultiSorting:!1,filterByColumn:!1,highlightMatches:!1,orderBy:!1,descOrderColumns:[],footerHeadings:!1,headings:{},headingsTooltips:{},pagination:{dropdown:!1,chunk:10,edge:!1,align:"center",nav:"fixed"},childRow:!1,childRowTogglerFirst:!0,uniqueKey:"id",requestFunction:!1,requestAdapter:function(a){return a},responseAdapter:function(a){var t=this.getResponseData(a);return{data:t.data,count:t.count}},requestKeys:{query:"query",limit:"limit",orderBy:"orderBy",ascending:"ascending",page:"page",byColumn:"byColumn"},rowClassCallback:!1,preserveState:!1,saveState:!1,storage:"local",columnsClasses:{},columnCondicion:[{id:1,text:"Activo"},{id:0,text:"Desactivado"}]}}},60173:(a,t,e)=>{"use strict";function o(a){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},o(a)}e.d(t,{A:()=>r});const r={resetObject:function(a){for(var t in a)"string"==typeof a[t]?a[t]="":"number"==typeof a[t]?a[t]=0:void 0===o(a[t])?a[t]=null:"object"===o(a[t])&&(a[t]={})},getCRUD:function(a){var t=new FormData;t.append("ruta",a),t.append("identificador",1);var e={Create:!1,Read:!1,Update:!1,Delete:!1,Download:!1,Upload:!1};return axios.post("/CRUD",t).then((function(a){for(var t=0;t<a.data.length;t++)1==a.data[t].control_id&&(e.Create=!0),2==a.data[t].control_id&&(e.Read=!0),3==a.data[t].control_id&&(e.Update=!0),4==a.data[t].control_id&&(e.Delete=!0),5==a.data[t].control_id&&(e.Download=!0),6==a.data[t].control_id&&(e.Upload=!0)})).catch((function(a){console.log(a)})),e}}},25437:(a,t,e)=>{"use strict";e.d(t,{A:()=>i});var o=e(76798),r=e.n(o)()((function(a){return a[1]}));r.push([a.id,"hr{border-style:inset;border-width:2px;display:block;margin:2em auto}",""]);const i=r},32901:(a,t,e)=>{"use strict";e.d(t,{A:()=>i});var o=e(76798),r=e.n(o)()((function(a){return a[1]}));r.push([a.id,"hr{border-style:inset;border-width:2px;display:block;margin:2em auto}",""]);const i=r},67123:(a,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>s});var o=e(60173),r=e(14941).call(void 0);const i={data:function(){return{formaPago:{id:0,clave:"",descripcion:""},modal:0,tituloModal:"",tipoAccion:0,isLoading:!1,columns:["id","clave","descripcion"],tableData:[],options:{headings:{clave:"Clave",descripcion:"Descripción",id:"Acciones"},perPage:10,perPageValues:[],skin:r.skin,sortIcon:r.sortIcon,sortable:["clave","descripcion"],filterable:["clave","descripcion"],filterByColumn:!0,listColumns:{},texts:r.texts}}},computed:{},methods:{getData:function(){var a=this;axios.get("/satcatformpago").then((function(t){a.tableData=t.data})).catch((function(a){console.log(a)}))},guardarFormaPago:function(a){var t=this;this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var o=t;axios({method:a?"POST":"PUT",url:a?"/satcatformpago/registrar":"/satcatformpago/actualizar",data:{clave:t.formaPago.clave,descripcion:t.formaPago.descripcion,id:t.formaPago.id}}).then((function(t){o.isLoading=!1,t.data.status?(o.cerrarModal(),o.getData(),a?toastr.success("Forma de pago Registrada Correctamente"):toastr.success("Forma de pago Actualizada Correctamente")):swal({type:"error",html:t.data.errors.join("<br>")})})).catch((function(a){console.log(a)}))}}))},cerrarModal:function(){this.modal=0,this.tituloModal="",o.A.resetObject(this.formaPago)},abrirModal:function(a,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("forma-pago"===a)switch(t){case"registrar":this.modal=1,this.tituloModal="Registrar Forma de pago",o.A.resetObject(this.formaPago),this.tipoAccion=1;break;case"actualizar":this.modal=1,this.tituloModal="Actualizar Forma de pago",this.tipoAccion=2,this.formaPago.id=e.id,this.formaPago.clave=e.clave,this.formaPago.descripcion=e.descripcion}}},mounted:function(){this.getData()}};const s=(0,e(14486).A)(i,(function(){var a=this,t=a._self._c;return t("main",{staticClass:"main"},[t("div",{staticClass:"container-fluid"},[t("br"),a._v(" "),t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),a._v(" Formas de pago\n                "),t("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.abrirModal("forma-pago","registrar")}}},[t("i",{staticClass:"fas fa-plus"}),a._v(" Nuevo\n                ")])]),a._v(" "),t("div",{staticClass:"card-body"},[t("v-client-table",{ref:"myTable",attrs:{columns:a.columns,data:a.tableData,options:a.options},scopedSlots:a._u([{key:"id",fn:function(e){return[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[t("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[t("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-grip-horizontal"}),a._v("  Acciones\n                            ")]),a._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.abrirModal("forma-pago","actualizar",e.row)}}},[t("i",{staticClass:"icon-pencil"}),a._v("  Actualizar\n                        ")])])])])]}}])})],1)])]),a._v(" "),t("div",{staticClass:"modal fade",class:{mostrar:a.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[t("vue-element-loading",{attrs:{active:a.isLoading}}),a._v(" "),t("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",domProps:{textContent:a._s(a.tituloModal)}}),a._v(" "),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return a.cerrarModal()}}},[t("span",{attrs:{"aria-hidden":"true"}},[a._v("×")])])]),a._v(" "),t("div",{staticClass:"modal-body"},[t("form",{staticClass:"form-horizontal",attrs:{action:"",method:"post",enctype:"multipart/form-data"}},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"clave"}},[a._v("Clave")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|length:2",expression:"'required|length:2'"},{name:"model",rawName:"v-model",value:a.formaPago.clave,expression:"formaPago.clave"}],staticClass:"form-control",attrs:{type:"text",name:"clave",placeholder:"Clave",autocomplete:"off",id:"clave"},domProps:{value:a.formaPago.clave},on:{input:function(t){t.target.composing||a.$set(a.formaPago,"clave",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("clave")))])])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"descripcion"}},[a._v("Descripción")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.formaPago.descripcion,expression:"formaPago.descripcion"}],staticClass:"form-control",attrs:{type:"text",name:"descripcion",placeholder:"Descripción",autocomplete:"off",id:"descripcion"},domProps:{value:a.formaPago.descripcion},on:{input:function(t){t.target.composing||a.$set(a.formaPago,"descripcion",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("descripcion")))])])])])]),a._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(t){return a.cerrarModal()}}},[t("i",{staticClass:"fas fa-times"}),a._v(" Cerrar")]),a._v(" "),1==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardarFormaPago(1)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Guardar")]):a._e(),a._v(" "),2==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardarFormaPago(0)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Actualizar")]):a._e()])])])])],1)])}),[],!1,null,null,null).exports},37064:(a,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>s});var o=e(60173),r=e(14941).call(void 0);const i={data:function(){return{isLoading_datos:!1,productoServicio:{id:0,clave:"",descripcion:"",fecha_ini_vig:"",fecha_fin_vig:"",incluir_iva_tras:"",incluir_ieps_tras:"",complemento:""},modal:0,tituloModal:"",tipoAccion:0,isLoading:!1,columns:["id","clave","descripcion"],list_productos:[],options:{headings:{clave:"Clave",descripcion:"Descripción",id:"Acciones"},perPage:10,perPageValues:[],skin:r.skin,sortIcon:r.sortIcon,sortable:["clave","descripcion"],filterable:["clave","descripcion"],filterByColumn:!0,listColumns:{},texts:r.texts}}},computed:{},methods:{getData:function(){var a=this;this.isLoading_datos=!0,axios.get("/satcatprodser1").then((function(t){a.isLoading_datos=!1,t.data.status?a.list_productos=t.data.productoServicio:toastr.error(res.data.mensaje)}))},guardarProductoServicio:function(a){var t=this;this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var o=t;axios({method:a?"POST":"PUT",url:a?"/satcatprodser/registrar":"/satcatprodser/actualizar",data:{clave:t.productoServicio.clave,descripcion:t.productoServicio.descripcion,id:t.productoServicio.id,fecha_ini_vig:t.productoServicio.fecha_ini_vig,fecha_fin_vig:t.productoServicio.fecha_fin_vig,incluir_iva_tras:t.productoServicio.incluir_iva_tras,incluir_ieps_tras:t.productoServicio.incluir_ieps_tras,complemento:t.productoServicio.complemento}}).then((function(t){o.isLoading=!1,t.data.status?(o.cerrarModal(),o.getData(),a?toastr.success("Producto/Servicio Registrada Correctamente"):toastr.success("Producto/Servicio Actualizada Correctamente")):swal({type:"error",html:t.data.errors.join("<br>")})})).catch((function(a){console.log(a)}))}}))},cerrarModal:function(){this.modal=0,this.tituloModal="",o.A.resetObject(this.productoServicio)},abrirModal:function(a,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("productoServicio"===a)switch(t){case"registrar":this.modal=1,this.tituloModal="Registrar Producto/Servicio",o.A.resetObject(this.productoServicio),this.tipoAccion=1;break;case"actualizar":this.modal=1,this.tituloModal="Actualizar Producto/Servicio",this.tipoAccion=2,this.productoServicio.id=e.id,this.productoServicio.clave=e.clave,this.productoServicio.descripcion=e.descripcion,this.productoServicio.fecha_ini_vig=e.fecha_ini_vig,this.productoServicio.fecha_fin_vig=e.fecha_fin_vig,this.productoServicio.incluir_iva_tras=e.incluir_iva_tras,this.productoServicio.incluir_ieps_tras=e.incluir_ieps_tras,this.productoServicio.complemento=e.complemento}}},mounted:function(){this.getData()}};const s=(0,e(14486).A)(i,(function(){var a=this,t=a._self._c;return t("main",{staticClass:"main"},[t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),a._v(" Cat. Productos y servicios\n                "),t("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.abrirModal("productoServicio","registrar")}}},[t("i",{staticClass:"fas fa-plus"}),a._v(" Nuevo\n                ")])]),a._v(" "),t("vue-element-loading",{attrs:{active:a.isLoading_datos}}),a._v(" "),t("div",{staticClass:"card-body"},[t("v-client-table",{ref:"myTable",attrs:{columns:a.columns,data:a.list_productos,options:a.options},scopedSlots:a._u([{key:"id",fn:function(e){return[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[t("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[t("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-grip-horizontal"}),a._v("  Acciones\n                                ")]),a._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.abrirModal("productoServicio","actualizar",e.row)}}},[t("i",{staticClass:"icon-pencil"}),a._v("  Actualizar\n                                    ")])])])])]}}])})],1)],1)]),a._v(" "),t("div",{staticClass:"modal fade",class:{mostrar:a.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[t("vue-element-loading",{attrs:{active:a.isLoading}}),a._v(" "),t("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",domProps:{textContent:a._s(a.tituloModal)}}),a._v(" "),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return a.cerrarModal()}}},[t("span",{attrs:{"aria-hidden":"true"}},[a._v("×")])])]),a._v(" "),t("div",{staticClass:"modal-body"},[t("form",{staticClass:"form-horizontal",attrs:{action:"",method:"post",enctype:"multipart/form-data"}},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"clave"}},[a._v("Clave")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|length:8",expression:"'required|length:8'"},{name:"model",rawName:"v-model",value:a.productoServicio.clave,expression:"productoServicio.clave"}],staticClass:"form-control",attrs:{type:"text",name:"clave",placeholder:"Clave",autocomplete:"off",id:"clave"},domProps:{value:a.productoServicio.clave},on:{input:function(t){t.target.composing||a.$set(a.productoServicio,"clave",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("clave")))])])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"descripcion"}},[a._v("Descripción")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.productoServicio.descripcion,expression:"productoServicio.descripcion"}],staticClass:"form-control",attrs:{type:"text",name:"descripcion",placeholder:"Descripción",autocomplete:"off",id:"descripcion"},domProps:{value:a.productoServicio.descripcion},on:{input:function(t){t.target.composing||a.$set(a.productoServicio,"descripcion",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("descripcion")))])])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"fecha_ini_vig"}},[a._v("Fecha inicio de vig.")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"},{name:"model",rawName:"v-model",value:a.productoServicio.fecha_ini_vig,expression:"productoServicio.fecha_ini_vig"}],staticClass:"form-control",attrs:{type:"date",name:"fecha_ini_vig",placeholder:"Fecha inicio de vig.",autocomplete:"off",id:"fecha_ini_vig"},domProps:{value:a.productoServicio.fecha_ini_vig},on:{input:function(t){t.target.composing||a.$set(a.productoServicio,"fecha_ini_vig",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("fecha_ini_vig")))])])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"fecha_fin_vig"}},[a._v("Fecha fin de vig.")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"},{name:"model",rawName:"v-model",value:a.productoServicio.fecha_fin_vig,expression:"productoServicio.fecha_fin_vig"}],staticClass:"form-control",attrs:{type:"date",name:"fecha_fin_vig",placeholder:"Fecha fin de vig.",autocomplete:"off",id:"fecha_fin_vig"},domProps:{value:a.productoServicio.fecha_fin_vig},on:{input:function(t){t.target.composing||a.$set(a.productoServicio,"fecha_fin_vig",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("fecha_fin_vig")))])])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"incluir_iva_tras"}},[a._v("Incluir IVA Tras.")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"},{name:"model",rawName:"v-model",value:a.productoServicio.incluir_iva_tras,expression:"productoServicio.incluir_iva_tras"}],staticClass:"form-control",attrs:{type:"text",name:"incluir_iva_tras",placeholder:"Incluir IVA Tras.",autocomplete:"off",id:"incluir_iva_tras"},domProps:{value:a.productoServicio.incluir_iva_tras},on:{input:function(t){t.target.composing||a.$set(a.productoServicio,"incluir_iva_tras",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("incluir_iva_tras")))])])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"incluir_ieps_tras"}},[a._v("Incluir IEPS Tras.")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"},{name:"model",rawName:"v-model",value:a.productoServicio.incluir_ieps_tras,expression:"productoServicio.incluir_ieps_tras"}],staticClass:"form-control",attrs:{type:"text",name:"incluir_ieps_tras",placeholder:"Incluir IEPS Tras.",autocomplete:"off",id:"incluir_ieps_tras"},domProps:{value:a.productoServicio.incluir_ieps_tras},on:{input:function(t){t.target.composing||a.$set(a.productoServicio,"incluir_ieps_tras",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("incluir_ieps_tras")))])])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"complemento"}},[a._v("Complemento")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"},{name:"model",rawName:"v-model",value:a.productoServicio.complemento,expression:"productoServicio.complemento"}],staticClass:"form-control",attrs:{type:"text",name:"complemento",placeholder:"Complemento",autocomplete:"off",id:"complemento"},domProps:{value:a.productoServicio.complemento},on:{input:function(t){t.target.composing||a.$set(a.productoServicio,"complemento",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("complemento")))])])])])]),a._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(t){return a.cerrarModal()}}},[t("i",{staticClass:"fas fa-times"}),a._v(" Cerrar")]),a._v(" "),1==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardarProductoServicio(1)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Guardar")]):a._e(),a._v(" "),2==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardarProductoServicio(0)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Actualizar")]):a._e()])])])])],1)])}),[],!1,null,null,null).exports},62813:(a,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>c});function o(a){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},o(a)}function r(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),e.push.apply(e,o)}return e}function i(a,t,e){return(t=function(a){var t=function(a,t){if("object"!=o(a)||!a)return a;var e=a[Symbol.toPrimitive];if(void 0!==e){var r=e.call(a,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(a)}(a,"string");return"symbol"==o(t)?t:t+""}(t))in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}var s=e(14941).call(void 0);const n={data:function(){return{url_satcatunidades:"tesoreria/catalogos/unidades",tipoAccion_satcatunidades:1,tipoCardSatCatUnidades:1,ver_modal_satcatunidades:!1,tituloModal_satcatunidades:"",satcatunidades_id:0,isGuardarsatcatunidades_loading:!1,isObtenersatcatunidades_loading:!1,columns_satcatunidades:["id","c_unidad","nombre","descripcion"],list_satcatunidades:[],satcatunidades:{},options_satcatunidades:{headings:{id:"Acciones",c_unidad:"Unidad",nombre:"Nombre",descripcion:"Descripción"},perPage:10,perPageValues:[],skin:s.skin,sortIcon:s.sortIcon,filterByColumn:!0,texts:s.texts}}},methods:{ObtenerSatCatUnidades:function(){var a=this;this.isObtenersatcatunidades_loading=!0,axios.get(this.url_satcatunidades+"/obtener").then((function(t){a.isObtenersatcatunidades_loading=!1,t.data.status?a.list_satcatunidades=t.data.unidades:toastr.error(t.data.mensaje)}))},AbrirModalSatCatUnidades:function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ver_modal_satcatunidades=!0,a?(this.tituloModal_satcatunidades="Registrar Unidades",this.tipoAccion_satcatunidades=1):(this.satcatunidades_id=t.id,this.tituloModal_satcatunidades="Actualizar Unidades",this.tipoAccion_satcatunidades=2,this.satcatunidades=function(a){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach((function(t){i(a,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(e,t))}))}return a}({},t))},RegistrarSatCatUnidades:function(a){var t=this;this.$validator.validate().then((function(e){if(e){var o=new FormData;a||o.append("id",t.satcatunidades_id),o.append("c_unidad",t.satcatunidades.c_unidad),o.append("nombre",t.satcatunidades.nombre),o.append("descripcion",t.satcatunidades.descripcion),t.isGuardarsatcatunidades_loading=!0,axios.post(t.url_satcatunidades+"/guardar",o).then((function(a){t.isGuardarsatcatunidades_loading=!1,a.data.status?(toastr.success("Guardado correctamente"),t.ObtenerSatCatUnidades(),t.CerrarModalSatCatUnidades()):toastr.error(a.data.mensaje)}))}}))},CerrarModalSatCatUnidades:function(){this.satcatunidades={},this.ver_modal_satcatunidades=!1}},mounted:function(){this.ObtenerSatCatUnidades()}};const c=(0,e(14486).A)(n,(function(){var a=this,t=a._self._c;return t("main",{staticClass:"main"},[t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.tipoCardSatCatUnidades,expression:"tipoCardSatCatUnidades==1"}],staticClass:"card"},[t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),a._v(" UNIDADES\n            "),t("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.AbrirModalSatCatUnidades(!0)}}},[t("i",{staticClass:"fas fa-plus"}),a._v(" Nuevo\n            ")])]),a._v(" "),t("div",{staticClass:"card-body"},[t("vue-element-loading",{attrs:{active:a.isObtenersatcatunidades_loading}}),a._v(" "),t("v-client-table",{attrs:{columns:a.columns_satcatunidades,data:a.list_satcatunidades,options:a.options_satcatunidades},scopedSlots:a._u([{key:"id",fn:function(e){return[t("div",{staticClass:"btn-group",attrs:{role:"group"}},[t("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[t("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-grip-horizontal"}),a._v(" Acciones\n                            ")]),a._v(" "),t("div",{staticClass:"dropdown-menu"},[t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.AbrirModalSatCatUnidades(!1,e.row)}}},[t("i",{staticClass:"fas fa-edit"}),a._v(" Actualizar\n                                ")])])])])]}}])})],1)]),a._v(" "),a.ver_modal_satcatunidades?t("div",{staticClass:"modal fade",class:{mostrar:a.ver_modal_satcatunidades},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",domProps:{textContent:a._s(a.tituloModal_satcatunidades)}}),a._v(" "),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return a.CerrarModalSatCatUnidades()}}},[t("span",{attrs:{"aria-hidden":"true"}},[a._v("×")])])]),a._v(" "),t("div",{staticClass:"modal-body"},[t("vue-element-loading",{attrs:{active:a.isGuardarsatcatunidades_loading}}),a._v(" "),t("div",[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label"},[a._v("Unidad")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.satcatunidades.c_unidad,expression:"satcatunidades.c_unidad"}],staticClass:"form-control",attrs:{type:"text",maxlength:"3",minlength:"1","data-vv-name":"Unidad",autocomplete:"off"},domProps:{value:a.satcatunidades.c_unidad},on:{input:function(t){t.target.composing||a.$set(a.satcatunidades,"c_unidad",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("Unidad")))])])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label"},[a._v("Nombre")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.satcatunidades.nombre,expression:"satcatunidades.nombre"}],staticClass:"form-control",attrs:{type:"text",maxlength:"150",minlength:"1","data-vv-name":"Nombre",autocomplete:"off"},domProps:{value:a.satcatunidades.nombre},on:{input:function(t){t.target.composing||a.$set(a.satcatunidades,"nombre",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("Nombre")))])])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 form-control-label"},[a._v("Descripción")]),a._v(" "),t("div",{staticClass:"col-md-9"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.satcatunidades.descripcion,expression:"satcatunidades.descripcion"}],staticClass:"form-control",attrs:{type:"text","data-vv-name":"Descripción"},domProps:{value:a.satcatunidades.descripcion},on:{input:function(t){t.target.composing||a.$set(a.satcatunidades,"descripcion",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("Descripción")))])])])])],1),a._v(" "),t("div",{staticClass:"modal-footer"},[t("vue-element-loading",{attrs:{active:a.isGuardarsatcatunidades_loading}}),a._v(" "),t("div",[t("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(t){return a.CerrarModalSatCatUnidades()}}},[t("i",{staticClass:"fas fa-window-close"}),a._v(" Cerrar\n                            ")]),a._v(" "),1==a.tipoAccion_satcatunidades?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.RegistrarSatCatUnidades(!0)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Guardar\n                            ")]):a._e(),a._v(" "),2==a.tipoAccion_satcatunidades?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.RegistrarSatCatUnidades(!1)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Actualizar\n                            ")]):a._e()])],1)])])])]):a._e()])}),[],!1,null,null,null).exports},31920:(a,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>c});e(60173);function o(a){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},o(a)}function r(){r=function(){return t};var a,t={},e=Object.prototype,i=e.hasOwnProperty,s=Object.defineProperty||function(a,t,e){a[t]=e.value},n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",d=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function u(a,t,e){return Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),a[t]}try{u({},"")}catch(a){u=function(a,t,e){return a[t]=e}}function p(a,t,e,o){var r=t&&t.prototype instanceof b?t:b,i=Object.create(r.prototype),n=new M(o||[]);return s(i,"_invoke",{value:D(a,e,n)}),i}function f(a,t,e){try{return{type:"normal",arg:a.call(t,e)}}catch(a){return{type:"throw",arg:a}}}t.wrap=p;var v="suspendedStart",m="suspendedYield",_="executing",g="completed",h={};function b(){}function C(){}function w(){}var y={};u(y,c,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(F([])));k&&k!==e&&i.call(k,c)&&(y=k);var P=w.prototype=b.prototype=Object.create(y);function N(a){["next","throw","return"].forEach((function(t){u(a,t,(function(a){return this._invoke(t,a)}))}))}function R(a,t){function e(r,s,n,c){var d=f(a[r],a,s);if("throw"!==d.type){var l=d.arg,u=l.value;return u&&"object"==o(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(a){e("next",a,n,c)}),(function(a){e("throw",a,n,c)})):t.resolve(u).then((function(a){l.value=a,n(l)}),(function(a){return e("throw",a,n,c)}))}c(d.arg)}var r;s(this,"_invoke",{value:function(a,o){function i(){return new t((function(t,r){e(a,o,t,r)}))}return r=r?r.then(i,i):i()}})}function D(t,e,o){var r=v;return function(i,s){if(r===_)throw Error("Generator is already running");if(r===g){if("throw"===i)throw s;return{value:a,done:!0}}for(o.method=i,o.arg=s;;){var n=o.delegate;if(n){var c=S(n,o);if(c){if(c===h)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===v)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=_;var d=f(t,e,o);if("normal"===d.type){if(r=o.done?g:m,d.arg===h)continue;return{value:d.arg,done:o.done}}"throw"===d.type&&(r=g,o.method="throw",o.arg=d.arg)}}}function S(t,e){var o=e.method,r=t.iterator[o];if(r===a)return e.delegate=null,"throw"===o&&t.iterator.return&&(e.method="return",e.arg=a,S(t,e),"throw"===e.method)||"return"!==o&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),h;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var s=i.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=a),e.delegate=null,h):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function A(a){var t={tryLoc:a[0]};1 in a&&(t.catchLoc=a[1]),2 in a&&(t.finallyLoc=a[2],t.afterLoc=a[3]),this.tryEntries.push(t)}function $(a){var t=a.completion||{};t.type="normal",delete t.arg,a.completion=t}function M(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(A,this),this.reset(!0)}function F(t){if(t||""===t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=a,e.done=!0,e};return s.next=s}}throw new TypeError(o(t)+" is not iterable")}return C.prototype=w,s(P,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:C,configurable:!0}),C.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(a){var t="function"==typeof a&&a.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,w):(a.__proto__=w,u(a,l,"GeneratorFunction")),a.prototype=Object.create(P),a},t.awrap=function(a){return{__await:a}},N(R.prototype),u(R.prototype,d,(function(){return this})),t.AsyncIterator=R,t.async=function(a,e,o,r,i){void 0===i&&(i=Promise);var s=new R(p(a,e,o,r),i);return t.isGeneratorFunction(e)?s:s.next().then((function(a){return a.done?a.value:s.next()}))},N(P),u(P,l,"Generator"),u(P,c,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(a){var t=Object(a),e=[];for(var o in t)e.push(o);return e.reverse(),function a(){for(;e.length;){var o=e.pop();if(o in t)return a.value=o,a.done=!1,a}return a.done=!0,a}},t.values=F,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach($),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(o,r){return n.type="throw",n.arg=t,e.next=o,r&&(e.method="next",e.arg=a),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],n=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),d=i.call(s,"finallyLoc");if(c&&d){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(a,t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===a||"continue"===a)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=a,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,h):this.complete(s)},complete:function(a,t){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&t&&(this.next=t),h},finish:function(a){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===a)return this.complete(e.completion,e.afterLoc),$(e),h}},catch:function(a){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===a){var o=e.completion;if("throw"===o.type){var r=o.arg;$(e)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:F(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=a),h}},t}function i(a,t,e,o,r,i,s){try{var n=a[i](s),c=n.value}catch(a){return void e(a)}n.done?t(c):Promise.resolve(c).then(o,r)}var s=e(14941).call(void 0);const n={data:function(){return{modal:0,modal_cargar:0,tituloModal:"",isDatosLoading:!1,tipoAccion:0,isLoading:!1,reten:0,id_factura:0,partidas:{id:"",productos_servicios_id:"",unidad_id:"",cantidad:"",unidad:"",numero_identificacion:"",descripcion:"",comentario:"",valor_unitario:"",importe:"",descuento:"0",impuesto_iva:"",factura_id:"",retencion:0,obj_imp:"01"},archivo:null,ProductoServicio:[],list_produc_serv:[],Unidad:[],datos:null,tableData:[],columns:["id","scps_descripcion","scu_nombre","cantidad","unidad","numero_identificacion","descripcion","valor_unitario","importe","descuento"],options:{headings:{id:"Acciones",scps_descripcion:"Productos/Servicios",scu_nombre:"Clave unidad"},perPage:20,perPageValues:[],skin:s.skin,sortIcon:s.sortIcon,filterByColumn:!0,texts:s.texts,requestAdapter:function(a){var t=[];return t.push({"SCPS.descripcion":a.query.scps_descripcion,"SCU.nombre":a.query.scu_nombre,"partidas_factura.cantidad":a.query.cantidad,"partidas_factura.unidad":a.query.unidad,"partidas_factura.numero_identificacion":a.query.numero_identificacion,"partidas_factura.descripcion":a.query.descripcion,"partidas_factura.comentario":a.query.comentario,"partidas_factura.valor_unitario":a.query.valor_unitario,"partidas_factura.importe":a.query.importe,"partidas_factura.descuento":a.query.descuento}),a.query=t[0],a}}}},methods:{getData:function(a){var t=this;this.$refs.Tablac.refresh(),this.datos=a,this.partidas.factura_id=a.id,this.id_factura=a.id,axios.get("/satcatunidades").then((function(a){t.Unidad=a.data})).catch((function(a){console.error(a)}))},ObtenerProductosServicios:function(){var a=this;this.isDatosLoading=!0,axios.get("/satcatprodser1").then((function(t){t.data.status?a.list_produc_serv=t.data.productoServicio:toastr.error(res.data.mensaje),a.isDatosLoading=!1}))},abrirModal:function(a,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.ObtenerProductosServicios(),"partidas"===a)switch(t){case"registrar":this.modal=1,this.tituloModal="Registrar conceptos",this.tipoAccion=1,this.vaciar(),"XEXX010101000"==this.datos.rfc_receptor?this.partidas.impuesto_iva="0.000000":this.partidas.impuesto_iva="0.160000";break;case"actualizar":this.vaciar(),this.modal=1,this.tituloModal="Actualizar conceptos",this.tipoAccion=2,this.partidas.id=e.id,this.partidas.productos_servicios_id={id:e.productos_servicios_id,name:e.scps_clave+" "+e.scps_descripcion},this.partidas.unidad_id=e.unidad_id,this.partidas.cantidad=e.cantidad,this.partidas.unidad=e.unidad,this.partidas.numero_identificacion=e.numero_identificacion,this.partidas.descripcion=e.descripcion,this.partidas.comentario=e.comentario,this.partidas.valor_unitario=e.valor_unitario,this.partidas.importe=e.importe,this.partidas.descuento=e.descuento,"XEXX010101000"==this.datos.rfc_receptor?this.partidas.impuesto_iva="0.000000":this.partidas.impuesto_iva="0.160000",this.partidas.factura_id=e.factura_id,this.partidas.retencion=e.retencion,this.partidas.obj_imp=e.obj_imp;break;case"cargar":this.modal_cargar=1}},maestro:function(){this.$emit("maestro:conceptos")},cerrarModal:function(){this.modal=0},cerrarModalCargar:function(){this.modal_cargar=0},multiplicar:function(){this.partidas.importe=this.partidas.cantidad*this.partidas.valor_unitario},MultiplicarPorcentaje:function(){if(""!=this.partidas.cantidad&&""!=this.partidas.valor_unitario){var a=this.partidas.descuento_porcentaje,t=this.partidas.cantidad*this.partidas.valor_unitario;this.partidas.descuento=t*a/100}},vaciar:function(){this.partidas.productos_servicios_id="",this.partidas.unidad_id="",this.partidas.cantidad="",this.partidas.unidad="",this.partidas.numero_identificacion="",this.partidas.descripcion="",this.partidas.comentario="",this.partidas.valor_unitario="",this.partidas.importe="",this.partidas.retencion=""},eliminar:function(a){var t=this;axios.delete("/partidafactura/"+a.id).then((function(a){toastr.info("Registro eliminado correctamente","Atención"),t.$refs.Tablac.refresh()})).catch((function(a){console.error(a)}))},guardar:function(a){var t=this;this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var o=t;axios({method:a?"POST":"PUT",url:a?"/partidafactura":"/partidafactura/"+t.partidas.id,data:{productos_servicios_id:t.partidas.productos_servicios_id.id,unidad_id:t.partidas.unidad_id,cantidad:t.partidas.cantidad,unidad:t.partidas.unidad,numero_identificacion:t.partidas.numero_identificacion,descripcion:t.partidas.descripcion,comentario:t.partidas.comentario,valor_unitario:t.partidas.valor_unitario,importe:t.partidas.importe,descuento:t.partidas.descuento,impuesto_iva:t.partidas.impuesto_iva,factura_id:t.partidas.factura_id,retencion:t.partidas.retencion,obj_imp:t.partidas.obj_imp}}).then((function(t){o.isLoading=!1,o.cerrarModal(),toastr.success(a?"Concepto agregada correctamente":"Concepto actualizada correctamente","Correcto"),o.$refs.Tablac.refresh()})).catch((function(a){console.log(a)}))}}))},retencion:function(a){1==a.target.checked?this.reten=1:this.reten=0},getArchivo:function(a){this.archivo=a.target.files[0]},update:function(){var a=this,t=new FormData;t.append("import_file",this.archivo),t.append("id",this.partidas.factura_id),t.append("_method","PUT"),axios.post("/partidasfacturasexcel/upload",t).then((function(t){a.archivo=null,200==t.status?(swal("agregado","correcto!!!"),$("#archivo").val(""),a.cerrarModalCargar(),a.$refs.Tablac.refresh()):swal("Articulos","Ocurrio un error.","error")})).catch((function(a){this.archivo=null,console.log(a),swal("Articulos","Ocurrio un error al leer el archivo.","error")}))},modalObservaciones:function(a){var t,e=this;return(t=r().mark((function t(){var o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Swal.fire({title:"Observaciones",input:"textarea"});case 2:if(null!=(o=t.sent).value){t.next=5;break}return t.abrupt("return");case 5:if(!(o.value.length<5)){t.next=7;break}return t.abrupt("return");case 7:e.isObtener_loading=!0,axios.post("facturacion/partidas/observaciones",{id:a.id,observaciones:o.value}).then((function(a){a.data.status?(toastr.success("Actualizado correctamente"),e.$refs.Tablac.refresh()):toastr.error(a.data.mensaje)}));case 9:case"end":return t.stop()}}),t)})),function(){var a=this,e=arguments;return new Promise((function(o,r){var s=t.apply(a,e);function n(a){i(s,o,r,n,c,"next",a)}function c(a){i(s,o,r,n,c,"throw",a)}n(void 0)}))})()}}};const c=(0,e(14486).A)(n,(function(){var a=this,t=a._self._c;return t("div",[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),a._v(" Conceptos de la factura "+a._s(null==a.datos?"":a.datos.serie+" "+a.datos.folio)+"\n            "),t("button",{staticClass:"btn btn-secondary float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.maestro()}}},[t("i",{staticClass:"fas fa-arrow-left"}),a._v(" Atras\n            ")]),a._v(" "),t("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.abrirModal("partidas","registrar")}}},[t("i",{staticClass:"fas fa-plus"},[a._v(" ")]),a._v("Nuevo\n            ")]),a._v(" "),t("button",{staticClass:"btn btn-success float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.abrirModal("partidas","cargar")}}},[t("i",{staticClass:"fa fa-file-excel-o"},[a._v(" ")]),a._v("Cargar\n            ")])]),a._v(" "),t("div",{staticClass:"card-body"},[t("v-server-table",{ref:"Tablac",attrs:{url:"partidafactura/"+a.id_factura,columns:a.columns,options:a.options},scopedSlots:a._u([{key:"id",fn:function(e){return[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[t("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[t("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-grip-horizontal"}),a._v(" Acciones\n                            ")]),a._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[t("button",{staticClass:"dropdown-item",attrs:{type:"button",disabled:1==a.datos.timbrado},on:{click:function(t){return a.abrirModal("partidas","actualizar",e.row)}}},[t("i",{staticClass:"icon-pencil"}),a._v("  Actualizar Concepto\n                                ")]),a._v(" "),t("button",{staticClass:"dropdown-item",attrs:{type:"button",disabled:1==a.datos.timbrado},on:{click:function(t){return a.eliminar(e.row)}}},[t("i",{staticClass:"fas fa-list-ol"}),a._v("  Eliminar\n                                ")]),a._v(" "),t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.modalObservaciones(e.row)}}},[t("i",{staticClass:"fas fa-eye"}),a._v("Observaciones\n                                ")])])])])]}},{key:"descripcion",fn:function(e){return[a._v("\n                    "+a._s(e.row.descripcion)+"\n                    "),e.row.observaciones?t("span",[a._v("\n                        - "+a._s(e.row.observaciones)+"\n                    ")]):a._e()]}}])})],1)]),a._v(" "),t("div",{staticClass:"modal fade",class:{mostrar:a.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",domProps:{textContent:a._s(a.tituloModal)}}),a._v(" "),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return a.cerrarModal()}}},[t("span",{attrs:{"aria-hidden":"true"}},[a._v("×")])])]),a._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-8"},[t("label",[a._v("Producto y servicios")]),a._v(" "),t("vue-element-loading",{attrs:{active:a.isDatosLoading}}),a._v(" "),t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{options:a.list_produc_serv,id:"productos servicios",name:"productos servicios",label:"nombre","data-vv-name":"productos servicios"},model:{value:a.partidas.productos_servicios_id,callback:function(t){a.$set(a.partidas,"productos_servicios_id",t)},expression:"partidas.productos_servicios_id"}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("productos servicios")))])],1),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Clave unidad")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.partidas.unidad_id,expression:"partidas.unidad_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{"data-vv-name":"clave unidad"},on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.partidas,"unidad_id",t.target.multiple?e:e[0])}}},a._l(a.Unidad,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_unidad)+" "+a._s(e.nombre))])})),0),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("clave unidad")))])])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Cantidad ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas.cantidad,expression:"partidas.cantidad"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Cantidad","data-vv-name":"cantidad"},domProps:{value:a.partidas.cantidad},on:{input:[function(t){t.target.composing||a.$set(a.partidas,"cantidad",t.target.value)},function(t){return a.multiplicar()}]}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("cantidad")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Unidad ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas.unidad,expression:"partidas.unidad"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Unidad","data-vv-name":"unidad"},domProps:{value:a.partidas.unidad},on:{input:function(t){t.target.composing||a.$set(a.partidas,"unidad",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("unidad")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Número de identificación ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas.numero_identificacion,expression:"partidas.numero_identificacion"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Número de identificación","data-vv-name":"numero de identificacion"},domProps:{value:a.partidas.numero_identificacion},on:{input:function(t){t.target.composing||a.$set(a.partidas,"numero_identificacion",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("numero de identificacion")))])])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-12"},[t("label",[a._v("Descripción")]),a._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.partidas.descripcion,expression:"partidas.descripcion"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{rows:"4",cols:"50",placeholder:"Descripción","data-vv-name":"descripcion",maxlength:"1000"},domProps:{value:a.partidas.descripcion},on:{input:function(t){t.target.composing||a.$set(a.partidas,"descripcion",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("descripcion")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-12"},[t("label",[a._v("Comentario")]),a._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.partidas.comentario,expression:"partidas.comentario"}],staticClass:"form-control",attrs:{rows:"4",cols:"50",placeholder:"Comentario","data-vv-name":"comentario"},domProps:{value:a.partidas.comentario},on:{input:function(t){t.target.composing||a.$set(a.partidas,"comentario",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("comentario")))])]),a._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"ml-2 col-md-4 form-control-label",attrs:{for:"nombre"}},[a._v("Objeto de impuesto")]),a._v(" "),t("div",{staticClass:"col-md-7"},[t("select",{directives:[{name:"model",rawName:"v-model",value:a.partidas.obj_imp,expression:"partidas.obj_imp"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.partidas,"obj_imp",t.target.multiple?e:e[0])}}},[t("option",{attrs:{value:"01"}},[a._v("01 - No objeto de impuesto")]),a._v(" "),t("option",{attrs:{value:"02"}},[a._v("02 - Sí objeto de impuesto")]),a._v(" "),t("option",{attrs:{value:"03"}},[a._v("03 - Sí objeto del impuesto y no obligado al desglose")])])])])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-2"},[t("label",[a._v("Valor Unitario")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas.valor_unitario,expression:"partidas.valor_unitario"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Valor unitario","data-vv-name":"valor unitario"},domProps:{value:a.partidas.valor_unitario},on:{input:[function(t){t.target.composing||a.$set(a.partidas,"valor_unitario",t.target.value)},function(t){return a.multiplicar()}]}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("valor unitario")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Importe")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas.importe,expression:"partidas.importe"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Importe",readonly:""},domProps:{value:a.partidas.importe},on:{input:function(t){t.target.composing||a.$set(a.partidas,"importe",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Descuento (Cantidad)")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas.descuento,expression:"partidas.descuento"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Descuento","data-vv-name":"descuento"},domProps:{value:a.partidas.descuento},on:{input:[function(t){t.target.composing||a.$set(a.partidas,"descuento",t.target.value)},function(t){return a.multiplicar()}]}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("descuento")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("label",[a._v("Descuento (%)")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas.descuento_porcentaje,expression:"partidas.descuento_porcentaje"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Descuento","data-vv-name":"descuento"},domProps:{value:a.partidas.descuento_porcentaje},on:{input:[function(t){t.target.composing||a.$set(a.partidas,"descuento_porcentaje",t.target.value)},function(t){return a.MultiplicarPorcentaje()}]}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("descuento")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("label",[a._v("Iva")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas.impuesto_iva,expression:"partidas.impuesto_iva"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Iva","data-vv-name":"iva"},domProps:{value:a.partidas.impuesto_iva},on:{input:function(t){t.target.composing||a.$set(a.partidas,"impuesto_iva",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("descuento")))])])]),a._v(" "),t("div",{staticClass:"form-row"},[a._m(0),a._v(" "),t("div",{staticClass:"form-group col-md-1"},[a._v("\n                     \n                "),t("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"observa"},on:{change:function(t){return a.retencion(t)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas.retencion,expression:"partidas.retencion"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Retencion",disabled:0==a.reten},domProps:{value:a.partidas.retencion},on:{input:function(t){t.target.composing||a.$set(a.partidas,"retencion",t.target.value)}}})])])]),a._v(" "),t("div",{staticClass:"modal-footer"},[t("vue-element-loading",{attrs:{active:a.isLoading}}),a._v(" "),t("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(t){return a.cerrarModal()}}},[t("i",{staticClass:"fas fa-times"}),a._v(" Cerrar")]),a._v(" "),1==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardar(1)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Guardar")]):a._e(),a._v(" "),2==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardar(0)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Actualizar")]):a._e()],1)])])]),a._v(" "),t("div",{staticClass:"modal fade",class:{mostrar:a.modal_cargar},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[a._v("Cargar archivo Excel")]),a._v(" "),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return a.cerrarModalCargar()}}},[t("span",{attrs:{"aria-hidden":"true"}},[a._v("×")])])]),a._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v(" Subir --")]),a._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"ext:xls,xlsx",expression:"'ext:xls,xlsx'"}],staticClass:"form-control",attrs:{type:"file","data-vv-as":"Archivo",name:"import_file_emp",accept:"*/*",id:"archivo"},on:{change:a.getArchivo}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("import_file_emp")))])])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("button",{staticClass:"btn btn-primary",on:{click:a.update}},[a._v("Subir Archivo")])])])]),a._v(" "),t("div",{staticClass:"modal-footer"})])])])])}),[function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-2"},[a("label",[this._v("Retencion")])])}],!1,null,null,null).exports},89726:(a,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>i});e(60173);var o=e(14941).call(void 0);const r={data:function(){return{verc:!1,modal:0,modaluno:0,tituloModal:"",tituloModalUno:"",tipoAccion:0,tipoAccionUno:0,isLoading:!1,anterior:!1,existente:!1,optionsvsu:[],validadouno:"",abc:"",partidas:{id:"",productos_servicios_id:"",unidad_id:"",cantidad:"",unidad:"",numero_identificacion:"",descripcion:"",valor_unitario:"",importe:"",descuento:"0",impuesto_iva:"",factura_id:""},partidas_pagos:{id:"",factura_id:"",saldo_anterior:"",importe_pagado:"",saldo_insoluto:"",partidas_facturas_id:"",uuid:"",serie:"",folio:"",num_parcialidad:"1",tipo_cambio_dr:0,metodo_pago_dr:1,total_usd:0,importe_pagado_mx:0,obj_imp:"02"},pago_dolares:!1,list_metodos_pago:[],ProductoServicio:[],datos:null,tableData:[],columns:["id","scps_descripcion","scu_nombre","cantidad","unidad","numero_identificacion","descripcion","valor_unitario","importe","descuento"],options:{headings:{id:"Acciones",scps_descripcion:"Productos/Servicios",scu_nombre:"Clave unidad"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,texts:o.texts},tableDataUno:[],columnsUno:["id","uuid","serie","folio","saldo_anterior","importe_pagado","saldo_insoluto"],optionsUno:{headings:{id:"Acciones"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,texts:o.texts}}},computed:{saldos:function(){var a;return a=this.partidas_pagos.saldo_anterior-this.partidas_pagos.importe_pagado,this.partidas_pagos.saldo_insoluto=a}},methods:{getData:function(a){var t=this;this.datos=a,this.partidas.factura_id=a.id,axios.get("/partidafactura/"+a.id+"?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(a){t.tableData=a.data})).catch((function(a){console.error(a)})),axios.get("/partidafacturapagos/"+a.id).then((function(a){t.tableDataUno=a.data})).catch((function(a){console.error(a)})),axios.get("/factura").then((function(a){if(0!=a.data.length)for(var e=0;e<a.data.length;e++)"1"==a.data[e].timbrado&&(t.optionsvsu.push({id:a.data[e].id,name:a.data[e].serie+" "+a.data[e].folio+" "+a.data[e].uuid}),t.contador+=1)})).catch((function(a){console.error(a)}))},abrirModal:function(a,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.ObtenerMetodosPago(),"partidas"===a)switch(t){case"registrar":this.modal=1,this.tituloModal="Registrar conceptos",this.tipoAccion=1,this.vaciar(),"XEXX010101000"==this.datos.rfc_receptor?this.partidas.impuesto_iva="0.000000":this.partidas.impuesto_iva="0.160000";break;case"registrar_pagos":this.vaciar(),this.modaluno=1,this.tituloModalUno="Registrar pago",this.tipoAccionUno=1;break;case"actualizar":this.vaciar(),this.modaluno=1,this.tituloModalUno="Actualizar pagos",this.tipoAccionUno=2,null==e.factura_id?$("#anterior").prop("checked",!0):$("#existente").prop("checked",!0),this.estado(),this.abc=e,this.partidas_pagos.id=e.id,this.partidas_pagos.saldo_anterior=e.saldo_anterior,this.partidas_pagos.importe_pagado=e.importe_pagado,this.partidas_pagos.saldo_insoluto=e.saldo_insoluto,this.partidas_pagos.num_parcialidad=e.num_parcialidad,this.partidas_pagos.serie=e.serie,this.partidas_pagos.folio=e.folio,this.partidas_pagos.uuid=e.uuid,this.partidas_pagos.total_usd=e.total_usd,this.partidas_pagos.tipo_cambio_dr=e.tipo_cambio_dr,this.partidas_pagos.importe_pagado_mx=e.importe_pagado_mx,this.partidas_pagos.metodo_pago_dr=e.metodo_pago_dr,this.pago_dolares=e.pago_dolares,this.partidas_pagos.obj_imp=e.obj_imp,this.partidas_pagos.factura_id=null==e.factura_id?"":{id:e.factura_id,name:e.serie+" "+e.folio+" "+e.uuid},this.partidas_pagos.partidas_facturas_id=e.partidas_facturas_id}},maestro:function(){this.$emit("maestro:conceptospagos")},cerrarModal:function(){this.modal=0},cerrarModalUno:function(){this.modaluno=0,this.vaciar()},multiplicar:function(){this.partidas.importe=this.partidas.cantidad*this.partidas.valor_unitario},CalcularTotalDLS:function(a){var t=(a.target.value/this.partidas_pagos.tipo_cambio_dr).toFixed(2);isNaN(t)&&(t=0),this.partidas_pagos.importe_pagado_mx=t},CalcularTotalTC:function(a){var t=a.target.value,e=(this.partidas_pagos.total_usd/t).toFixed(2);isNaN(e)&&(e=0),this.partidas_pagos.importe_pagado_mx=e},ObtenerMetodosPago:function(){var a=this;axios.get("/satcatmetodopago?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.list_metodos_pago=t.data.data}))},vaciar:function(){this.partidas_pagos.uuid="",this.partidas_pagos.serie="",this.partidas_pagos.folio="",this.partidas_pagos.saldo_anterior="",this.partidas_pagos.importe_pagado="",this.partidas_pagos.saldo_insoluto="",this.partidas_pagos.factura_id="",this.partidas_pagos.obj_imp="02"},eliminar:function(a){var t=this;axios.delete("/partidafacturapagos/"+a.id+"&"+a.partidas_facturas_id).then((function(a){toastr.info("Registro eliminado correctamente","Atención"),t.getData(t.datos),console.log(a)})).catch((function(a){console.error(a)}))},guardar:function(a){var t=this;this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var o=t;axios({method:a?"POST":"PUT",url:a?"/partidafactura":"/partidafactura/"+t.partidas.id,data:{productos_servicios_id:t.partidas.productos_servicios_id.id,unidad_id:t.partidas.unidad_id,cantidad:t.partidas.cantidad,unidad:t.partidas.unidad,numero_identificacion:t.partidas.numero_identificacion,descripcion:t.partidas.descripcion,valor_unitario:t.partidas.valor_unitario,importe:t.partidas.importe,descuento:t.partidas.descuento,impuesto_iva:t.partidas.impuesto_iva,factura_id:t.partidas.factura_id}}).then((function(t){o.isLoading=!1,o.cerrarModal(),toastr.success(a?"Concepto agregada correctamente":"Concepto actualizada correctamente","Correcto"),o.getData(t.data)})).catch((function(a){console.log(a)}))}}))},guardarUno:function(a){var t=this;"1"==this.validadouno&&this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var o=t,r=new FormData;t.pago_dolares&&(r.append("total_usd",t.partidas_pagos.total_usd),r.append("tipo_cambio_dr",t.partidas_pagos.tipo_cambio_dr),r.append("metodo_pago_dr",t.partidas_pagos.metodo_pago_dr),r.append("importe_pagado_mx",t.partidas_pagos.importe_pagado_mx),r.append("pago_dolares",t.pago_dolares?1:0)),r.append("factura_id",""===t.partidas_pagos.factura_id?"":t.partidas_pagos.factura_id.id),r.append("num_parcialidad",t.partidas_pagos.num_parcialidad),r.append("saldo_anterior",t.partidas_pagos.saldo_anterior),r.append("importe_pagado",t.partidas_pagos.importe_pagado),r.append("saldo_insoluto",t.partidas_pagos.saldo_insoluto),r.append("uuid",t.partidas_pagos.uuid),r.append("serie",t.partidas_pagos.serie),r.append("folio",t.partidas_pagos.folio),r.append("obj_imp",t.partidas_pagos.obj_imp),r.append("partidas_facturas_id",t.tableData.data[0].id),axios.post("/partidafacturapagos",r).then((function(e){t.partidas_pagos.total_usd=0,t.partidas_pagos.metodo_pago_dr=0,o.isLoading=!1,o.cerrarModalUno(),toastr.success(a?"Concepto agregada correctamente":"Concepto actualizada correctamente","Correcto"),o.getData(e.data)})).catch((function(a){console.log(a)}))}}))},estado:function(){$("#anterior").prop("checked")?(this.anterior=!0,this.existente=!1,this.partidas_pagos.factura_id="",this.partidas_pagos.serie="",this.partidas_pagos.folio=""):(this.existente=!0,this.anterior=!1,this.partidas_pagos.serie="",this.partidas_pagos.folio="")},verfactura:function(){var a=this;axios.get("/factura/"+(""==this.partidas_pagos.factura_id?0:this.partidas_pagos.factura_id.id)).then((function(t){a.partidas_pagos.serie=t.data.serie,a.partidas_pagos.folio=t.data.folio,a.partidas_pagos.uuid=t.data.uuid,a.partidas_pagos.saldo_anterior=t.data.total})).catch((function(a){console.log(a)}))},validaMonto:function(){parseFloat(this.partidas_pagos.importe_pagado)>parseFloat(this.partidas_pagos.saldo_anterior)&&(toastr.warning("No se puede pagar una cantidad mayor a el saldo anterior","Error"),this.partidas_pagos.importe_pagado="")},validaUno:function(){var a=0,t=this.partidas_pagos.serie,e=this.partidas_pagos.folio,o=this.partidas_pagos.uuid,r=this.partidas_pagos.saldo_anterior,i=this.partidas_pagos.importe_pagado,s=this.partidas_pagos.saldo_insoluto,n=this.partidas_pagos.num_parcialidad;""===t||""===e||""===o||""===r||""===i||""===s||""===n?(a=0,toastr.warning("Complete todos los campos","Atención")):a=1,this.validadouno=a}}};const i=(0,e(14486).A)(r,(function(){var a=this,t=a._self._c;return t("div",[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),a._v(" Conceptos de la factura "+a._s(null==a.datos?"":a.datos.serie+" "+a.datos.folio)+"\n      "),t("button",{staticClass:"btn btn-secondary float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.maestro()}}},[t("i",{staticClass:"fas fa-arrow-left"}),a._v(" Atras\n      ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:null==a.datos?"":4==a.datos.tipo_factura_id,expression:"datos == null ? '' :datos.tipo_factura_id == 4"}],staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.abrirModal("partidas","registrar_pagos")}}},[t("i",{staticClass:"fas fa-plus"},[a._v(" ")]),a._v("Nuevo\n      ")])]),a._v(" "),t("div",{staticClass:"card-body"},[t("v-client-table",{attrs:{data:a.tableDataUno,columns:a.columnsUno,options:a.optionsUno},scopedSlots:a._u([{key:"id",fn:function(e){return[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[t("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[t("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-grip-horizontal"}),a._v(" Acciones\n              ")]),a._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[t("button",{staticClass:"dropdown-item",attrs:{type:"button",disabled:1==a.datos.timbrado},on:{click:function(t){return a.abrirModal("partidas","actualizar",e.row)}}},[t("i",{staticClass:"icon-pencil"}),a._v("  Ver Concepto\n                ")]),a._v(" "),t("button",{staticClass:"dropdown-item",attrs:{type:"button",disabled:1==a.datos.timbrado},on:{click:function(t){return a.eliminar(e.row)}}},[t("i",{staticClass:"fas fa-list-ol"}),a._v("  Eliminar\n                ")])])])])]}}])})],1)]),a._v(" "),t("div",{staticClass:"modal fade",class:{mostrar:a.modaluno},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",domProps:{textContent:a._s(a.tituloModalUno)}}),a._v(" "),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return a.cerrarModalUno()}}},[t("span",{attrs:{"aria-hidden":"true"}},[a._v("x")])])]),a._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-2"},[t("label",{staticClass:"form-check-label"},[t("input",{staticClass:"form-check-input",attrs:{name:"exampleRadios",id:"anterior",type:"radio"},on:{change:a.estado}}),a._v(" Anterior\n              ")])]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("label",{staticClass:"form-check-label"},[t("input",{staticClass:"form-check-input",attrs:{name:"exampleRadios",id:"existente",type:"radio"},on:{change:a.estado}}),a._v(" Existente\n              ")])])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.verc,expression:"verc"}]},[a._v("\n            "+a._s(a.saldos)+"\n          ")]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{directives:[{name:"show",rawName:"v-show",value:a.anterior,expression:"anterior"}],staticClass:"form-group col-md-7"},[t("label",[a._v("UUID")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas_pagos.uuid,expression:"partidas_pagos.uuid"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.partidas_pagos.uuid},on:{input:function(t){t.target.composing||a.$set(a.partidas_pagos,"uuid",t.target.value)}}})]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.existente,expression:"existente"}],staticClass:"form-group col-md-7"},[t("label",[a._v("UUID")]),a._v(" "),t("v-select",{attrs:{options:a.optionsvsu,id:"relaccionados",name:"relaccionados",label:"name","data-vv-name":"relacionados"},on:{input:a.verfactura},model:{value:a.partidas_pagos.factura_id,callback:function(t){a.$set(a.partidas_pagos,"factura_id",t)},expression:"partidas_pagos.factura_id"}})],1),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("label",[a._v("Serie")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas_pagos.serie,expression:"partidas_pagos.serie"}],staticClass:"form-control",attrs:{type:"text",disabled:a.existente},domProps:{value:a.partidas_pagos.serie},on:{input:function(t){t.target.composing||a.$set(a.partidas_pagos,"serie",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("label",[a._v("Folio")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas_pagos.folio,expression:"partidas_pagos.folio"}],staticClass:"form-control",attrs:{type:"text",disabled:a.existente},domProps:{value:a.partidas_pagos.folio},on:{input:function(t){t.target.composing||a.$set(a.partidas_pagos,"folio",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.pago_dolares,expression:"pago_dolares"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.pago_dolares)?a._i(a.pago_dolares,null)>-1:a.pago_dolares},on:{change:function(t){var e=a.pago_dolares,o=t.target,r=!!o.checked;if(Array.isArray(e)){var i=a._i(e,null);o.checked?i<0&&(a.pago_dolares=e.concat([null])):i>-1&&(a.pago_dolares=e.slice(0,i).concat(e.slice(i+1)))}else a.pago_dolares=r}}}),a._v("  Pago en USD \n          ")]),a._v(" "),t("br"),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.pago_dolares,expression:"pago_dolares"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-2"},[t("label",[a._v("Total USD")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas_pagos.total_usd,expression:"partidas_pagos.total_usd"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.partidas_pagos.total_usd},on:{input:[function(t){t.target.composing||a.$set(a.partidas_pagos,"total_usd",t.target.value)},function(t){return a.CalcularTotalDLS(t)}]}})]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("label",[a._v("Tipo Cambio")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas_pagos.tipo_cambio_dr,expression:"partidas_pagos.tipo_cambio_dr"}],staticClass:"form-control",attrs:{type:"text",placeholder:"0.05"},domProps:{value:a.partidas_pagos.tipo_cambio_dr},on:{input:[function(t){t.target.composing||a.$set(a.partidas_pagos,"tipo_cambio_dr",t.target.value)},function(t){return a.CalcularTotalTC(t)}]}})]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("label",[a._v("Total")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.partidas_pagos.importe_pagado_mx,expression:"partidas_pagos.importe_pagado_mx"}],staticClass:"form-control",attrs:{disabled:"",type:"text",placeholder:"0"},domProps:{value:a.partidas_pagos.importe_pagado_mx},on:{input:function(t){t.target.composing||a.$set(a.partidas_pagos,"importe_pagado_mx",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Metodo de pago")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.partidas_pagos.metodo_pago_dr,expression:"partidas_pagos.metodo_pago_dr"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.partidas_pagos,"metodo_pago_dr",t.target.multiple?e:e[0])}}},a._l(a.list_metodos_pago,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v("\n                      "+a._s(e.c_metodopago)+" "+a._s(e.descripcion)+"\n                    ")])})),0)])]),a._v(" "),t("br"),a._v(" "),t("div",{staticClass:"form row"},[t("label",{staticClass:"col-md-4"},[a._v("Objeto Imp.")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.partidas_pagos.obj_imp,expression:"partidas_pagos.obj_imp"}],staticClass:"form-control col-md-3",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.partidas_pagos,"obj_imp",t.target.multiple?e:e[0])}}},[t("option",{attrs:{value:"01"}},[a._v("01 - No Objeto de Impuesto")]),a._v(" "),t("option",{attrs:{value:"02"}},[a._v("02 - Sí Objeto de Impuesto")]),a._v(" "),t("option",{attrs:{value:"03"}},[a._v("03 - Sí objeto del impuesto y no obligado al desglose")])])]),a._v(" "),t("br"),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-2"},[t("label",[a._v("Parcialidad")]),a._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"integer",expression:"'integer'"},{name:"model",rawName:"v-model",value:a.partidas_pagos.num_parcialidad,expression:"partidas_pagos.num_parcialidad"}],staticClass:"form-control",attrs:{type:"text",name:"numero parcialidad","data-vv-name":"numero parcialidad"},domProps:{value:a.partidas_pagos.num_parcialidad},on:{input:function(t){t.target.composing||a.$set(a.partidas_pagos,"num_parcialidad",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("numero parcialidad")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Saldo anterior")]),a._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal:2",expression:"'decimal:2'"},{name:"model",rawName:"v-model",value:a.partidas_pagos.saldo_anterior,expression:"partidas_pagos.saldo_anterior"}],staticClass:"form-control",attrs:{type:"text",name:"saldo anterior","data-vv-name":"saldo anterior"},domProps:{value:a.partidas_pagos.saldo_anterior},on:{input:function(t){t.target.composing||a.$set(a.partidas_pagos,"saldo_anterior",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("saldo anterior")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Importe pagado")]),a._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal:2",expression:"'decimal:2'"},{name:"model",rawName:"v-model",value:a.partidas_pagos.importe_pagado,expression:"partidas_pagos.importe_pagado"}],staticClass:"form-control",attrs:{type:"text",name:"importe pagado","data-vv-name":"importe pagado"},domProps:{value:a.partidas_pagos.importe_pagado},on:{blur:function(t){return a.validaMonto()},input:function(t){t.target.composing||a.$set(a.partidas_pagos,"importe_pagado",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("importe pagado")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Saldo insoluto")]),a._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal:2",expression:"'decimal:2'"},{name:"model",rawName:"v-model",value:a.partidas_pagos.saldo_insoluto,expression:"partidas_pagos.saldo_insoluto"}],staticClass:"form-control",attrs:{type:"text",name:"saldo insoluto","data-vv-name":"saldo insoluto"},domProps:{value:a.partidas_pagos.saldo_insoluto},on:{input:function(t){t.target.composing||a.$set(a.partidas_pagos,"saldo_insoluto",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("saldo insoluto")))])]),a._v(" "),t("br"),a._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:a.pago_dolares,expression:"pago_dolares"}],staticClass:"text-danger"},[a._v("\n                    El pago se realizará en USD, convertidos a MXN\n              ")])])]),a._v(" "),t("div",{staticClass:"modal-footer"},[t("vue-element-loading",{attrs:{active:a.isLoading}}),a._v(" "),t("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(t){return a.cerrarModalUno()}}},[t("i",{staticClass:"fas fa-times"}),a._v(" Cerrar\n          ")]),a._v(" "),1==a.tipoAccionUno?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){a.validaUno(),a.guardarUno(1)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Guardar\n          ")]):a._e(),a._v(" "),2==a.tipoAccionUno?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){a.validaUno(),a.guardarUno(0)}}},[t("i",{staticClass:"fas fa-save"}),a._v(" Guardar  ")]):a._e()],1)])])])])}),[],!1,null,null,null).exports},14374:(a,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>l});var o=e(60173),r=e(14941).call(void 0);const i={data:function(){return{usuario_texto:"",isLoading:!1,dasabiltarMonedas:!1,desabilitartax:!0,datos_relaccionados:null,array_relacionados:[],modal:0,contador:0,tituloModal:"",tipoAccion:0,detalle:1,list_emisores:"",optionsvsex:[],ante:!1,exis:!1,id_buscar_emisor:0,factura:{id:"",emisor_id:"",tipo_factura_id:"",cliente_id:"",uso_factura:"",fecha_hora:"",codigo_postal:"",moneda_id:"",formapago:"",metodopago:"",tipo_cambio:"",condicion_pago:"",tipo_relacion:"",factura_id:"",uuid:"",taxid:"",clave_ob:"",orden_ob:"",num_operacion:"",ban_ordenante:"",cuenta_ordenante:"",adenda:"",proveeade:"",ante:"",exis:"",uuid_relacionado:"",fecha_pago:"",rfc_cuenta_ordenante:"",rfc_cuenta_beneficiario:""},Clientes:[],cliente:{},UsoFactura:[],Monedas:[],FormaPago:[],MetodoPago:[],TipoFactura:[],TipoRelacion:[],optionsvsps:[],DatosGenerales:{rfc:"",razon_social:"",nombre:"",regimenfiscal:""},Receptor:{rfc:"",nombre:"",contacto:""},tableData:[],columns:["id","serie","folio","rfc_receptor","nombre_razons_receptor","fecha_hora","c_tipofactura","uuid","clave_ob","orden_ob","total","condicion_pago","timbrado"],options:{headings:{id:"Acciones",c_tipofactura:"Efecto",rfc_receptor:"RFC Receptor",nombre_razons_receptor:"Razón social",fecha_hora:"Fecha de emisión",timbrado:"Estado",uuid:"UUID"},perPage:10,perPageValues:[],skin:r.skin,sortIcon:r.sortIcon,filterByColumn:!0,texts:r.texts,listColumns:{timbrado:[{id:0,text:"Nuevo"},{id:1,text:"Timbrado"},{id:2,text:"Cancelado"}]},requestAdapter:function(a){var t=[];return t.push({"c.nombre":a.query.nombre_razons_receptor,"c.rfc":a.query.rfc_receptor,"factura.fecha_hora":a.query.fecha_hora,c_tipofactura:a.query.c_tipofactura,"factura.uuid":a.query.uuid,"factura.total":a.query.total,"factura.timbrado":a.query.timbrado,"factura.clave_ob":a.query.clave_ob,"factura.orden_ob":a.query.orden_ob,"factura.serie":a.query.serie,"factura.folio":a.query.folio}),a.query=t[0],a}}}},components:{conceptos:function(a){return e.e(644).then(function(){return a(e(31920))}.bind(null,e)).catch(e.oe)},conceptospagos:function(a){return e.e(644).then(function(){return a(e(89726))}.bind(null,e)).catch(e.oe)}},methods:{getData:function(){var a=this;axios.get("/datosgenerales?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.list_emisores=t.data.data}))},ObtenerTipoRelacion:function(){var a=this;axios.get("/satcattiporelacion?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.TipoRelacion=t.data.data}))},ObtenerMetodosPago:function(){var a=this;axios.get("/satcatmetodopago?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.MetodoPago=t.data.data}))},ObtenerTipoFactura:function(){var a=this;axios.get("/satcattipofactura?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.TipoFactura=t.data.data}))},ObtenerFormasPago:function(){var a=this;axios.get("/satcatformpago?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.FormaPago=t.data}))},ObtenerMonedas:function(){var a=this;axios.get("/satcatmonedas?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.Monedas=t.data.data}))},ObtenerFacturas:function(){var a=this;axios.get("/catfactura?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){if(0!=t.data.data.length)for(var e=0;e<t.data.data.length;e++)"1"==t.data.data[e].timbrado&&(a.optionsvsex.push({id:t.data.data[e].id,name:t.data.data[e].serie+" "+t.data.data[e].folio+" "+t.data.data[e].uuid}),a.contador+=1)}))},ObtenerClientes:function(){var a=this;axios.get("/clientes").then((function(t){t.data.status?a.Clientes=t.data.clientes:toastr.errror(t.data.mensaje)}))},obtenercfdi:function(){var a=this;axios.get("/satcatusocfdi?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.UsoFactura=t.data.data})).catch((function(a){console.error(a)}))},abrirModal:function(){var a=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.ObtenerClientes(),this.obtenercfdi(),this.ObtenerFacturas(),this.ObtenerMonedas(),this.ObtenerTipoFactura(),this.ObtenerMetodosPago(),this.ObtenerFormasPago(),this.ObtenerTipoRelacion(),t)this.modal=1,this.tituloModal="Registrar factura",this.tipoAccion=1,this.vaciar(),this.verfechahora(),$("#gridRadios1").prop("checked",!0);else{this.vaciar();var o=e.fecha_hora.split(new RegExp(["-",":"," "].join("|"),"g"));if(null!=e.fecha_pago)var r=e.fecha_pago.split(new RegExp(["-",":"," "].join("|"),"g"));this.modal=1,this.tituloModal="Actualizar factura",this.tipoAccion=2,this.factura.id=e.id,this.factura.emisor_id=e.emisor_id,this.factura.tipo_factura_id=e.tipo_factura_id,this.cliente.id=e.cliente_id,this.factura.uso_factura=e.uso_factura,this.factura.fecha_hora=o[0]+"-"+o[1]+"-"+o[2]+"T"+o[3]+":"+o[4],this.factura.codigo_postal=e.codigo_postal,this.factura.moneda_id=e.moneda_id,this.factura.formapago=e.formapago,this.factura.metodopago=e.metodopago,this.factura.tipo_cambio=e.tipo_cambio,this.factura.condicion_pago=e.condicion_pago,this.factura.taxid=e.taxid,this.factura.clave_ob=e.clave_ob,this.factura.orden_ob=e.orden_ob,this.factura.adenda=e.adenda,this.factura.proveeade=e.proveeade,this.factura.num_operacion=e.num_operacion,this.factura.cuenta_ordenante=e.cuenta_ordenante,this.factura.rfc_cuenta_ordenante=e.rfc_cuenta_ordenante,this.factura.rfc_cuenta_beneficiario=e.rfc_cuenta_beneficiario,this.factura.ban_ordenante=e.ban_ordenante,this.factura.tipo_relacion=e.tipo_relacion,this.factura.fecha_pago=null==e.fecha_pago?"":r[0]+"-"+r[1]+"-"+r[2]+"T"+r[3]+":"+r[4],this.factura.factura_id=null==e.factura_id?"":{id:e.factura_id,name:e.serie_relacionado+" "+e.folio_relacionado+" "+e.uuid_relacionado_f},axios.get("get/relacionados/"+e.id).then((function(t){t.data.forEach((function(t,e){a.array_relacionados.push({id:t.id,name:t.uuid})}))})).catch((function(a){console.error(a)})),this.vertipo(),this.vertipouno(),this.llenarDatosCliente()}},verfechahora:function(){var a=new Date;this.factura.fecha_hora=a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-"+(a.getDate()<10?"0"+a.getDate():a.getDate())+"T"+(a.getHours()<10?"0"+a.getHours():a.getHours())+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())},cerrarModal:function(){this.modal=0},vaciar:function(){this.factura.tipo_factura_id="",this.cliente.id="",this.factura.uso_factura="",this.factura.fecha_hora="",this.factura.moneda_id="",this.factura.formapago="",this.factura.metodopago="",this.factura.tipo_cambio="",this.factura.condicion_pago="",this.factura.taxid="",this.factura.factura_id="",this.factura.tipo_relacion="",this.factura.uuid_relacionado="",this.factura.num_operacion="",this.factura.ban_ordenante="",this.factura.cuenta_ordenante="",this.factura.rfc_cuenta_ordenante="",this.factura.rfc_cuenta_beneficiario="",this.factura.fecha_pago="",this.array_relacionados=[],o.A.resetObject(this.Receptor)},tipomoneda:function(){1==this.factura.moneda_id?(this.dasabiltarMonedas=!0,this.factura.tipo_cambio="1"):(this.dasabiltarMonedas=!1,this.factura.tipo_cambio="")},llenarDatosCliente:function(){var a=this;null!=this.cliente&&(console.error(this.Receptor),axios.get("/clientes/"+this.cliente.id).then((function(t){t.data.status?(a.Receptor.rfc=t.data.cliente.rfc,a.Receptor.nombre=t.data.cliente.nombre,a.Receptor.contacto=t.data.cliente.contacto):toastr.error(t.data.mensaje)})))},guardar:function(a){var t=this;this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var o=t;axios({method:a?"POST":"PUT",url:a?"/factura":"/factura/"+t.factura.id,data:{emisor_id:t.factura.emisor_id,tipo_factura_id:t.factura.tipo_factura_id,cliente_id:t.cliente.id,uso_factura:t.factura.uso_factura,fecha_hora:t.factura.fecha_hora,codigo_postal:t.factura.codigo_postal,moneda_id:t.factura.moneda_id,formapago:t.factura.formapago,metodopago:t.factura.metodopago,tipo_cambio:t.factura.tipo_cambio,condicion_pago:t.factura.condicion_pago,taxid:t.factura.taxid,tipo_relacion:t.factura.tipo_relacion,factura_id:""==t.factura.factura_id?"":t.factura.factura_id.id,uuid_relacionado:t.factura.uuid_relacionado,clave_ob:t.factura.clave_ob,orden_ob:t.factura.orden_ob,adenda:t.factura.adenda,proveeade:t.factura.proveeade,num_operacion:t.factura.num_operacion,ban_ordenante:t.factura.ban_ordenante,cuenta_ordenante:t.factura.cuenta_ordenante,rfc_cuenta_ordenante:t.factura.rfc_cuenta_ordenante,rfc_cuenta_beneficiario:t.factura.rfc_cuenta_beneficiario,fecha_pago:t.factura.fecha_pago,relacionados:t.array_relacionados}}).then((function(t){o.isLoading=!1,t.data.status?"error"===t.data.status?(swal({type:"error",html:"Ha ocurrido un error notifiqué al administrador y recarge la página"}),o.cerrarModal()):(o.contador=0,o.cerrarModal(),toastr.success(a?"Factura agregada correctamente":"Factura actualizada correctamente","Correcto"),o.verfacturas(t.data.emisor_id)):swal({type:"error",html:t.data.errors.join("<br>")})})).catch((function(a){console.log(a)}))}}))},agregarI:function(a){this.detalle=2,this.$refs.conceptos.getData(a,this.optionsvsps)},agregarP:function(a){this.detalle=3,this.$refs.conceptospagos.getData(a)},maestro:function(){this.detalle=1},maestrop:function(){this.detalle=1},timbrar:function(a){var t=this;Swal.fire({title:"Esta seguro(a) de timbrar?",text:"Esta opción no se podrá desahacer!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(e){e.value&&(t.isLoading=!0,axios.get("/partidafactura/"+a.id+"?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(e){0==e.data.count?(toastr.warning("No se puede timbrar hasta tener conceptos registrados","Atención"),t.isLoading=!1):axios.get("/sellartimbrarfactura/"+a.id).then((function(a){a.data.status?(t.isLoading=!1,t.contador=0,toastr.success("Factura timbrada correctamente !!!","Correcto"),t.verfacturas(a.data.emisor_id)):(t.isLoading=!1,toastr.warning("Ha occurrido un error !!!","Atención"),swal({type:"error",html:a.data.respuesta}))})).catch((function(a){console.error(a)}))})).catch((function(a){console.error(a)})))}))},timbrarprueba:function(a){var t=this;Swal.fire({title:"Esta seguro(a) de timbrar a prueba?",text:"Esta opción no se podrá desahacer!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(e){e.value&&(t.isLoading=!0,axios.get("/partidafactura/"+a.id+"?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(e){0==e.data.count?(toastr.warning("No se puede timbrar hasta tener conceptos registrados","Atención"),t.isLoading=!1):axios.get("/sellartimbrarfactura/prueba/"+a.id).then((function(a){a.data.status?(t.isLoading=!1,t.contador=0,toastr.success("Factura timbrada correctamente !!!","Correcto"),t.verfacturas(a.data.emisor_id)):(t.isLoading=!1,toastr.warning("Ha occurrido un error !!!","Atención"),swal({type:"error",html:a.data.respuesta}))})).catch((function(a){console.error(a)}))})).catch((function(a){console.error(a)})))}))},descargar:function(a){window.open("/descargarfactura/"+a.archivo,"_blank")},descargarprueba:function(a){window.open("/descargarfactura/prueba/"+a.archivo,"_blank")},descargarprefactura:function(a){window.open("/descargarprefactura/"+a.id,"_blank")},extranjero:function(){var a=this;this.desabilitartax=!1,axios.get("/clientextranjero").then((function(t){a.cliente.id=t.data.id,a.Receptor.rfc=t.data.rfc,a.Receptor.nombre=t.data.nombre,a.Receptor.contacto=t.data.contacto,a.factura.uso_factura=22})).catch((function(a){console.error(a)}))},nacional:function(){this.desabilitartax=!0,this.cliente.id="",this.Receptor.rfc="",this.Receptor.nombre="",this.Receptor.contacto="",this.factura.uso_factura="",this.factura.taxid=""},vertipo:function(){null==this.factura.taxid?($("#gridRadios1").prop("checked",!0),$("#gridRadios2").prop("checked",!1),this.desabilitartax=!0):null!=this.factura.taxid&&($("#gridRadios1").prop("checked",!1),$("#gridRadios2").prop("checked",!0),this.desabilitartax=!1)},vertipouno:function(){""==this.factura.factura_id?($("#gridRadios3").prop("checked",!0),$("#gridRadios4").prop("checked",!1),this.ante=!0,this.exis=!1,this.factura.factura_id=""):""!=this.factura.factura_id&&($("#gridRadios4").prop("checked",!0),$("#gridRadios3").prop("checked",!1),this.ante=!1,this.exis=!0,this.factura.uuid_relacionado="")},observaciones:function(a){1==a.target.checked?($("#clave_ob").prop("disabled",!1),$("#orden_ob").prop("disabled",!1),$("#adenda").prop("disabled",!1),$("#proveeade").prop("disabled",!1)):($("#clave_ob").prop("disabled",!0),$("#orden_ob").prop("disabled",!0),$("#adenda").prop("disabled",!0),$("#proveeade").prop("disabled",!0),this.factura.orden_ob="",this.factura.clave_ob="",this.factura.proveeade="",this.factura.adenda="")},cancelarfactura:function(a){var t=this;Swal.fire({title:"Esta seguro(a) de cancelar?",text:"Esta opción no se podrá desahacer!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(e){e.value&&axios.get("/partidafactura/cancelarfactura/"+a.id).then((function(a){a.data.status?(t.isLoading=!1,toastr.success("Factura cancelada correctamente !!!","Correcto"),t.verfacturas(a.data.emisor_id)):(t.isLoading=!1,toastr.warning("Ha occurrido un error !!!","Atención"),swal({type:"error",html:a.data.respuesta}))})).catch((function(a){console.error(a)}))}))},guardarDG:function(){var a=this;axios.get("/datosgeneral/"+this.factura.emisor_id).then((function(t){a.DatosGenerales.razon_social=t.data.razon_social,a.DatosGenerales.nombre=t.data.nombre,a.DatosGenerales.regimenfiscal=t.data.regimenfiscal,a.factura.codigo_postal=t.data.codigo_postal})).catch((function(a){console.error(error)}))},timbresRestantes:function(){axios.get("/timbresrestantes").then((function(a){Swal.fire("Timbres Restantes","Conserflow :"+a.data.c)})).catch((function(a){console.error(error)}))},verfacturas:function(a){this.usuario_texto=1==a?"CONSERFLOW SA DE CV":"-",this.id_buscar_emisor=a,this.$refs.tabla.refresh()},descargarxml:function(a){axios.get("/descargarfacturareportexml/"+a.archivo).then((function(a){if(a.data.status){var t="data:text/xml;charset=utf-8,"+a.data.factura.xml.replace("\n",""),e=document.createElement("a");e.href=t,e.download=a.data.factura.nombre,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.open("data:text/xml,"+encodeURIComponent(stupidExample))}else alert("Factura no encontrada")}))},descargarxmlprueba:function(a){axios({url:"/descargarfacturareportexml/"+a.archivo+"timp.xml",method:"GET",responseType:"blob"}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=e,o.setAttribute("download",a.archivo+"timp.xml"),document.body.appendChild(o),o.click(),axios.delete("/eliminarfacturareportexml/"+a.archivo+"timp.xml").then((function(a){})).catch((function(a){console.log(a)}))}))},edo:function(){$("#gridRadios3").prop("checked")?(this.ante=!0,this.exis=!1,this.factura.factura_id=""):(this.ante=!1,this.exis=!0,this.factura.uuid_relacionado="")},guardaRelaccion:function(){1==this.ante&&this.array_relacionados.push({id:0,name:this.factura.uuid_relacionado}),1==this.exis&&this.array_relacionados.push({id:0,name:this.factura.factura_id.name}),this.factura.uuid_relacionado="",this.factura.factura_id=""},eliminar_aignacion:function(a,t){if(0==a.id)this.array_relacionados.splice(t,1);else{var e=this,o=a.id;axios.get("relaciones/eliminar/".concat(o)).then((function(a){e.array_relacionados.splice(t,1)})).catch((function(a){console.log(a)}))}},cancelarprueba:function(a){var t=this;axios.get("cancelar/prueba/"+a.id).then((function(a){toastr.success("Cancelado Correctamente!!!"),t.verfacturas(a.data.emisor_id)})).catch((function(a){console.error(a)}))}},mounted:function(){this.getData()}};var s=e(85072),n=e.n(s),c=e(25437),d={insert:"head",singleton:!1};n()(c.A,d);c.A.locals;const l=(0,e(14486).A)(i,(function(){var a=this,t=a._self._c;return t("main",{staticClass:"main"},[t("div",{staticClass:"container-fluid"},[t("br"),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.detalle,expression:"detalle == 1"}],staticClass:"card"},[t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),a._v(" Facturas "+a._s(a.usuario_texto)+"\n                "),t("div",{staticClass:"dropdown float-sm-right"},[t("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropmenub","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",name:"button"}},[a._v("\n                        Emisor\n                    ")]),a._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdown"}},a._l(a.list_emisores,(function(e){return t("div",{key:e.key},[t("button",{staticClass:"dropdown-item",on:{click:function(t){return a.verfacturas(e.id)}}},[a._v(a._s(e.nombre))])])})),0)]),a._v(" "),t("button",{staticClass:"btn btn-light float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.timbresRestantes()}}},[t("i"),a._v("Timbres Restantes\n                ")]),a._v(" "),t("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.abrirModal()}}},[t("i",{staticClass:"fas fa-plus"}),a._v("Nuevo\n                ")])]),a._v(" "),t("div",{staticClass:"card-body"},[t("vue-element-loading",{attrs:{active:a.isLoading}}),a._v(" "),t("v-server-table",{ref:"tabla",attrs:{url:"verfacturauno/"+a.id_buscar_emisor,columns:a.columns,options:a.options},scopedSlots:a._u([{key:"id",fn:function(e){return[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[t("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[t("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-grip-horizontal"}),a._v(" Acciones\n                                ")]),a._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[t("button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.timbrado,expression:"props.row.timbrado == 0"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.abrirModal(!1,e.row)}}},[t("i",{staticClass:"icon-pencil"}),a._v(" Actualizar Factura\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.timbrado&&"Pago"===e.row.descripcion_tipofactura,expression:"props.row.timbrado == 0 && props.row.descripcion_tipofactura === 'Pago'"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.agregarP(e.row)}}},[t("i",{staticClass:"fas fa-list-ol"}),a._v(" Agregar Conceptos\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.timbrado&&("Ingreso"===e.row.descripcion_tipofactura||"Egreso"===e.row.descripcion_tipofactura),expression:"props.row.timbrado == 0 && (props.row.descripcion_tipofactura === 'Ingreso' || props.row.descripcion_tipofactura === 'Egreso')"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.agregarI(e.row)}}},[t("i",{staticClass:"fas fa-list-ol"}),a._v(" Agregar Conceptos\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.timbrado&&("Ingreso"===e.row.descripcion_tipofactura||"Egreso"===e.row.descripcion_tipofactura),expression:"props.row.timbrado == 1 && (props.row.descripcion_tipofactura === 'Ingreso' || props.row.descripcion_tipofactura === 'Egreso')"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.agregarI(e.row)}}},[t("i",{staticClass:"fas fa-list-ol"}),a._v(" Ver detalles\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.timbrado&&"Pago"===e.row.descripcion_tipofactura,expression:"props.row.timbrado == 1 && props.row.descripcion_tipofactura === 'Pago'"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.agregarP(e.row)}}},[t("i",{staticClass:"fas fa-list-ol"}),a._v(" Ver detalles\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.timbrado,expression:"props.row.timbrado == 0 "}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.descargarprefactura(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar prefactura\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.timbrado||9==e.row.timbrado,expression:"props.row.timbrado == 0 || props.row.timbrado == 9"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.timbrar(e.row)}}},[t("i",{staticClass:"fas fa-bell"}),a._v(" Timbrar\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.timbrado,expression:"props.row.timbrado == 0"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.timbrarprueba(e.row)}}},[t("i",{staticClass:"fas fa-bell"}),a._v(" Timbrar Prueba\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:9==e.row.timbrado,expression:"props.row.timbrado == 9"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.descargarprueba(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar Factura Prueba\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:9==e.row.timbrado,expression:"props.row.timbrado == 9"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.descargarxmlprueba(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar XML Prueba\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.timbrado,expression:"props.row.timbrado == 1"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.descargar(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.timbrado,expression:"props.row.timbrado == 1"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.descargarxml(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar XML\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.timbrado,expression:"props.row.timbrado == 1"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.cancelarfactura(e.row)}}},[t("i",{staticClass:"fas fa-close"}),a._v(" Cancelar factura\n                                    ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:9==e.row.timbrado,expression:"props.row.timbrado == 9"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.cancelarprueba(e.row)}}},[t("i",{staticClass:"fas fa-close"}),a._v(" Cancelar Prueba\n                                    ")])])])])]}},{key:"timbrado",fn:function(e){return[0==e.row.timbrado?[t("button",{staticClass:"btn btn-outline-info",attrs:{type:"button"}},[t("i",{staticClass:"fa fa-files-o"}),a._v("Nuevo")])]:a._e(),a._v(" "),1==e.row.timbrado?[t("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"}},[t("i",{staticClass:"fa fa-exclamation-circle"}),a._v("Timbrado")])]:a._e(),a._v(" "),2==e.row.timbrado?[t("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"}},[t("i",{staticClass:"fa fa-window-close"}),a._v("Cancelado")])]:a._e()]}}])})],1)]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:2==a.detalle,expression:"detalle == 2"}]},[t("conceptos",{ref:"conceptos",on:{"maestro:conceptos":function(t){return a.maestro()}}})],1),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:3==a.detalle,expression:"detalle == 3"}]},[t("conceptospagos",{ref:"conceptospagos",on:{"maestro:conceptospagos":function(t){return a.maestrop()}}})],1),a._v(" "),t("div",{staticClass:"modal fade",class:{mostrar:a.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",domProps:{textContent:a._s(a.tituloModal)}}),a._v(" "),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return a.cerrarModal()}}},[t("span",{attrs:{"aria-hidden":"true"}},[a._v("x")])])]),a._v(" "),t("div",{staticClass:"modal-body"},[t("form",[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("RFC Emisor ")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.emisor_id,expression:"factura.emisor_id"}],staticClass:"form-control",on:{click:function(t){return a.guardarDG()},change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"emisor_id",t.target.multiple?e:e[0])}}},a._l(a.list_emisores,(function(e){return t("option",{key:e.id,domProps:{value:e.id}},[a._v(a._s(e.rfc))])})),0)]),a._v(" "),t("div",{staticClass:"form-group col-md-6"},[t("label",[a._v("Nombre comercial ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.DatosGenerales.nombre,expression:"DatosGenerales.nombre"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nombre comercial",readonly:""},domProps:{value:a.DatosGenerales.nombre},on:{input:function(t){t.target.composing||a.$set(a.DatosGenerales,"nombre",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-8"},[t("label",[a._v("Nombre o razon social ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.DatosGenerales.razon_social,expression:"DatosGenerales.razon_social"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nombre o razon social",readonly:""},domProps:{value:a.DatosGenerales.razon_social},on:{input:function(t){t.target.composing||a.$set(a.DatosGenerales,"razon_social",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-8"},[t("label",[a._v("Regimen fiscal")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.DatosGenerales.regimenfiscal,expression:"DatosGenerales.regimenfiscal"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Regimen fiscal",readonly:""},domProps:{value:a.DatosGenerales.regimenfiscal},on:{input:function(t){t.target.composing||a.$set(a.DatosGenerales,"regimenfiscal",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Tipo de factura")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.tipo_factura_id,expression:"factura.tipo_factura_id"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"tipo_factura_id",t.target.multiple?e:e[0])}}},a._l(a.TipoFactura,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_tipofactura)+" "+a._s(e.descripcion))])})),0)])]),a._v(" "),t("hr"),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-7"},[t("label",[a._v("Tipo de relacción")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.tipo_relacion,expression:"factura.tipo_relacion"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"tipo_relacion",t.target.multiple?e:e[0])}}},a._l(a.TipoRelacion,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_tiporelacion)+" "+a._s(e.descripcion))])})),0)])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}],staticClass:"form-row"},[a._m(0),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("div",{staticClass:"form-check"},[t("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"gridRadiosdos",id:"gridRadios3"},on:{change:a.edo}}),a._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"gridRadios3"}},[a._v("\n                                            Anterior\n                                        ")])])]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("div",{staticClass:"form-check"},[t("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"gridRadiosdos",id:"gridRadios4"},on:{change:a.edo}}),a._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"gridRadios4"}},[a._v("\n                                            Existente\n                                        ")])])])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-7"},[t("label",[a._v("UUID")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.uuid_relacionado,expression:"factura.uuid_relacionado"},{name:"show",rawName:"v-show",value:a.ante,expression:"ante"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.factura.uuid_relacionado},on:{input:function(t){t.target.composing||a.$set(a.factura,"uuid_relacionado",t.target.value)}}}),a._v(" "),t("v-select",{directives:[{name:"show",rawName:"v-show",value:a.exis,expression:"exis"}],attrs:{options:a.optionsvsex,id:"relaccionados",name:"relaccionados",label:"name","data-vv-name":"relacionados"},model:{value:a.factura.factura_id,callback:function(t){a.$set(a.factura,"factura_id",t)},expression:"factura.factura_id"}})],1),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("label"),a._v(" "),t("br"),a._v(" "),t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardaRelaccion()}}},[t("i",{staticClass:"fas fa-save"}),a._v("Guardar")])])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}],staticClass:"form-row"},[a._m(1),a._v(" "),a._m(2)]),a._v(" "),a._l(a.array_relacionados,(function(e,o){return t("li",{key:o,staticClass:"list-group-item"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-5"},[t("label",[a._v(a._s(e.name))])]),a._v(" "),t("div",{staticClass:"form-group col-md-1"},[t("a",{on:{click:function(t){return a.eliminar_aignacion(e,o)}}},[t("span",{staticClass:"fas fa-trash",attrs:{"arial-hidden":"true"}})])])])])})),a._v(" "),t("hr",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}]}),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-6"},[t("label",[a._v("Cliente ")]),a._v(" "),t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"cliente",name:"cliente",options:a.Clientes,label:"nombre"},on:{input:a.llenarDatosCliente},model:{value:a.cliente,callback:function(t){a.cliente=t},expression:"cliente"}})],1),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("RFC receptor ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.Receptor.rfc,expression:"Receptor.rfc"}],staticClass:"form-control",attrs:{type:"text",placeholder:"RFC receptor",readonly:""},domProps:{value:a.Receptor.rfc},on:{input:function(t){t.target.composing||a.$set(a.Receptor,"rfc",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-10"},[t("label",[a._v("Nombre o razon social")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.Receptor.nombre,expression:"Receptor.nombre"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nombre o razon social",readonly:""},domProps:{value:a.Receptor.nombre},on:{input:function(t){t.target.composing||a.$set(a.Receptor,"nombre",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-6"},[t("label",[a._v("Uso Factura ")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.uso_factura,expression:"factura.uso_factura"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"uso_factura",t.target.multiple?e:e[0])}}},a._l(a.UsoFactura,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_uso)+" "+a._s(e.descripcion))])})),0)]),a._v(" "),t("div",{staticClass:"form-group"},[t("label",[a._v("Correo ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.Receptor.contacto,expression:"Receptor.contacto"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Correo",readonly:""},domProps:{value:a.Receptor.contacto},on:{input:function(t){t.target.composing||a.$set(a.Receptor,"contacto",t.target.value)}}})])]),a._v(" "),t("hr"),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Fecha y hora de expedición")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.fecha_hora,expression:"factura.fecha_hora"}],staticClass:"form-control",attrs:{type:"datetime-local",placeholder:"Fecha y hora de expedicion"},domProps:{value:a.factura.fecha_hora},on:{input:function(t){t.target.composing||a.$set(a.factura,"fecha_hora",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Código postal ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.codigo_postal,expression:"factura.codigo_postal"}],staticClass:"form-control",attrs:{type:"text",maxlength:"5",placeholder:"Codigo postal"},domProps:{value:a.factura.codigo_postal},on:{input:function(t){t.target.composing||a.$set(a.factura,"codigo_postal",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Moneda")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.moneda_id,expression:"factura.moneda_id"}],staticClass:"form-control",on:{change:[function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"moneda_id",t.target.multiple?e:e[0])},a.tipomoneda]}},a._l(a.Monedas,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_moneda))])})),0)])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Forma de pago ")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.formapago,expression:"factura.formapago"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"formapago",t.target.multiple?e:e[0])}}},a._l(a.FormaPago,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.clave)+" "+a._s(e.descripcion))])})),0)]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Metodo de pago")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.metodopago,expression:"factura.metodopago"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"metodopago",t.target.multiple?e:e[0])}}},a._l(a.MetodoPago,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_metodopago)+" "+a._s(e.descripcion))])})),0)]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Tipo de cambio")]),a._v(" "),t("div",{staticClass:"input-group mb-2"},[a._m(3),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.tipo_cambio,expression:"factura.tipo_cambio"}],staticClass:"form-control",attrs:{disabled:a.dasabiltarMonedas,type:"text",placeholder:"Tipo de cambio"},domProps:{value:a.factura.tipo_cambio},on:{input:function(t){t.target.composing||a.$set(a.factura,"tipo_cambio",t.target.value)}}})])])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:4==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 4"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Número de operación")]),a._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"integer",expression:"'integer'"},{name:"model",rawName:"v-model",value:a.factura.num_operacion,expression:"factura.num_operacion"}],staticClass:"form-control",attrs:{type:"text",name:"numero de operacion","data-vv-name":"numero de operacion"},domProps:{value:a.factura.num_operacion},on:{input:function(t){t.target.composing||a.$set(a.factura,"num_operacion",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("numero de operacion")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Banco ordenante")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.ban_ordenante,expression:"factura.ban_ordenante"}],staticClass:"form-control",attrs:{type:"text",name:"banco ordenante","data-vv-name":"banco ordenante"},domProps:{value:a.factura.ban_ordenante},on:{input:function(t){t.target.composing||a.$set(a.factura,"ban_ordenante",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Cuenta ordenante")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.cuenta_ordenante,expression:"factura.cuenta_ordenante"}],staticClass:"form-control",attrs:{type:"text",name:"cuenta ordenante","data-vv-name":"cuenta ordenante"},domProps:{value:a.factura.cuenta_ordenante},on:{input:function(t){t.target.composing||a.$set(a.factura,"cuenta_ordenante",t.target.value)}}})])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:4==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 4"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("RFC banco ordenante")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.rfc_cuenta_ordenante,expression:"factura.rfc_cuenta_ordenante"}],staticClass:"form-control",attrs:{type:"text",name:"RFC banco ordenante","data-vv-name":"RFC banco ordenante"},domProps:{value:a.factura.rfc_cuenta_ordenante},on:{input:function(t){t.target.composing||a.$set(a.factura,"rfc_cuenta_ordenante",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("RFC banco beneficiario")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.rfc_cuenta_beneficiario,expression:"factura.rfc_cuenta_beneficiario"}],staticClass:"form-control",attrs:{type:"text",name:"RFC banco beneficiario","data-vv-name":"RFC banco beneficiario"},domProps:{value:a.factura.rfc_cuenta_beneficiario},on:{input:function(t){t.target.composing||a.$set(a.factura,"rfc_cuenta_beneficiario",t.target.value)}}})])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:4==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 4"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Fecha de pago")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.fecha_pago,expression:"factura.fecha_pago"}],staticClass:"form-control",attrs:{type:"datetime-local",name:"fecha de pago","data-vv-name":"fecha_pago"},domProps:{value:a.factura.fecha_pago},on:{input:function(t){t.target.composing||a.$set(a.factura,"fecha_pago",t.target.value)}}})])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:2==a.factura.tipo_factura_id||1==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 2 || factura.tipo_factura_id == 1"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-8"},[t("label",[a._v("Condiciones de pago ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.condicion_pago,expression:"factura.condicion_pago"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Condiciones de pago"},domProps:{value:a.factura.condicion_pago},on:{input:function(t){t.target.composing||a.$set(a.factura,"condicion_pago",t.target.value)}}})])]),a._v(" "),t("hr"),a._v(" "),t("div",{staticClass:"form-row"},[a._m(4),a._v(" "),t("div",{staticClass:"form-group col-md-1"},[t("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"observa"},on:{change:function(t){return a.observaciones(t)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Adenda")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.adenda,expression:"factura.adenda"}],staticClass:"form-control",attrs:{type:"text",id:"adenda",disabled:""},domProps:{value:a.factura.adenda},on:{input:function(t){t.target.composing||a.$set(a.factura,"adenda",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Proveedor")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.proveeade,expression:"factura.proveeade"}],staticClass:"form-control",attrs:{type:"text",id:"proveeade",disabled:""},domProps:{value:a.factura.proveeade},on:{input:function(t){t.target.composing||a.$set(a.factura,"proveeade",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("No. Recepción")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.clave_ob,expression:"factura.clave_ob"}],staticClass:"form-control",attrs:{type:"text",id:"clave_ob",disabled:""},domProps:{value:a.factura.clave_ob},on:{input:function(t){t.target.composing||a.$set(a.factura,"clave_ob",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Orden de compra")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.orden_ob,expression:"factura.orden_ob"}],staticClass:"form-control",attrs:{type:"text",id:"orden_ob",disabled:""},domProps:{value:a.factura.orden_ob},on:{input:function(t){t.target.composing||a.$set(a.factura,"orden_ob",t.target.value)}}})])]),a._v(" "),t("hr"),a._v(" "),t("div",{staticClass:"form-row"},[a._m(5),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("div",{staticClass:"form-check"},[t("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"gridRadios",id:"gridRadios1"},on:{click:a.nacional}}),a._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"gridRadios1"}},[a._v("\n                                            Nacional\n                                        ")])])]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("div",{staticClass:"form-check"},[t("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"gridRadios",id:"gridRadios2"},on:{click:a.extranjero}}),a._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"gridRadios2"}},[a._v("\n                                            Extranjero\n                                        ")])])]),a._v(" "),a._m(6),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.taxid,expression:"factura.taxid"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tax Id",disabled:1==a.desabilitartax},domProps:{value:a.factura.taxid},on:{input:function(t){t.target.composing||a.$set(a.factura,"taxid",t.target.value)}}})])]),a._v(" "),t("hr")],2)]),a._v(" "),t("div",{staticClass:"modal-footer"},[t("vue-element-loading",{attrs:{active:a.isLoading}}),a._v(" "),t("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(t){return a.cerrarModal()}}},[t("i",{staticClass:"fas fa-times"}),a._v("Cerrar")]),a._v(" "),1==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardar(1)}}},[t("i",{staticClass:"fas fa-save"}),a._v("Guardar")]):a._e(),a._v(" "),2==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardar(0)}}},[t("i",{staticClass:"fas fa-save"}),a._v("Actualizar")]):a._e()],1)])])])])])}),[function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-2"},[a("label",[this._v("Tipo:")])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-5"},[a("label",[a("b",[this._v("UUID")])])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-1"},[a("label",[a("b",[this._v("ACCIONES")])])])},function(){var a=this._self._c;return a("div",{staticClass:"input-group-addon"},[a("div",{staticClass:"input-group-text"},[this._v("$")])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-2"},[a("label",[this._v("Observaciones")])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-2"},[a("label",[this._v("Tipo:")])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-1"},[a("label",[this._v("Tax Id: ")])])}],!1,null,null,null).exports},31745:(a,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>v});var o=e(60173);function r(a){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},r(a)}function i(){i=function(){return t};var a,t={},e=Object.prototype,o=e.hasOwnProperty,s=Object.defineProperty||function(a,t,e){a[t]=e.value},n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",d=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function u(a,t,e){return Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),a[t]}try{u({},"")}catch(a){u=function(a,t,e){return a[t]=e}}function p(a,t,e,o){var r=t&&t.prototype instanceof b?t:b,i=Object.create(r.prototype),n=new M(o||[]);return s(i,"_invoke",{value:D(a,e,n)}),i}function f(a,t,e){try{return{type:"normal",arg:a.call(t,e)}}catch(a){return{type:"throw",arg:a}}}t.wrap=p;var v="suspendedStart",m="suspendedYield",_="executing",g="completed",h={};function b(){}function C(){}function w(){}var y={};u(y,c,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(F([])));k&&k!==e&&o.call(k,c)&&(y=k);var P=w.prototype=b.prototype=Object.create(y);function N(a){["next","throw","return"].forEach((function(t){u(a,t,(function(a){return this._invoke(t,a)}))}))}function R(a,t){function e(i,s,n,c){var d=f(a[i],a,s);if("throw"!==d.type){var l=d.arg,u=l.value;return u&&"object"==r(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(a){e("next",a,n,c)}),(function(a){e("throw",a,n,c)})):t.resolve(u).then((function(a){l.value=a,n(l)}),(function(a){return e("throw",a,n,c)}))}c(d.arg)}var i;s(this,"_invoke",{value:function(a,o){function r(){return new t((function(t,r){e(a,o,t,r)}))}return i=i?i.then(r,r):r()}})}function D(t,e,o){var r=v;return function(i,s){if(r===_)throw Error("Generator is already running");if(r===g){if("throw"===i)throw s;return{value:a,done:!0}}for(o.method=i,o.arg=s;;){var n=o.delegate;if(n){var c=S(n,o);if(c){if(c===h)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===v)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=_;var d=f(t,e,o);if("normal"===d.type){if(r=o.done?g:m,d.arg===h)continue;return{value:d.arg,done:o.done}}"throw"===d.type&&(r=g,o.method="throw",o.arg=d.arg)}}}function S(t,e){var o=e.method,r=t.iterator[o];if(r===a)return e.delegate=null,"throw"===o&&t.iterator.return&&(e.method="return",e.arg=a,S(t,e),"throw"===e.method)||"return"!==o&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),h;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var s=i.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=a),e.delegate=null,h):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function A(a){var t={tryLoc:a[0]};1 in a&&(t.catchLoc=a[1]),2 in a&&(t.finallyLoc=a[2],t.afterLoc=a[3]),this.tryEntries.push(t)}function $(a){var t=a.completion||{};t.type="normal",delete t.arg,a.completion=t}function M(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(A,this),this.reset(!0)}function F(t){if(t||""===t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function e(){for(;++i<t.length;)if(o.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=a,e.done=!0,e};return s.next=s}}throw new TypeError(r(t)+" is not iterable")}return C.prototype=w,s(P,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:C,configurable:!0}),C.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(a){var t="function"==typeof a&&a.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,w):(a.__proto__=w,u(a,l,"GeneratorFunction")),a.prototype=Object.create(P),a},t.awrap=function(a){return{__await:a}},N(R.prototype),u(R.prototype,d,(function(){return this})),t.AsyncIterator=R,t.async=function(a,e,o,r,i){void 0===i&&(i=Promise);var s=new R(p(a,e,o,r),i);return t.isGeneratorFunction(e)?s:s.next().then((function(a){return a.done?a.value:s.next()}))},N(P),u(P,l,"Generator"),u(P,c,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(a){var t=Object(a),e=[];for(var o in t)e.push(o);return e.reverse(),function a(){for(;e.length;){var o=e.pop();if(o in t)return a.value=o,a.done=!1,a}return a.done=!0,a}},t.values=F,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach($),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(o,r){return n.type="throw",n.arg=t,e.next=o,r&&(e.method="next",e.arg=a),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],n=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=o.call(s,"catchLoc"),d=o.call(s,"finallyLoc");if(c&&d){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(a,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===a||"continue"===a)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=a,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(a,t){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&t&&(this.next=t),h},finish:function(a){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===a)return this.complete(e.completion,e.afterLoc),$(e),h}},catch:function(a){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===a){var o=e.completion;if("throw"===o.type){var r=o.arg;$(e)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:F(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=a),h}},t}function s(a,t,e,o,r,i,s){try{var n=a[i](s),c=n.value}catch(a){return void e(a)}n.done?t(c):Promise.resolve(c).then(o,r)}function n(a){return function(){var t=this,e=arguments;return new Promise((function(o,r){var i=a.apply(t,e);function n(a){s(i,o,r,n,c,"next",a)}function c(a){s(i,o,r,n,c,"throw",a)}n(void 0)}))}}var c=e(14941).call(void 0);const d={data:function(){return{usuario_texto:"",isLoading:!1,dasabiltarMonedas:!1,desabilitartax:!0,datos_relaccionados:null,array_relacionados:[],modal:0,contador:0,emisor_id:0,tituloModal:"",tipoAccion:0,detalle:1,list_emisores:"",optionsvsex:[],ante:!1,exis:!1,id_buscar_emisor:0,factura:{id:"",emisor_id:"",tipo_factura_id:"",cliente_id:"",uso_factura:"",fecha_hora:"",codigo_postal:"",moneda_id:"",formapago:"",metodopago:"",tipo_cambio:"",condicion_pago:"",tipo_relacion:"",factura_id:"",uuid:"",taxid:"",clave_ob:"",orden_ob:"",num_operacion:"",ban_ordenante:"",cuenta_ordenante:"",adenda:"",proveeade:"",ante:"",exis:"",uuid_relacionado:"",fecha_pago:"",rfc_cuenta_ordenante:"",rfc_cuenta_beneficiario:"",exportacion:"01"},Clientes:[],cliente:{},UsoFactura:[],Monedas:[],FormaPago:[],MetodoPago:[],TipoFactura:[],TipoRelacion:[],optionsvsps:[],DatosGenerales:{rfc:"",razon_social:"",nombre:"",regimenfiscal:""},Receptor:{rfc:"",nombre:"",contacto:"",regimen_fiscal:"",codigo_postal:""},tableData:[],columns:["id","serie","folio","rfc_receptor","nombre_razons_receptor","fecha_hora","c_tipofactura","uuid","clave_ob","orden_ob","total","condicion_pago","timbrado"],sortable:["id","serie","folio","rfc_receptor","nombre_razons_receptor","fecha_hora","c_tipofactura","uuid","clave_ob","orden_ob","total","condicion_pago","timbrado"],options:{headings:{id:"Acciones",c_tipofactura:"Efecto",rfc_receptor:"RFC Receptor",nombre_razons_receptor:"Razón social",fecha_hora:"Fecha de emisión",timbrado:"Estado",uuid:"UUID"},perPage:10,perPageValues:[],skin:c.skin,sortIcon:c.sortIcon,filterByColumn:!0,texts:c.texts,listColumns:{timbrado:[{id:0,text:"Nuevo"},{id:1,text:"Timbrado"},{id:2,text:"Cancelado"},{id:9,text:"Prueba"}]},requestAdapter:function(a){var t=[];return t.push({"c.nombre":a.query.nombre_razons_receptor,"c.rfc":a.query.rfc_receptor,"factura.fecha_hora":a.query.fecha_hora,c_tipofactura:a.query.c_tipofactura,"factura.uuid":a.query.uuid,"factura.total":a.query.total,"factura.timbrado":a.query.timbrado,"factura.clave_ob":a.query.clave_ob,"factura.orden_ob":a.query.orden_ob,"factura.serie":a.query.serie,"factura.folio":a.query.folio}),a.query=t[0],a}}}},components:{conceptos:function(a){return e.e(644).then(function(){return a(e(31920))}.bind(null,e)).catch(e.oe)},conceptospagos:function(a){return e.e(644).then(function(){return a(e(89726))}.bind(null,e)).catch(e.oe)}},methods:{getData:function(){var a=this;axios.get("/datosgenerales?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.list_emisores=t.data.data}))},ObtenerTipoRelacion:function(){var a=this;axios.get("/satcattiporelacion?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.TipoRelacion=t.data.data}))},ObtenerMetodosPago:function(){var a=this;axios.get("/satcatmetodopago?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.MetodoPago=t.data.data}))},ObtenerTipoFactura:function(){var a=this;axios.get("/satcattipofactura?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.TipoFactura=t.data.data}))},ObtenerFormasPago:function(){var a=this;axios.get("/satcatformpago?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.FormaPago=t.data}))},ObtenerMonedas:function(){var a=this;axios.get("/satcatmonedas?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.Monedas=t.data.data}))},ObtenerFacturas:function(){var a=this;axios.get("/catfactura?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){if(0!=t.data.data.length)for(var e=0;e<t.data.data.length;e++)"1"==t.data.data[e].timbrado&&(a.optionsvsex.push({id:t.data.data[e].id,name:t.data.data[e].serie+" "+t.data.data[e].folio+" "+t.data.data[e].uuid}),a.contador+=1)}))},ObtenerClientes:function(){var a=this;axios.get("/clientes").then((function(t){t.data.status?a.Clientes=t.data.clientes:toastr.errror(t.data.mensaje)}))},obtenercfdi:function(){var a=this;axios.get("/satcatusocfdi?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(t){a.UsoFactura=t.data.data})).catch((function(a){console.error(a)}))},abrirModal:function(){var a=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.ObtenerClientes(),this.obtenercfdi(),this.ObtenerFacturas(),this.ObtenerMonedas(),this.ObtenerTipoFactura(),this.ObtenerMetodosPago(),this.ObtenerFormasPago(),this.ObtenerTipoRelacion(),t)this.modal=1,this.tituloModal="Registrar factura",this.tipoAccion=1,this.vaciar(),this.verfechahora(),$("#gridRadios1").prop("checked",!0);else{this.vaciar();var o=e.fecha_hora.split(new RegExp(["-",":"," "].join("|"),"g"));if(null!=e.fecha_pago)var r=e.fecha_pago.split(new RegExp(["-",":"," "].join("|"),"g"));this.modal=1,this.tituloModal="Actualizar factura",this.tipoAccion=2,this.factura.id=e.id,this.factura.emisor_id=e.emisor_id,this.factura.tipo_factura_id=e.tipo_factura_id,this.cliente.id=e.cliente_id,this.factura.uso_factura=e.uso_factura,this.factura.fecha_hora=o[0]+"-"+o[1]+"-"+o[2]+"T"+o[3]+":"+o[4],this.factura.codigo_postal=e.codigo_postal,this.factura.moneda_id=e.moneda_id,this.factura.formapago=e.formapago,this.factura.metodopago=e.metodopago,this.factura.tipo_cambio=e.tipo_cambio,this.factura.condicion_pago=e.condicion_pago,this.factura.taxid=e.taxid,this.factura.clave_ob=e.clave_ob,this.factura.orden_ob=e.orden_ob,this.factura.adenda=e.adenda,this.factura.proveeade=e.proveeade,this.factura.num_operacion=e.num_operacion,this.factura.cuenta_ordenante=e.cuenta_ordenante,this.factura.rfc_cuenta_ordenante=e.rfc_cuenta_ordenante,this.factura.rfc_cuenta_beneficiario=e.rfc_cuenta_beneficiario,this.factura.ban_ordenante=e.ban_ordenante,this.factura.tipo_relacion=e.tipo_relacion,this.factura.fecha_pago=null==e.fecha_pago?"":r[0]+"-"+r[1]+"-"+r[2]+"T"+r[3]+":"+r[4],this.factura.factura_id=null==e.factura_id?"":{id:e.factura_id,name:e.serie_relacionado+" "+e.folio_relacionado+" "+e.uuid_relacionado_f},axios.get("get/relacionados/"+e.id).then((function(t){t.data.forEach((function(t,e){a.array_relacionados.push({id:t.id,name:t.uuid})}))})).catch((function(a){console.error(a)})),this.vertipo(),this.vertipouno(),this.llenarDatosCliente()}},verfechahora:function(){var a=new Date;this.factura.fecha_hora=a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-"+(a.getDate()<10?"0"+a.getDate():a.getDate())+"T"+(a.getHours()<10?"0"+a.getHours():a.getHours())+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())},cerrarModal:function(){this.modal=0},vaciar:function(){this.factura.tipo_factura_id="",this.cliente.id="",this.factura.uso_factura="",this.factura.fecha_hora="",this.factura.moneda_id="",this.factura.formapago="",this.factura.metodopago="",this.factura.tipo_cambio="",this.factura.condicion_pago="",this.factura.taxid="",this.factura.factura_id="",this.factura.tipo_relacion="",this.factura.uuid_relacionado="",this.factura.num_operacion="",this.factura.ban_ordenante="",this.factura.cuenta_ordenante="",this.factura.rfc_cuenta_ordenante="",this.factura.rfc_cuenta_beneficiario="",this.factura.fecha_pago="",this.array_relacionados=[],o.A.resetObject(this.Receptor)},tipomoneda:function(){1==this.factura.moneda_id?(this.dasabiltarMonedas=!0,this.factura.tipo_cambio="1"):(this.dasabiltarMonedas=!1,this.factura.tipo_cambio="")},llenarDatosCliente:function(){var a=this;if(null==this.cliente)return this.Receptor.nombre="",this.Receptor.rfc="",this.Receptor.contacto="",this.Receptor.codigo_postal="",void(this.Receptor.regimen_fiscal="");axios.get("/clientes/"+this.cliente.id).then((function(t){t.data.status?null==t.data.cliente?(a.Receptor.nombre="",a.Receptor.rfc="",a.Receptor.contacto="",a.Receptor.codigo_postal="",a.Receptor.regimen_fiscal=""):(3!=t.data.cliente.regimen_fiscal.length&&toastr.warning("Sin Régimen Fiscal"),a.Receptor.nombre=t.data.cliente.nombre,a.Receptor.rfc=t.data.cliente.rfc,a.Receptor.codigo_postal=t.data.cliente.codigo_postal,a.Receptor.contacto=t.data.cliente.contacto,a.Receptor.regimen_fiscal=t.data.cliente.regimen_fiscal+" - "+t.data.cliente.regimen_fiscal_nombre):toastr.error(t.data.mensaje)}))},guardar:function(a){var t=this;this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var o=t;axios({method:a?"POST":"PUT",url:a?"/factura":"/factura/"+t.factura.id,data:{emisor_id:t.factura.emisor_id,tipo_factura_id:t.factura.tipo_factura_id,cliente_id:t.cliente.id,uso_factura:t.factura.uso_factura,fecha_hora:t.factura.fecha_hora,codigo_postal:t.factura.codigo_postal,moneda_id:t.factura.moneda_id,formapago:t.factura.formapago,metodopago:t.factura.metodopago,tipo_cambio:t.factura.tipo_cambio,condicion_pago:t.factura.condicion_pago,taxid:t.factura.taxid,tipo_relacion:t.factura.tipo_relacion,factura_id:""==t.factura.factura_id?"":t.factura.factura_id.id,uuid_relacionado:t.factura.uuid_relacionado,clave_ob:t.factura.clave_ob,orden_ob:t.factura.orden_ob,adenda:t.factura.adenda,proveeade:t.factura.proveeade,num_operacion:t.factura.num_operacion,ban_ordenante:t.factura.ban_ordenante,cuenta_ordenante:t.factura.cuenta_ordenante,rfc_cuenta_ordenante:t.factura.rfc_cuenta_ordenante,rfc_cuenta_beneficiario:t.factura.rfc_cuenta_beneficiario,fecha_pago:t.factura.fecha_pago,exportacion:t.factura.exportacion,relacionados:t.array_relacionados}}).then((function(t){o.isLoading=!1,t.data.status?"error"===t.data.status?(swal({type:"error",html:"Ha ocurrido un error notifiqué al administrador y recarge la página"}),o.cerrarModal()):(o.contador=0,o.cerrarModal(),toastr.success(a?"Factura agregada correctamente":"Factura actualizada correctamente","Correcto"),o.verfacturas(t.data.emisor_id)):swal({type:"error",html:t.data.errors.join("<br>")})})).catch((function(a){console.log(a)}))}}))},agregarI:function(a){this.detalle=2,this.$refs.conceptos.getData(a,this.optionsvsps)},agregarP:function(a){this.detalle=3,this.$refs.conceptospagos.getData(a)},maestro:function(){this.detalle=1},maestrop:function(){this.detalle=1},timbrar:function(a){var t=this;Swal.fire({title:"Esta seguro(a) de timbrar?",text:"Esta opción no se podrá desahacer!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(e){e.value&&(t.isLoading=!0,axios.get("/partidafactura/"+a.id+"?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(e){0==e.data.count?(toastr.warning("No se puede timbrar hasta tener conceptos registrados","Atención"),t.isLoading=!1):axios.get("/sellartimbrarfactura/"+a.id).then((function(a){a.data.status?(t.isLoading=!1,t.contador=0,toastr.success("Factura timbrada correctamente !!!","Correcto"),t.verfacturas(t.emisor_id)):(t.isLoading=!1,toastr.warning("Ha occurrido un error !!!","Atención"),swal({type:"error",html:a.data.respuesta}))})).catch((function(a){console.error(a)}))})).catch((function(a){console.error(a)})))}))},TimbrarV4:function(a){var t=arguments,e=this;return n(i().mark((function o(){var r,s,n;return i().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=(r=!(t.length>1&&void 0!==t[1])||t[1])?"Modo de Prueba":"",o.next=4,Swal.fire({title:"Timbrar CFDI v4.0",text:s,type:"warning",showCancelButton:!0,confirmButtonColor:"#4dbf2e",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"});case 4:if(null!=(n=o.sent).value){o.next=7;break}return o.abrupt("return");case 7:if(n.value){o.next=9;break}return o.abrupt("return");case 9:return o.next=11,axios.get("/partidafactura/"+a.id+"?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1");case 11:if(0!=o.sent.data.count){o.next=16;break}return toastr.warning("Sin conceptos registrados","Atención"),e.isLoading=!1,o.abrupt("return");case 16:e.isLoading=!0,axios.post("facturacion/cdfi4/timbrar/",{id:a.id,prueba:r}).then((function(a){e.isLoading=!1,a.data.status?(e.isLoading=!1,e.contador=0,toastr.success("Factura timbrada correctamente","Correcto"),e.verfacturas(e.emisor_id)):(e.isLoading=!1,toastr.warning("Ha occurrido un error","Atención"),swal({type:"error",html:a.data.mensaje}))})).catch((function(a){console.error(a)}));case 18:case"end":return o.stop()}}),o)})))()},timbrarprueba:function(a){var t=this;Swal.fire({title:"Esta seguro(a) de timbrar a prueba?",text:"Esta opción no se podrá desahacer!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(e){e.value&&(t.isLoading=!0,axios.get("/partidafactura/"+a.id+"?query=%7B%7D&limit=10&ascending=1&page=1&byColumn=1").then((function(e){0==e.data.count?(toastr.warning("No se puede timbrar hasta tener conceptos registrados","Atención"),t.isLoading=!1):axios.get("/sellartimbrarfactura/prueba/"+a.id).then((function(a){a.data.status?(t.isLoading=!1,t.contador=0,toastr.success("Factura timbrada correctamente !!!","Correcto"),t.verfacturas(a.data.emisor_id)):(t.isLoading=!1,toastr.warning("Ha occurrido un error !!!","Atención"),swal({type:"error",html:a.data.respuesta}))})).catch((function(a){console.error(a)}))})).catch((function(a){console.error(a)})))}))},DescargarPDF4:function(a){window.open("/facturacion/cdfi4/descargar/"+a.archivo,"_blank")},descargarprefactura:function(a){window.open("/descargarprefactura/"+a.id,"_blank")},extranjero:function(){var a=this;this.desabilitartax=!1,axios.get("/clientextranjero").then((function(t){a.cliente.id=t.data.id,a.Receptor.rfc=t.data.rfc,a.Receptor.nombre=t.data.nombre,a.Receptor.contacto=t.data.contacto,a.factura.uso_factura=22})).catch((function(a){console.error(a)}))},nacional:function(){this.desabilitartax=!0,this.cliente.id="",this.Receptor.rfc="",this.Receptor.nombre="",this.Receptor.contacto="",this.factura.uso_factura="",this.factura.taxid=""},vertipo:function(){null==this.factura.taxid?($("#gridRadios1").prop("checked",!0),$("#gridRadios2").prop("checked",!1),this.desabilitartax=!0):null!=this.factura.taxid&&($("#gridRadios1").prop("checked",!1),$("#gridRadios2").prop("checked",!0),this.desabilitartax=!1)},vertipouno:function(){""==this.factura.factura_id?($("#gridRadios3").prop("checked",!0),$("#gridRadios4").prop("checked",!1),this.ante=!0,this.exis=!1,this.factura.factura_id=""):""!=this.factura.factura_id&&($("#gridRadios4").prop("checked",!0),$("#gridRadios3").prop("checked",!1),this.ante=!1,this.exis=!0,this.factura.uuid_relacionado="")},observaciones:function(a){1==a.target.checked?($("#clave_ob").prop("disabled",!1),$("#orden_ob").prop("disabled",!1),$("#adenda").prop("disabled",!1),$("#proveeade").prop("disabled",!1)):($("#clave_ob").prop("disabled",!0),$("#orden_ob").prop("disabled",!0),$("#adenda").prop("disabled",!0),$("#proveeade").prop("disabled",!0),this.factura.orden_ob="",this.factura.clave_ob="",this.factura.proveeade="",this.factura.adenda="")},guardarDG:function(){var a=this;axios.get("/datosgeneral/"+this.factura.emisor_id).then((function(t){a.DatosGenerales.razon_social=t.data.razon_social,a.DatosGenerales.nombre=t.data.nombre,a.DatosGenerales.regimenfiscal=t.data.regimenfiscal,a.factura.codigo_postal=t.data.codigo_postal})).catch((function(a){console.error(error)}))},timbresRestantes:function(){axios.get("/timbresrestantes").then((function(a){Swal.fire("Timbres Restantes","Conserflow :"+a.data.c)})).catch((function(a){console.error(error)}))},verfacturas:function(a){this.usuario_texto=1==a?"CONSERFLOW SA DE CV":"-",this.id_buscar_emisor=a,this.$refs.tabla.refresh()},descargarxml:function(a){axios.get("/descargarfacturareportexml/"+a.archivo).then((function(a){if(a.data.status){var t="data:text/xml;charset=utf-8,"+a.data.factura.xml.replace("\n",""),e=document.createElement("a");e.href=t,e.download=a.data.factura.nombre,document.body.appendChild(e),e.click(),document.body.removeChild(e)}else alert("Factura no encontrada")}))},DescargarXmlPrueba:function(a){axios.post("/facturacion/cdfi4/descargarxmlprueba/",{id:a.id,file:a.archivo}).then((function(a){if(a.data.status){var t="data:text/xml;charset=utf-8,"+a.data.factura.xml.replace("\n",""),e=document.createElement("a");e.href=t,e.download=a.data.factura.nombre,document.body.appendChild(e),e.click(),document.body.removeChild(e)}else alert("Factura no encontrada")}))},edo:function(){$("#gridRadios3").prop("checked")?(this.ante=!0,this.exis=!1,this.factura.factura_id=""):(this.ante=!1,this.exis=!0,this.factura.uuid_relacionado="")},guardaRelaccion:function(){1==this.ante&&this.array_relacionados.push({id:0,name:this.factura.uuid_relacionado}),1==this.exis&&this.array_relacionados.push({id:0,name:this.factura.factura_id.name}),this.factura.uuid_relacionado="",this.factura.factura_id=""},eliminar_aignacion:function(a,t){if(0==a.id)this.array_relacionados.splice(t,1);else{var e=this,o=a.id;axios.get("relaciones/eliminar/".concat(o)).then((function(a){e.array_relacionados.splice(t,1)})).catch((function(a){console.log(a)}))}},CancelarFactura:function(a){var t=arguments,e=this;return n(i().mark((function o(){var r,s,n,c,d;return i().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=!(t.length>1&&void 0!==t[1])||t[1],o.next=3,Swal.mixin({input:"text",confirmButtonText:"Siguiente &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue([{title:"Cancelar CFDI",text:"Seleccione el motivo de cancelación",input:"select",inputOptions:{"01":"Comprobante emitido con errores con relación","02":"Comprobante emitido con errores sin relación","03":"No se llevó a cabo la operación","04":"Operación nominativa relacionada en una factura global"}},{title:"Folio de Sustitución",text:"Ingrese el folio del sustitución"}]);case 3:if(null!=(s=o.sent).value){o.next=6;break}return o.abrupt("return");case 6:if(n=a.id,c=s.value[0],d=s.value[1],!("01"==c&36!=d.length)){o.next=12;break}return toastr.warning("Ingrese un UUID válido"),o.abrupt("return");case 12:e.isLoading=!0,axios.post("facturacion/cdfi4/cancelar",{id:n,motivo:c,uuid_reemplazo:d,prueba:r}).then((function(a){e.isLoading=!1,a.data.status?(toastr.success("Cancelada Correctamente"),e.ObtenerFacturas(),e.$refs.tabla.refresh()):toastr.errror(a.data.mensaje)}));case 14:case"end":return o.stop()}}),o)})))()}},mounted:function(){this.getData(),this.verfacturas(1),this.emisor_id=1}};var l=e(85072),u=e.n(l),p=e(32901),f={insert:"head",singleton:!1};u()(p.A,f);p.A.locals;const v=(0,e(14486).A)(d,(function(){var a=this,t=a._self._c;return t("main",{staticClass:"main"},[t("div",{},[t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.detalle,expression:"detalle == 1"}],staticClass:"card"},[t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),a._v(" CFDI 4.0 - "+a._s(a.usuario_texto)+"\n                "),t("div",{staticClass:"dropdown float-sm-right"},[t("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropmenub","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",name:"button"}},[a._v("\n                        Emisor\n                    ")]),a._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdown"}},a._l(a.list_emisores,(function(e){return t("div",{key:e.key},[t("button",{staticClass:"dropdown-item",on:{click:function(t){a.emisor_id=e.id,a.verfacturas(e.id)}}},[a._v(a._s(e.nombre))])])})),0)]),a._v(" "),t("button",{staticClass:"btn btn-light float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.timbresRestantes()}}},[t("i"),a._v("Timbres Restantes\n                ")]),a._v(" "),t("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(t){return a.abrirModal()}}},[t("i",{staticClass:"fas fa-plus"}),a._v("Nuevo\n                ")])]),a._v(" "),t("div",{staticClass:"card-body"},[t("vue-element-loading",{attrs:{active:a.isLoading}}),a._v(" "),t("v-server-table",{ref:"tabla",attrs:{url:"verfacturauno/"+a.id_buscar_emisor,columns:a.columns,options:a.options},scopedSlots:a._u([{key:"id",fn:function(e){return[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[t("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[t("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-grip-horizontal"}),a._v(" Acciones\n                                ")]),a._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[0==e.row.timbrado?[t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.abrirModal(!1,e.row)}}},[t("i",{staticClass:"fas fa-edit"}),a._v(" Actualizar Factura\n                                        ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:"Pago"===e.row.descripcion_tipofactura,expression:"props.row.descripcion_tipofactura === 'Pago'"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.agregarP(e.row)}}},[t("i",{staticClass:"fas fa-list-ol"}),a._v(" Agregar Pagos\n                                        ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:"Ingreso"===e.row.descripcion_tipofactura||"Egreso"===e.row.descripcion_tipofactura,expression:"props.row.descripcion_tipofactura === 'Ingreso' \n                                        || props.row.descripcion_tipofactura === 'Egreso'"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.agregarI(e.row)}}},[t("i",{staticClass:"fas fa-list"}),a._v(" Agregar Conceptos\n                                        ")]),a._v(" "),t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.descargarprefactura(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar prefactura\n                                        ")]),a._v(" "),t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.TimbrarV4(e.row,!1)}}},[t("i",{staticClass:"fas fa-bell"}),a._v(" Timbrar 4.0\n                                        ")]),a._v(" "),t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.TimbrarV4(e.row)}}},[t("i",{staticClass:"fas fa-warning"}),a._v(" Timbrar Prueba\n                                        ")])]:a._e(),a._v(" "),1==e.row.timbrado?[t("button",{directives:[{name:"show",rawName:"v-show",value:"Ingreso"===e.row.descripcion_tipofactura||"Egreso"===e.row.descripcion_tipofactura,expression:"props.row.descripcion_tipofactura === 'Ingreso'\n                                        || props.row.descripcion_tipofactura === 'Egreso'"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.agregarI(e.row)}}},[t("i",{staticClass:"fas fa-list-ol"}),a._v(" Ver detalles\n                                        ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:"Pago"===e.row.descripcion_tipofactura,expression:"props.row.descripcion_tipofactura === 'Pago'"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.agregarP(e.row)}}},[t("i",{staticClass:"fas fa-list-ol"}),a._v(" Ver detalles\n                                        ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.timbrado,expression:"props.row.timbrado == 1"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.DescargarPDF4(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar\n                                        ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.timbrado,expression:"props.row.timbrado == 1"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.descargarxml(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar XML\n                                        ")]),a._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.timbrado,expression:"props.row.timbrado == 1"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.CancelarFactura(e.row,!1)}}},[t("i",{staticClass:"fas fa-close"}),a._v(" Cancelar factura\n                                        ")])]:a._e(),a._v(" "),9==e.row.timbrado?[t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.CancelarFactura(e.row)}}},[t("i",{staticClass:"fas fa-close"}),a._v(" Cancelar Prueba\n                                        ")]),a._v(" "),t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.DescargarXmlPrueba(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar XML Prueba\n                                        ")]),a._v(" "),t("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return a.DescargarPDF4(e.row)}}},[t("i",{staticClass:"fas fa-download"}),a._v(" Descargar\n                                        ")])]:a._e()],2)])])]}},{key:"timbrado",fn:function(e){return[0==e.row.timbrado?[t("button",{staticClass:"btn btn-outline-info",attrs:{type:"button"}},[t("i",{staticClass:"fa fa-files-o"}),a._v(" Nuevo\n                            ")])]:a._e(),a._v(" "),1==e.row.timbrado?[t("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"}},[t("i",{staticClass:"fa fa-exclamation-circle"}),a._v(" Timbrado\n                            ")])]:a._e(),a._v(" "),2==e.row.timbrado?[t("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"}},[t("i",{staticClass:"fa fa-window-close"}),a._v(" Cancelado\n                            ")])]:a._e(),a._v(" "),9==e.row.timbrado?[t("button",{staticClass:"btn btn-outline-warning",attrs:{type:"button"}},[t("i",{staticClass:"fa fa-exclamation-circle"}),a._v(" Prueba\n                            ")])]:a._e()]}}])})],1)]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:2==a.detalle,expression:"detalle == 2"}]},[t("conceptos",{ref:"conceptos",on:{"maestro:conceptos":function(t){return a.maestro()}}})],1),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:3==a.detalle,expression:"detalle == 3"}]},[t("conceptospagos",{ref:"conceptospagos",on:{"maestro:conceptospagos":function(t){return a.maestrop()}}})],1),a._v(" "),t("div",{staticClass:"modal fade",class:{mostrar:a.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",domProps:{textContent:a._s(a.tituloModal)}}),a._v(" "),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return a.cerrarModal()}}},[t("span",{attrs:{"aria-hidden":"true"}},[a._v("x")])])]),a._v(" "),t("div",{staticClass:"modal-body"},[t("form",[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("RFC Emisor ")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.emisor_id,expression:"factura.emisor_id"}],staticClass:"form-control",on:{click:function(t){return a.guardarDG()},change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"emisor_id",t.target.multiple?e:e[0])}}},a._l(a.list_emisores,(function(e){return t("option",{key:e.id,domProps:{value:e.id}},[a._v(a._s(e.rfc))])})),0)]),a._v(" "),t("div",{staticClass:"form-group col-md-6"},[t("label",[a._v("Nombre comercial ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.DatosGenerales.nombre,expression:"DatosGenerales.nombre"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nombre comercial",readonly:""},domProps:{value:a.DatosGenerales.nombre},on:{input:function(t){t.target.composing||a.$set(a.DatosGenerales,"nombre",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-8"},[t("label",[a._v("Nombre o razon social ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.DatosGenerales.razon_social,expression:"DatosGenerales.razon_social"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nombre o razon social",readonly:""},domProps:{value:a.DatosGenerales.razon_social},on:{input:function(t){t.target.composing||a.$set(a.DatosGenerales,"razon_social",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-8"},[t("label",[a._v("Regimen fiscal")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.DatosGenerales.regimenfiscal,expression:"DatosGenerales.regimenfiscal"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Regimen fiscal",readonly:""},domProps:{value:a.DatosGenerales.regimenfiscal},on:{input:function(t){t.target.composing||a.$set(a.DatosGenerales,"regimenfiscal",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Tipo de factura")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.tipo_factura_id,expression:"factura.tipo_factura_id"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"tipo_factura_id",t.target.multiple?e:e[0])}}},a._l(a.TipoFactura,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_tipofactura)+" "+a._s(e.descripcion))])})),0)])]),a._v(" "),t("hr"),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-7"},[t("label",[a._v("Tipo de relacción")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.tipo_relacion,expression:"factura.tipo_relacion"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"tipo_relacion",t.target.multiple?e:e[0])}}},a._l(a.TipoRelacion,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_tiporelacion)+" "+a._s(e.descripcion))])})),0)])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}],staticClass:"form-row"},[a._m(0),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("div",{staticClass:"form-check"},[t("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"gridRadiosdos",id:"gridRadios3"},on:{change:a.edo}}),a._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"gridRadios3"}},[a._v("\n                                            Anterior\n                                        ")])])]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("div",{staticClass:"form-check"},[t("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"gridRadiosdos",id:"gridRadios4"},on:{change:a.edo}}),a._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"gridRadios4"}},[a._v("\n                                            Existente\n                                        ")])])])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-7"},[t("label",[a._v("UUID")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.uuid_relacionado,expression:"factura.uuid_relacionado"},{name:"show",rawName:"v-show",value:a.ante,expression:"ante"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.factura.uuid_relacionado},on:{input:function(t){t.target.composing||a.$set(a.factura,"uuid_relacionado",t.target.value)}}}),a._v(" "),t("v-select",{directives:[{name:"show",rawName:"v-show",value:a.exis,expression:"exis"}],attrs:{options:a.optionsvsex,id:"relaccionados",name:"relaccionados",label:"name","data-vv-name":"relacionados"},model:{value:a.factura.factura_id,callback:function(t){a.$set(a.factura,"factura_id",t)},expression:"factura.factura_id"}})],1),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("label"),a._v(" "),t("br"),a._v(" "),t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardaRelaccion()}}},[t("i",{staticClass:"fas fa-save"}),a._v("Guardar")])])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}],staticClass:"form-row"},[a._m(1),a._v(" "),a._m(2)]),a._v(" "),a._l(a.array_relacionados,(function(e,o){return t("li",{key:o,staticClass:"list-group-item"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-5"},[t("label",[a._v(a._s(e.name))])]),a._v(" "),t("div",{staticClass:"form-group col-md-1"},[t("a",{on:{click:function(t){return a.eliminar_aignacion(e,o)}}},[t("span",{staticClass:"fas fa-trash",attrs:{"arial-hidden":"true"}})])])])])})),a._v(" "),t("hr",{directives:[{name:"show",rawName:"v-show",value:1==a.factura.tipo_factura_id||2==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 1 || factura.tipo_factura_id == 2"}]}),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-6"},[t("label",[a._v("Cliente ")]),a._v(" "),t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{options:a.Clientes,label:"nombre"},on:{input:a.llenarDatosCliente},model:{value:a.cliente,callback:function(t){a.cliente=t},expression:"cliente"}})],1),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("RFC receptor ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.Receptor.rfc,expression:"Receptor.rfc"}],staticClass:"form-control",attrs:{type:"text",placeholder:"RFC receptor",readonly:""},domProps:{value:a.Receptor.rfc},on:{input:function(t){t.target.composing||a.$set(a.Receptor,"rfc",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("C.P. receptor ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.Receptor.codigo_postal,expression:"Receptor.codigo_postal"}],staticClass:"form-control",attrs:{type:"text",placeholder:"RFC receptor",readonly:""},domProps:{value:a.Receptor.codigo_postal},on:{input:function(t){t.target.composing||a.$set(a.Receptor,"codigo_postal",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-10"},[t("label",[a._v("Nombre o razon social")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.Receptor.nombre,expression:"Receptor.nombre"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nombre o razon social",readonly:""},domProps:{value:a.Receptor.nombre},on:{input:function(t){t.target.composing||a.$set(a.Receptor,"nombre",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-10"},[t("label",[a._v("Régimen Fiscal")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.Receptor.regimen_fiscal,expression:"Receptor.regimen_fiscal"}],staticClass:"form-control disabled",attrs:{type:"text",placeholder:"Régimen Fiscal",readonly:""},domProps:{value:a.Receptor.regimen_fiscal},on:{input:function(t){t.target.composing||a.$set(a.Receptor,"regimen_fiscal",t.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-6"},[t("label",[a._v("Uso Factura ")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.uso_factura,expression:"factura.uso_factura"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"uso_factura",t.target.multiple?e:e[0])}}},a._l(a.UsoFactura,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_uso)+" "+a._s(e.descripcion))])})),0)]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Exportación ")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.exportacion,expression:"factura.exportacion"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"exportacion",t.target.multiple?e:e[0])}}},[t("option",{attrs:{value:"01"}},[a._v("01 - No Aplica")]),a._v(" "),t("option",{attrs:{value:"02"}},[a._v("02 - Definitiva")]),a._v(" "),t("option",{attrs:{value:"03"}},[a._v("03 - Temporal")])])])]),a._v(" "),t("hr"),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Fecha y hora de expedición")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.fecha_hora,expression:"factura.fecha_hora"}],staticClass:"form-control",attrs:{type:"datetime-local",placeholder:"Fecha y hora de expedicion"},domProps:{value:a.factura.fecha_hora},on:{input:function(t){t.target.composing||a.$set(a.factura,"fecha_hora",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Código postal ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.codigo_postal,expression:"factura.codigo_postal"}],staticClass:"form-control",attrs:{type:"text",maxlength:"5",placeholder:"Codigo postal"},domProps:{value:a.factura.codigo_postal},on:{input:function(t){t.target.composing||a.$set(a.factura,"codigo_postal",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Moneda")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.moneda_id,expression:"factura.moneda_id"}],staticClass:"form-control",on:{change:[function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"moneda_id",t.target.multiple?e:e[0])},a.tipomoneda]}},a._l(a.Monedas,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_moneda))])})),0)])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Forma de pago ")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.formapago,expression:"factura.formapago"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"formapago",t.target.multiple?e:e[0])}}},a._l(a.FormaPago,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.clave)+" "+a._s(e.descripcion))])})),0)]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Metodo de pago")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.factura.metodopago,expression:"factura.metodopago"}],staticClass:"form-control",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.factura,"metodopago",t.target.multiple?e:e[0])}}},a._l(a.MetodoPago,(function(e,o){return t("option",{key:o,domProps:{value:e.id}},[a._v(a._s(e.c_metodopago)+" "+a._s(e.descripcion))])})),0)]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Tipo de cambio")]),a._v(" "),t("div",{staticClass:"input-group mb-2"},[a._m(3),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.tipo_cambio,expression:"factura.tipo_cambio"}],staticClass:"form-control",attrs:{disabled:a.dasabiltarMonedas,type:"text",placeholder:"Tipo de cambio"},domProps:{value:a.factura.tipo_cambio},on:{input:function(t){t.target.composing||a.$set(a.factura,"tipo_cambio",t.target.value)}}})])])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:4==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 4"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Número de operación")]),a._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"integer",expression:"'integer'"},{name:"model",rawName:"v-model",value:a.factura.num_operacion,expression:"factura.num_operacion"}],staticClass:"form-control",attrs:{type:"text",name:"numero de operacion","data-vv-name":"numero de operacion"},domProps:{value:a.factura.num_operacion},on:{input:function(t){t.target.composing||a.$set(a.factura,"num_operacion",t.target.value)}}}),a._v(" "),t("span",{staticClass:"text-danger"},[a._v(a._s(a.errors.first("numero de operacion")))])]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Banco ordenante")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.ban_ordenante,expression:"factura.ban_ordenante"}],staticClass:"form-control",attrs:{type:"text",name:"banco ordenante","data-vv-name":"banco ordenante"},domProps:{value:a.factura.ban_ordenante},on:{input:function(t){t.target.composing||a.$set(a.factura,"ban_ordenante",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Cuenta ordenante")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.cuenta_ordenante,expression:"factura.cuenta_ordenante"}],staticClass:"form-control",attrs:{type:"text",name:"cuenta ordenante","data-vv-name":"cuenta ordenante"},domProps:{value:a.factura.cuenta_ordenante},on:{input:function(t){t.target.composing||a.$set(a.factura,"cuenta_ordenante",t.target.value)}}})])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:4==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 4"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("RFC banco ordenante")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.rfc_cuenta_ordenante,expression:"factura.rfc_cuenta_ordenante"}],staticClass:"form-control",attrs:{type:"text",name:"RFC banco ordenante","data-vv-name":"RFC banco ordenante"},domProps:{value:a.factura.rfc_cuenta_ordenante},on:{input:function(t){t.target.composing||a.$set(a.factura,"rfc_cuenta_ordenante",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("RFC banco beneficiario")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.rfc_cuenta_beneficiario,expression:"factura.rfc_cuenta_beneficiario"}],staticClass:"form-control",attrs:{type:"text",name:"RFC banco beneficiario","data-vv-name":"RFC banco beneficiario"},domProps:{value:a.factura.rfc_cuenta_beneficiario},on:{input:function(t){t.target.composing||a.$set(a.factura,"rfc_cuenta_beneficiario",t.target.value)}}})])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:4==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 4"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-4"},[t("label",[a._v("Fecha de pago")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.fecha_pago,expression:"factura.fecha_pago"}],staticClass:"form-control",attrs:{type:"datetime-local",name:"fecha de pago","data-vv-name":"fecha_pago"},domProps:{value:a.factura.fecha_pago},on:{input:function(t){t.target.composing||a.$set(a.factura,"fecha_pago",t.target.value)}}})])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:2==a.factura.tipo_factura_id||1==a.factura.tipo_factura_id,expression:"factura.tipo_factura_id == 2 || factura.tipo_factura_id == 1"}],staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-8"},[t("label",[a._v("Condiciones de pago ")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.condicion_pago,expression:"factura.condicion_pago"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Condiciones de pago"},domProps:{value:a.factura.condicion_pago},on:{input:function(t){t.target.composing||a.$set(a.factura,"condicion_pago",t.target.value)}}})])]),a._v(" "),t("hr"),a._v(" "),t("div",{staticClass:"form-row"},[a._m(4),a._v(" "),t("div",{staticClass:"form-group col-md-1"},[t("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"observa"},on:{change:function(t){return a.observaciones(t)}}})])]),a._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Adenda")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.adenda,expression:"factura.adenda"}],staticClass:"form-control",attrs:{type:"text",id:"adenda",disabled:""},domProps:{value:a.factura.adenda},on:{input:function(t){t.target.composing||a.$set(a.factura,"adenda",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Proveedor")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.proveeade,expression:"factura.proveeade"}],staticClass:"form-control",attrs:{type:"text",id:"proveeade",disabled:""},domProps:{value:a.factura.proveeade},on:{input:function(t){t.target.composing||a.$set(a.factura,"proveeade",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("No. Recepción")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.clave_ob,expression:"factura.clave_ob"}],staticClass:"form-control",attrs:{type:"text",id:"clave_ob",disabled:""},domProps:{value:a.factura.clave_ob},on:{input:function(t){t.target.composing||a.$set(a.factura,"clave_ob",t.target.value)}}})]),a._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",[a._v("Orden de compra")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.orden_ob,expression:"factura.orden_ob"}],staticClass:"form-control",attrs:{type:"text",id:"orden_ob",disabled:""},domProps:{value:a.factura.orden_ob},on:{input:function(t){t.target.composing||a.$set(a.factura,"orden_ob",t.target.value)}}})])]),a._v(" "),t("hr"),a._v(" "),t("div",{staticClass:"form-row"},[a._m(5),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("div",{staticClass:"form-check"},[t("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"gridRadios",id:"gridRadios1"},on:{click:a.nacional}}),a._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"gridRadios1"}},[a._v("\n                                            Nacional\n                                        ")])])]),a._v(" "),t("div",{staticClass:"form-group col-md-2"},[t("div",{staticClass:"form-check"},[t("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"gridRadios",id:"gridRadios2"},on:{click:a.extranjero}}),a._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"gridRadios2"}},[a._v("\n                                            Extranjero\n                                        ")])])]),a._v(" "),a._m(6),a._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.factura.taxid,expression:"factura.taxid"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tax Id",disabled:1==a.desabilitartax},domProps:{value:a.factura.taxid},on:{input:function(t){t.target.composing||a.$set(a.factura,"taxid",t.target.value)}}})])]),a._v(" "),t("hr")],2)]),a._v(" "),t("div",{staticClass:"modal-footer"},[t("vue-element-loading",{attrs:{active:a.isLoading}}),a._v(" "),t("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(t){return a.cerrarModal()}}},[t("i",{staticClass:"fas fa-times"}),a._v("Cerrar")]),a._v(" "),1==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardar(1)}}},[t("i",{staticClass:"fas fa-save"}),a._v("Guardar")]):a._e(),a._v(" "),2==a.tipoAccion?t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return a.guardar(0)}}},[t("i",{staticClass:"fas fa-save"}),a._v("Actualizar")]):a._e()],1)])])])])])}),[function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-2"},[a("label",[this._v("Tipo:")])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-5"},[a("label",[a("b",[this._v("UUID")])])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-1"},[a("label",[a("b",[this._v("ACCIONES")])])])},function(){var a=this._self._c;return a("div",{staticClass:"input-group-addon"},[a("div",{staticClass:"input-group-text"},[this._v("$")])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-2"},[a("label",[this._v("Observaciones")])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-2"},[a("label",[this._v("Tipo:")])])},function(){var a=this._self._c;return a("div",{staticClass:"form-group col-md-1"},[a("label",[this._v("Tax Id: ")])])}],!1,null,null,null).exports}}]);
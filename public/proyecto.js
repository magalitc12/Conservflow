webpackJsonp([10],{"00Zj":function(t,e){t.exports=function(){return{dateColumns:[],listColumns:{},datepickerOptions:{locale:{cancelLabel:"Clear"}},datepickerPerColumnOptions:{},initialPage:1,perPage:10,perPageValues:[10,25,50,100],groupBy:!1,collapseGroups:!1,destroyEventBus:!1,sendEmptyFilters:!1,params:{},sortable:!0,filterable:!0,groupMeta:[],initFilters:{},customFilters:[],templates:{},debounce:250,dateFormat:"DD/MM/YYYY",dateFormatPerColumn:{},toMomentFormat:!1,skin:"table table-striped table-bordered table-hover table-sm",skinBusqueda:"table table-striped table-bordered table-hover table-sm busqueda",columnsDisplay:{},columnsDropdown:!1,texts:{count:"Mostrando del {from} al  {to} de {count} registros|{count} registros|Un registro",first:"Primero",last:"Ultimo",filter:"Buscar:",filterPlaceholder:"Buscar...",limit:"Registros:",page:"Pagina:",noResults:"No se encontraron registros",filterBy:"Filtrar por {column}",loading:"Cargando...",defaultOption:"Seleccionar {column}",columns:"Columnas"},sortIcon:{base:"fa",up:"fa-chevron-up",down:"fa-chevron-down",is:"fa-sort"},sortingAlgorithm:function(t,e){return t.sort(this.getSortFn(e))},customSorting:{},multiSorting:{},clientMultiSorting:!0,serverMultiSorting:!1,filterByColumn:!1,highlightMatches:!1,orderBy:!1,descOrderColumns:[],footerHeadings:!1,headings:{},headingsTooltips:{},pagination:{dropdown:!1,chunk:10,edge:!1,align:"center",nav:"fixed"},childRow:!1,childRowTogglerFirst:!0,uniqueKey:"id",requestFunction:!1,requestAdapter:function(t){return t},responseAdapter:function(t){var e=this.getResponseData(t);return{data:e.data,count:e.count}},requestKeys:{query:"query",limit:"limit",orderBy:"orderBy",ascending:"ascending",page:"page",byColumn:"byColumn"},rowClassCallback:!1,preserveState:!1,saveState:!1,storage:"local",columnsClasses:{},columnCondicion:[{id:1,text:"Activo"},{id:0,text:"Desactivado"}]}}},"0PJZ":function(t,e,a){var i=a("54Fm");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("2c780a56",i,!0,{})},"0w4F":function(t,e,a){var i=a("VU/8")(a("nDCU"),a("BxhM"),!1,function(t){a("0PJZ")},null,null);t.exports=i.exports},"3QPT":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",class:{mostrar:t.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),a("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.tituloModal)}}),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModal()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("input",{attrs:{type:"hidden",name:"id"}}),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"folio"}},[t._v("Folio")]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.requisicion.folio,expression:"requisicion.folio"}],staticClass:"form-control",attrs:{type:"text",name:"folio","data-vv-name":"folio",placeholder:"Folio",autocomplete:"off",id:"folio",readonly:""},domProps:{value:t.requisicion.folio},on:{input:function(e){e.target.composing||t.$set(t.requisicion,"folio",e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("folio")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"area_solicita_id"}},[t._v("Área Solicitante")]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.requisicion.area_solicita_id,expression:"requisicion.area_solicita_id"}],staticClass:"form-control",attrs:{id:"area_solicita_id",name:"area_solicita_id","data-vv-name":"área solicitante"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.requisicion,"area_solicita_id",e.target.multiple?a:a[0])}}},t._l(t.listaAreasSol,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.nombre)+" ")])}),0),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("área solicitante")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"fecha_solicitud"}},[t._v("Fecha Solicitud")]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.requisicion.fecha_solicitud,expression:"requisicion.fecha_solicitud"}],staticClass:"form-control",attrs:{type:"date",name:"fecha_solicitud",placeholder:"Fecha",autocomplete:"off","data-vv-name":"fecha solicitud",id:"fecha_solicitud"},domProps:{value:t.requisicion.fecha_solicitud},on:{input:function(e){e.target.composing||t.$set(t.requisicion,"fecha_solicitud",e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("fecha solicitud")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"descripcion_uso"}},[t._v("Descripcion de uso")]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.requisicion.descripcion_uso,expression:"requisicion.descripcion_uso"}],staticClass:"form-control",attrs:{type:"text",name:"descripcion_uso",placeholder:"Uso",autocomplete:"off","data-vv-name":"descripcion uso",id:"descripción uso"},domProps:{value:t.requisicion.descripcion_uso},on:{input:function(e){e.target.composing||t.$set(t.requisicion,"descripcion_uso",e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("descripcion uso")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"tipo_compra"}},[t._v("Tipo de Compra")]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.requisicion.tipo_compra,expression:"requisicion.tipo_compra"}],staticClass:"form-control",attrs:{id:"tipo_compra",name:"tipo_compra","data-vv-name":"tipo de compra"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.requisicion,"tipo_compra",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("Programada")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Inmediata")])]),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("tipo de compra")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"proyecto_id"}},[t._v("Proyecto")]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:!t.isEnabled,id:"proyecto",label:"nombre_corto",name:"proyecto",options:t.listaProyecto},model:{value:t.proyecto,callback:function(e){t.proyecto=e},expression:"proyecto"}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("proyecto")))])],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"solicita_empleado_id"}},[t._v("Solicitado por")]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{options:t.optionsvs,id:"solicita_empleado_id",name:"solicita_empleado_id",label:"name","data-vv-name":"empleado que solicita"},model:{value:t.requisicion.solicita_empleado_id,callback:function(e){t.$set(t.requisicion,"solicita_empleado_id",e)},expression:"requisicion.solicita_empleado_id"}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("empleado que solicita")))])],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"valida_empleado_id"}},[t._v("Revisado por")]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{options:t.optionsvs,id:"valida_empleado_id",name:"valida_empleado_id",label:"name","data-vv-name":"empleado que valida"},model:{value:t.requisicion.valida_empleado_id,callback:function(e){t.$set(t.requisicion,"valida_empleado_id",e)},expression:"requisicion.valida_empleado_id"}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("validado por")))])],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"autoriza_empleado_id"}},[t._v("Autorizado por ")]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{options:t.optionsvs,id:"autoriza_empleado_id",name:"autoriza_empleado_id",label:"name","data-vv-name":"empleado que autoriza"},model:{value:t.requisicion.autoriza_empleado_id,callback:function(e){t.$set(t.requisicion,"autoriza_empleado_id",e)},expression:"requisicion.autoriza_empleado_id"}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("empleado que autoriza")))])],1)])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.cerrarModal()}}},[a("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")]),t._v(" "),1==t.tipoAccion?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardarRequisicion(1)}}},[a("i",{staticClass:"fas fa-save"}),t._v(" Guardar")]):t._e(),t._v(" "),2==t.tipoAccion?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardarRequisicion(0)}}},[a("i",{staticClass:"fas fa-save"}),t._v(" Actualizar")]):t._e()])])])])],1)])},staticRenderFns:[]}},"4Q6J":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"main"},[a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.detalle,expression:"!detalle"}],staticClass:"card"},[a("div",{staticClass:"card-header"},[a("i",{staticClass:"fa fa-align-justify"}),t._v(" Requisiciones\r\n                "),a("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(e){return t.abrirModal("requisicion","registrar")}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Nuevo\r\n                ")])]),t._v(" "),a("div",{staticClass:"card-body"},[a("v-client-table",{ref:"myTable",attrs:{columns:t.columns,data:t.tableData,options:t.options},scopedSlots:t._u([{key:"condicion",fn:function(e){return[1==e.row.condicion?[a("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"}},[t._v("Activo")])]:t._e(),t._v(" "),0==e.row.condicion?[a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"}},[t._v("Terminado")])]:t._e(),t._v(" "),2==e.row.condicion?[a("button",{staticClass:"btn btn-outline-warning",attrs:{type:"button"}},[t._v("Pausa")])]:t._e(),t._v(" "),3==e.row.condicion?[a("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"}},[t._v("Rechazado")])]:t._e()]}},{key:"id",fn:function(e){return[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[a("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-grip-horizontal"}),t._v("  Acciones\r\n                                ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(a){return t.verrequisiciones(e.row.id)}}},[a("i",{staticClass:"fas fa-eye"}),t._v("  Ver requisiciones\r\n                                    ")])])])])]}}])})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.detalle,expression:"detalle"}]},[a("requisiciones",{ref:"requisiciones",on:{"requisiciones:click":t.maestro}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}]},[a("modal",{ref:"modal",on:{"modal:nuevo":function(e){return t.verrequisiciones(e)}}})],1)])])},staticRenderFns:[]}},"54Fm":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".btn-greg{color:#fff;background-color:#2095d8;border-color:#2095d8}.modal-el{max-width:1200px}",""])},"5ZcS":function(t,e,a){var i=a("e7k8");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("c6883e86",i,!0,{})},"7v1/":function(t,e,a){var i=a("VU/8")(a("rZ8E"),a("TFM7"),!1,function(t){a("PeLh")},"data-v-659562ee",null);t.exports=i.exports},AHJP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dlh+");function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r=a("00Zj").call(this);e.default={data:function(){var t;return o(t={PermisosCrud:{},url:"/requisicion",detallerequisiciones:!1,principal:null,modal:!1,doc_req:[],optionsvs:[],widgets:{detallerequisiciones:!1},requisicion:{id:0,folio:"",area_solicita_id:"",formato_requisiciones:"",fecha_solicitud:"",descripcion_uso:"",tipo_compra:"",proyecto_id:0,estado_id:0,solicita_empleado_id:"",autoriza_empleado_id:"",valida_empleado_id:"",recibe_empleado_id:"",condicion:0,Area:""},listaEmpleados:[],listaAreasSol:[],listaProyecto:[]},"modal",0),o(t,"tituloModal",""),o(t,"tipoAccion",0),o(t,"tipoAcciondos",1),o(t,"disabled",0),o(t,"isLoading",!1),o(t,"columns",["r.id","r.partida","r.folio","r.p_nombre_corto","r.fecha_solicitud","r.descripcion_uso","r.nombre_empleado_solicita","r.descargar","r.estado_id","r.responsable"]),o(t,"tableData",[]),o(t,"options",{headings:{"r.id":"Acción","r.partida":"Partidas","r.descargar":"Descargar","r.folio":"Folio","r.p_nombre_corto":"Nombre proyecto","r.fecha_solicitud":"Fecha solicitud","r.estado_id":"Estado","r.descripcion_uso":"Descripción","r.nombre_empleado_solicita":"Solicita","r.responsable":"Responsable(s)"},perPage:10,perPageValues:[],skin:r.skin,sortIcon:r.sortIcon,filterByColumn:!0,listColumns:{"r.estado_id":[{id:0,text:"Nuevo"},{id:1,text:"En espera (Validación)"},{id:2,text:"En espera (Autorización)"},{id:3,text:"Autorizado(En Almacén)"},{id:4,text:"No autorizado"},{id:5,text:"Recibido (Compras)"},{id:6,text:"Autorizado(En Compras)"},{id:7,text:"Por Equivalente"},{id:8,text:"En Espera (Calidad)"}]},texts:r.texts}),t},computed:{},components:{detallerequisiciones:function(t){return new Promise(function(t){t()}).then(function(){return t(a("wdrb"))}.bind(null,a)).catch(a.oe)},modal:function(t){return new Promise(function(t){t()}).then(function(){return t(a("cZYB"))}.bind(null,a)).catch(a.oe)}},methods:{grabar:function(t){this.getData(t)},getData:function(t){var e=this;this.PermisosCrud=i.a.getCRUD(this.$route.path),e.isLoading=!0,e.principal=t,axios.get("/requisicion/"+t).then(function(t){e.tableData=t.data,e.isLoading=!1}).catch(function(t){console.log(t)})},actdesact:function(t,e){var a=this;e?(this.swal_titulo="Esta seguro de activar esta requisición?",this.swal_tle="Activado",this.swal_msg="El registro ha sido activado con éxito."):(this.swal_titulo="Esta seguro de desactivar esta requisición?",this.swal_tle="Desactivado!",this.swal_msg="El registro ha sido desactivado con éxito."),swal({title:this.swal_titulo,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar!",cancelButtonText:"Cancelar",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1,reverseButtons:!0}).then(function(i){if(i.value){var o=a;axios.get(o.url+"/"+t+"/edit").then(function(t){e?toastr.success(o.swal_tle,o.swal_msg,"success"):toastr.error(o.swal_tle,o.swal_msg,"error"),o.getData(o.principal)}).catch(function(t){console.log(t)})}else i.dismiss,swal.DismissReason.cancel})},cerrarModal:function(){this.modal=0,this.tituloModal="",i.a.resetObject(this.requisicion)},abrirModal:function(t,e,a){this.modal=!0,this.$refs.modal.abrirModal(t,e,a)},cargardetalle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.widgets.detallerequisiciones=!0,this.$refs.detallerequisiciones.cargardetalle(t),this.detallerequisiciones=!0},maestro:function(){this.widgets.detallerequisiciones=!1,this.detallerequisiciones=!1,this.tipoAccionpr=0,this.isLoading=!1},cancelar:function(){this.tipoAccionpr=0},abrirBusquedaArticulo:function(){this.tipoAccionpr=1,this.modal=1},descargar:function(t){window.open("descargar-requisicion/"+t.id,"_blank")},descargarnew:function(t){window.open("descargar-requisicionew/"+t.id,"_blank");this.getData(t.proyecto_id)},subirFormato:function(t){var e=this;swal({title:"Requisición Firmada",input:"file",inputAttributes:{accept:"application/pdf","aria-label":"Upload your profile picture"},confirmButtonText:"Subir Archivo",showCancelButton:!0,inputValidator:function(t){return!t&&"Este Campo no puede estar Vacío"}}).then(function(a){var i=e;if(a.value){var o=new FormData;o.append("identificador",1),o.append("adjunto",a.value),o.append("proyecto_id",t.proyecto_id),o.append("id",t.id),axios.post(i.url,o).then(function(t){t.data.status?(toastr.success("Archivo Subido Correctamente"),i.getData(i.principal)):swal({type:"error",html:t.data.errors.join("<br>")})}).catch(function(t){console.log(t)})}else a.dismiss,swal.DismissReason.cancel})},cerrarRequisicion:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];swal({title:"Esta seguro de cerrar la requisición?",type:"warning",showCancelButton:!0,confirmButtonColor:"#4dbd74",cancelButtonColor:"#f86c6b",confirmButtonText:"Aceptar!",cancelButtonText:"Cancelar",reverseButtons:!0}).then(function(a){if(a.value){var i=t;axios.get("/vercantidadpartidas/"+e.id).then(function(t){0==t.data.length?toastr.warning("Atención","Esta requisición no puede se cerrada hasta tener artículos registrados"):axios.get("/finalizarequisicion/"+e.id).then(function(t){toastr.success("Correcto","Requisición cerrada correctamente"),i.getData(i.principal)}).catch(function(t){console.error(t)})}).catch(function(t){console.error(t)})}})},maestroInicial:function(){this.$emit("requisiciones:click")},vercomentarios:function(t){swal(t)}},mounted:function(){}}},AWFs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("dlh+");var i=a("00Zj").call(this);e.default={data:function(){return{detalle:!1,modal:!1,columns:["id","nombre_corto","clave","ciudad","fecha_inicio","fecha_fin","condicion"],tableData:[],options:{headings:{id:"Acciones",nombre:"Nombre",nombre_corto:"Nombre corto",clave:"Ord Comp",ciudad:"Ciudad",fecha_inicio:"F. Inicio",fecha_fin:"F. Fin",condicion:"Condición",updated_at:"Ultima Actualización"},perPage:10,perPageValues:[],skin:i.skin,sortIcon:i.sortIcon,sortable:["nombre","nombre_corto","clave","ciudad","fecha_inicio","fecha_fin","condicion"],filterable:["nombre","nombre_corto","clave","ciudad","fecha_inicio","fecha_fin","condicion"],filterByColumn:!0,texts:i.texts}}},components:{requisiciones:function(t){return new Promise(function(t){t()}).then(function(){return t(a("nHk0"))}.bind(null,a)).catch(a.oe)},modal:function(t){return new Promise(function(t){t()}).then(function(){return t(a("cZYB"))}.bind(null,a)).catch(a.oe)}},methods:{getData:function(){var t=this;axios.get("/proyecto-listar").then(function(e){t.tableData=e.data}).catch(function(t){console.log(t)})},verrequisiciones:function(t){this.detalle=!0,this.$refs.requisiciones.getData(t)},maestro:function(){this.detalle=!1},abrirModal:function(t,e){this.modal=!0,this.$refs.modal.abrirModal(t,e)},cerrarModalNuevo:function(){this.getData(),this.modal=!1}},mounted:function(){this.getData()}}},BxhM:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"main"},[a("div",{},[a("div",{staticClass:"card",staticStyle:{"min-height":"60vh"}},[a("div",{staticClass:"card-header"},[a("i",{staticClass:"fa fa-align-justify"}),t._v(" Proyectos\r\n                "),t.PermisosCrud.Create?a("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(e){return t.abrirModal(["proyecto","registrar"])}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Nuevo\r\n                ")]):t._e(),t._v(" "),t.PermisosCrud.Download?a("button",{staticClass:"btn btn-dark float-sm-right mr-1",attrs:{type:"button"},on:{click:t.Descargar}},[a("i",{staticClass:"fas fa-download"}),t._v(" Descargar\r\n                ")]):t._e()]),t._v(" "),a("div",{staticClass:"card-body"},[a("vue-element-loading",{attrs:{active:t.isProyectos_loading}}),t._v(" "),a("v-client-table",{ref:"myTable",attrs:{columns:t.columns,data:t.tableData,options:t.options},scopedSlots:t._u([{key:"condicion",fn:function(e){return[1==e.row.condicion?[a("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"}},[t._v("Activo")])]:t._e(),t._v(" "),0==e.row.condicion?[a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"}},[t._v("Terminado")])]:t._e(),t._v(" "),2==e.row.condicion?[a("button",{staticClass:"btn btn-outline-warning",attrs:{type:"button"}},[t._v("Pausa")])]:t._e(),t._v(" "),3==e.row.condicion?[a("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"}},[t._v("Rechazado")])]:t._e()]}},{key:"adicional",fn:function(e){return[0==e.row.adicional?[a("button",{staticClass:"btn btn-find",attrs:{type:"button","data-toggle":"tooltip","data-placement":"top",title:e.row}},[t._v("\r\n                                Principal\r\n                            ")])]:t._e(),t._v(" "),1==e.row.adicional?[a("button",{staticClass:"btn btn-greg",attrs:{type:"button","data-toggle":"tooltip","data-placement":"top",title:e.row}},[t._v("\r\n                                Adicional\r\n                            ")])]:t._e()]}},{key:"id",fn:function(e){return[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[a("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-grip-horizontal"}),t._v("  Acciones\r\n                                ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[a("button",{directives:[{name:"show",rawName:"v-show",value:t.PermisosCrud.Upload,expression:"PermisosCrud.Upload"}],staticClass:"dropdown-item",on:{click:function(a){return t.subirDocumento(e.row,1)}}},[a("i",{staticClass:"fas fa-file-upload"}),t._v(" Subir Documento P.O.\r\n                                    ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.PermisosCrud.Download,expression:"PermisosCrud.Download"}],staticClass:"dropdown-item",on:{click:function(a){return t.abrirModalPDF(e.row.id)}}},[a("i",{staticClass:"fas fa-eye"}),t._v(" Visualizar Documento P.O.\r\n                                    ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.PermisosCrud.Update,expression:"PermisosCrud.Update"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(a){return t.abrirModal(["proyecto","actualizar",e.row])}}},[a("i",{staticClass:"icon-pencil"}),t._v("  Actualizar\r\n                                    ")]),t._v(" "),1==e.row.condicion?[a("button",{directives:[{name:"show",rawName:"v-show",value:t.PermisosCrud.Delete,expression:"PermisosCrud.Delete"}],staticClass:"dropdown-item",on:{click:function(a){return t.actdesact(e.row.id,0)}}},[a("i",{staticClass:"fas fa-flag"}),t._v("  Terminar\r\n                                        ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.PermisosCrud.Read,expression:"PermisosCrud.Read"}],staticClass:"dropdown-item",on:{click:function(a){return t.pausar(e.row.id)}}},[a("i",{staticClass:"fas fa-pause"}),t._v("  Pausar\r\n                                        ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.PermisosCrud.Delete,expression:"PermisosCrud.Delete"}],staticClass:"dropdown-item",on:{click:function(a){return t.rechazar(e.row.id)}}},[a("i",{staticClass:"fas fa-backspace"}),t._v("  Rechazar\r\n                                        ")])]:[a("button",{staticClass:"dropdown-item",on:{click:function(a){return t.actdesact(e.row.id,1)}}},[a("i",{staticClass:"icon-check"}),t._v("  Activar\r\n                                        ")])]],2)])])]}},{key:"folio",fn:function(e){return[null==e.row.folio?a("p",[t._v("N/D")]):a("p",[t._v(t._s(e.row.folio))])]}},{key:"total_oc",fn:function(e){return[[a("button",{staticClass:"btn btn-outline-dark btn-sm"},[t._v(t._s(e.row.total_oc))])]]}},{key:"total_req",fn:function(e){return[[a("button",{staticClass:"btn btn-outline-dark btn-sm"},[t._v(t._s(e.row.total_req))])]]}}])})],1)])]),t._v(" "),a("div",{staticClass:"modal fade",class:{mostrar:t.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.tituloModal)}}),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModal()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("X")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",{staticClass:"form-horizontal",attrs:{action:"",method:"post",enctype:"multipart/form-data"}},[1==t.tipoAccion?a("div",{staticClass:"form"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Nombre real del Proyecto")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:300",expression:"'required|max:300'"},{name:"model",rawName:"v-model",value:t.nombre,expression:"nombre"}],staticClass:"form-control",attrs:{type:"text",name:"nombre",placeholder:"Nombre",rows:"4",cols:"80",autocomplete:"off"},domProps:{value:t.nombre},on:{input:function(e){e.target.composing||(t.nombre=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("nombre")))])])]),t._v(" "),t.deshabilitar?[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Número de Cotización")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:30",expression:"'required|max:30'"},{name:"model",rawName:"v-model",value:t.cotizacion,expression:"cotizacion"}],staticClass:"form-control",attrs:{type:"text",name:"cotizacion",placeholder:"Número de Cotización"},domProps:{value:t.cotizacion},on:{input:function(e){e.target.composing||(t.cotizacion=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("cotizacion")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Número de Orden de Compra")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:30",expression:"'required|max:30'"},{name:"model",rawName:"v-model",value:t.clave,expression:"clave"}],staticClass:"form-control",attrs:{type:"text",name:"no_oc",placeholder:"Número de Orden de Compra"},domProps:{value:t.clave},on:{input:function(e){e.target.composing||(t.clave=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("no_oc")))])]),t._v(" "),a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Monto Total de la Orden Compra")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:14|decimal:2",expression:"'required|max:14|decimal:2'"},{name:"model",rawName:"v-model",value:t.monto_total,expression:"monto_total"}],staticClass:"form-control",attrs:{type:"text",name:"monto_total",placeholder:"Monto Total de la Orden de Compra"},domProps:{value:t.monto_total},on:{input:function(e){e.target.composing||(t.monto_total=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("monto_total")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Moneda")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.moneda,expression:"moneda"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.moneda=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"BRL"}},[t._v("BRL - Real Brasileño")]),t._v(" "),a("option",{attrs:{value:"EUR"}},[t._v("EUR - EURO")]),t._v(" "),a("option",{attrs:{value:"MXN"}},[t._v("MXN - Peso Mexicano")]),t._v(" "),a("option",{attrs:{value:"USD"}},[t._v("USD - Dolar")])])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Nombre corto del Proyecto")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:40",expression:"'required|max:40'"},{name:"model",rawName:"v-model",value:t.nombre_corto,expression:"nombre_corto"}],staticClass:"form-control",attrs:{type:"text",name:"nombre_corto",placeholder:"Nombre para las Ordenes de Compra",rows:"4",cols:"80"},domProps:{value:t.nombre_corto},on:{input:function(e){e.target.composing||(t.nombre_corto=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("nombre_corto")))])]),t._v(" "),a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Ciudad")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:125",expression:"'required|max:125'"},{name:"model",rawName:"v-model",value:t.ciudad,expression:"ciudad"}],staticClass:"form-control",attrs:{type:"text",name:"ciudad",placeholder:"Ciudad"},domProps:{value:t.ciudad},on:{input:function(e){e.target.composing||(t.ciudad=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("ciudad")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Fecha Inicio")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.fecha_inicio,expression:"fecha_inicio"}],staticClass:"form-control",attrs:{type:"date",name:"fecha_inicio",placeholder:"Fecha de inicio"},domProps:{value:t.fecha_inicio},on:{input:function(e){e.target.composing||(t.fecha_inicio=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("fecha_inicio")))])]),t._v(" "),a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Fecha Fin")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.fecha_fin,expression:"fecha_fin"}],staticClass:"form-control",attrs:{type:"date",name:"fecha_fin",placeholder:"Fecha de finalización"},domProps:{value:t.fecha_fin},on:{change:t.validar,input:function(e){e.target.composing||(t.fecha_fin=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("fecha_fin")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Subcategoria")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.subcategoria_id,expression:"subcategoria_id"},{name:"validate",rawName:"v-validate",value:"excluded:0",expression:"'excluded:0'"}],staticClass:"form-control",attrs:{id:"subcategoria_id",name:"subcategoria_id","data-vv-as":"Subcategoria"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.subcategoria_id=e.target.multiple?a:a[0]}}},t._l(t.listaSubcategorias,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.nombre)+" ")])}),0),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("subcategoria_id")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Cliente")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.cliente_id,expression:"cliente_id"},{name:"validate",rawName:"v-validate",value:"excluded:0",expression:"'excluded:0'"}],staticClass:"form-control",attrs:{id:"cliente_id",name:"cliente_id","data-vv-as":"Cliente"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.cliente_id=e.target.multiple?a:a[0]}}},t._l(t.listaClientes,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.nombre)+" ")])}),0),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("cliente_id")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("PM Cliente")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:250",expression:"'required|max:250'"},{name:"model",rawName:"v-model",value:t.pm_cliente,expression:"pm_cliente"}],staticClass:"form-control",attrs:{type:"text",name:"pm_cliente",placeholder:"PM Cliente"},domProps:{value:t.pm_cliente},on:{input:function(e){e.target.composing||(t.pm_cliente=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("pm_cliente")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("PM Interno")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:250",expression:"'required|max:250'"},{name:"model",rawName:"v-model",value:t.pm_interno,expression:"pm_interno"}],staticClass:"form-control",attrs:{type:"text",name:"pm_interno",placeholder:"PM Interno"},domProps:{value:t.pm_interno},on:{input:function(e){e.target.composing||(t.pm_interno=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("pm_interno")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Asignar")]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adicional,expression:"adicional"}],staticClass:"form-control form-check-input",attrs:{type:"checkbox",id:"adicional"},domProps:{checked:Array.isArray(t.adicional)?t._i(t.adicional,null)>-1:t.adicional},on:{change:function(e){var a=t.adicional,i=e.target,o=!!i.checked;if(Array.isArray(a)){var r=t._i(a,null);i.checked?r<0&&(t.adicional=a.concat([null])):r>-1&&(t.adicional=a.slice(0,r).concat(a.slice(r+1)))}else t.adicional=o}}})]),t._v(" "),a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Proyecto Principal")]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.proyecto_id,expression:"proyecto_id"}],staticClass:"form-control",attrs:{id:"proyecto_id",name:"proyecto_id","data-vv-name":"Proyecto",disabled:!t.adicional},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.proyecto_id=e.target.multiple?a:a[0]}}},t._l(t.listarProyAgrp,function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.nombre)+" ")])}),0)])])]:t._e()],2):t._e(),t._v(" "),2==t.tipoAccion?a("div",{staticClass:"form"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"text-input"}}),t._v(" "),a("div",{staticClass:"col-md-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],staticClass:"form-control",attrs:{type:"hidden"},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Nombre")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nombre,expression:"nombre"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Nombre",rows:"4",cols:"80"},domProps:{value:t.nombre},on:{input:function(e){e.target.composing||(t.nombre=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("nombre")))])]),t._v(" "),a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Orden compra")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:30",expression:"'required|max:30'"},{name:"model",rawName:"v-model",value:t.clave,expression:"clave"}],staticClass:"form-control",attrs:{type:"text",name:"oc",placeholder:"Orden compra"},domProps:{value:t.clave},on:{input:function(e){e.target.composing||(t.clave=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("oc")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Número de Cotización")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:30",expression:"'required|max:30'"},{name:"model",rawName:"v-model",value:t.cotizacion,expression:"cotizacion"}],staticClass:"form-control",attrs:{type:"text",name:"cotizacion",placeholder:"Número de Cotización"},domProps:{value:t.cotizacion},on:{input:function(e){e.target.composing||(t.cotizacion=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("cotizacion")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Monto Total de la Orden Compra")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:14|decimal:2",expression:"'required|max:14|decimal:2'"},{name:"model",rawName:"v-model",value:t.monto_total,expression:"monto_total"}],staticClass:"form-control",attrs:{type:"text",name:"monto_total",placeholder:"Monto Total"},domProps:{value:t.monto_total},on:{input:function(e){e.target.composing||(t.monto_total=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("monto_total")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Moneda")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.moneda,expression:"moneda"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.moneda=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"BRL"}},[t._v("BRL - Real Brasileño")]),t._v(" "),a("option",{attrs:{value:"EUR"}},[t._v("EUR - EURO")]),t._v(" "),a("option",{attrs:{value:"MXN"}},[t._v("MXN - Peso Mexicano")]),t._v(" "),a("option",{attrs:{value:"USD"}},[t._v("USD - Dolar")])]),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("moneda")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Nombre Folio")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.nombre_corto,expression:"nombre_corto"}],staticClass:"form-control",attrs:{disabled:t.actualizar,name:"name",placeholder:"FOLIO CORTO",rows:"4",cols:"80"},domProps:{value:t.nombre_corto},on:{input:function(e){e.target.composing||(t.nombre_corto=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("nombre_corto")))])]),t._v(" "),a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Ciudad")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:125",expression:"'required|max:125'"},{name:"model",rawName:"v-model",value:t.ciudad,expression:"ciudad"}],staticClass:"form-control",attrs:{type:"text",name:"ciudad",placeholder:"Ciudad"},domProps:{value:t.ciudad},on:{input:function(e){e.target.composing||(t.ciudad=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("ciudad")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Fecha Inicio")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.fecha_inicio,expression:"fecha_inicio"}],staticClass:"form-control",attrs:{type:"date",name:"fecha_inicio",placeholder:"Fecha de inicio"},domProps:{value:t.fecha_inicio},on:{input:function(e){e.target.composing||(t.fecha_inicio=e.target.value)}}})]),t._v(" "),a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Fecha Fin")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.fecha_fin,expression:"fecha_fin"}],staticClass:"form-control",attrs:{type:"date",name:"fecha_fin",placeholder:"Fecha de finalización"},domProps:{value:t.fecha_fin},on:{change:t.validar,input:function(e){e.target.composing||(t.fecha_fin=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Subcategoria")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.subcategoria_id,expression:"subcategoria_id"},{name:"validate",rawName:"v-validate",value:"excluded:0",expression:"'excluded:0'"}],staticClass:"form-control",attrs:{id:"subcategoria_id",name:"subcategoria_id","data-vv-as":"Subcategoria"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.subcategoria_id=e.target.multiple?a:a[0]}}},t._l(t.listaSubcategorias,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.nombre)+" ")])}),0),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("subcategoria_id")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Cliente")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.cliente_id,expression:"cliente_id"},{name:"validate",rawName:"v-validate",value:"excluded:0",expression:"'excluded:0'"}],staticClass:"form-control",attrs:{id:"cliente_id",name:"cliente_id","data-vv-as":"Cliente"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.cliente_id=e.target.multiple?a:a[0]}}},t._l(t.listaClientes,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.nombre)+" ")])}),0),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("cliente_id")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("PM Cliente")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:250",expression:"'required|max:250'"},{name:"model",rawName:"v-model",value:t.pm_cliente,expression:"pm_cliente"}],staticClass:"form-control",attrs:{type:"text",name:"pm_cliente",placeholder:"PM Cliente"},domProps:{value:t.pm_cliente},on:{input:function(e){e.target.composing||(t.pm_cliente=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("pm_cliente")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("PM Interno")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:250",expression:"'required|max:250'"},{name:"model",rawName:"v-model",value:t.pm_interno,expression:"pm_interno"}],staticClass:"form-control",attrs:{type:"text",name:"pm_interno",placeholder:"PM Interno"},domProps:{value:t.pm_interno},on:{input:function(e){e.target.composing||(t.pm_interno=e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("pm_interno")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Proyecto Principal")]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adicional,expression:"adicional"}],staticClass:"form-control form-check-input",attrs:{type:"checkbox",id:"adicional"},domProps:{checked:Array.isArray(t.adicional)?t._i(t.adicional,null)>-1:t.adicional},on:{change:function(e){var a=t.adicional,i=e.target,o=!!i.checked;if(Array.isArray(a)){var r=t._i(a,null);i.checked?r<0&&(t.adicional=a.concat([null])):r>-1&&(t.adicional=a.slice(0,r).concat(a.slice(r+1)))}else t.adicional=o}}})]),t._v(" "),a("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Proyecto")]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.proyecto_id,expression:"proyecto_id"}],staticClass:"form-control",attrs:{id:"proyecto_id",name:"proyecto_id","data-vv-name":"Proyecto",disabled:!t.adicional},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.proyecto_id=e.target.multiple?a:a[0]}}},t._l(t.tableData,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.nombre_corto)+" ")])}),0)])])]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"form-group row div-error"},[a("div",{staticClass:"text-center text-error"},t._l(t.errorMostrarMsj,function(e){return a("div",{key:e,domProps:{textContent:t._s(e)}})}),0)])])]),t._v(" "),t.deshabilitar?[a("div",{staticClass:"modal-footer"},[a("div",[a("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),a("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.cerrarModal()}}},[a("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")]),t._v(" "),1==t.tipoAccion?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.registrar()}}},[a("i",{staticClass:"fas fa-save"}),t._v(" Guardar")]):t._e(),t._v(" "),2==t.tipoAccion?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.actualizar()}}},[a("i",{staticClass:"fas fa-save"}),t._v(" Actualizar")]):t._e()],1)])]:t._e(),t._v(" "),[t.deshabilitar?t._e():a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardarAgrupador()}}},[a("i",{staticClass:"fas fa-save"}),t._v(" Guardar")])])]],2)])]),t._v(" "),a("div",{staticClass:"modal fade",class:{mostrar:t.modalPDF},staticStyle:{display:"none"},attrs:{tabindex:"-1","data-focus-on":"input:first"}},[a("div",{staticClass:"modal-dialog modal-dark modal-el"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("Documento P.O.")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModalPDF()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("X")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-md-4"},[t._m(0),t._v(" "),t._l(t.tableDocumentosProyectos,function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-8"},[a("label",[t._v(t._s(e.documento))])]),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("a",{on:{click:function(a){return t.deleteu(e)}}},[a("span",{staticClass:"fas fa-trash",attrs:{"arial-hidden":"true"}})]),t._v(" "),a("a",{on:{click:function(a){return t.verdocumentos(e)}}},[a("span",{staticClass:"fas fa-eye",attrs:{"arial-hidden":"true"}})])])])])})],2),t._v(" "),a("div",{staticClass:"col-md-8"},[a("iframe",{attrs:{src:this.nombre_archivo,width:"100%",height:"700",frameborder:"0"}})])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.cerrarModalPDF()}}},[t._v("Cerrar")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-8"},[e("label",[e("b",[this._v("Documento")])])]),this._v(" "),e("div",{staticClass:"form-group col-md-4"},[e("label",[e("b",[this._v("ACCIONES")])])])])}]}},D22y:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card"},[a("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),a("div",{staticClass:"card-header"},[a("i",{staticClass:"fa fa-align-justify"}),t._v(" Detalles de requisicion pertenecientes al proyecto: "+t._s(null==t.requisiicion?"":t.requisiicion.p_nombre_corto+" con folio "+t.requisiicion.folio)+"\r\n            "),a("button",{staticClass:"btn btn-secondary float-sm-right",attrs:{type:"button"},on:{click:function(e){return t.maestro()}}},[a("i",{staticClass:"fas fa-arrow-left"}),t._v(" Atras\r\n            ")])]),t._v(" "),a("div",{staticClass:"accordion",attrs:{id:"accordion"}},[a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"collapse",attrs:{id:"collapseTres","aria-labelledby":"headingTres","data-parent":"#accordion"}},[a("v-client-table",{ref:"myTabledescuento",attrs:{columns:t.columnsdetallerequisicion,data:t.tableDatadetallerequisicion,options:t.optionsdetallerequisicion},scopedSlots:t._u([{key:"req.narticulo",fn:function(e){return[null!=e.row.correccion?[a("span",{staticClass:"text-danger"},[t._v(t._s(e.row.req.descripcion)+" "+t._s(e.row.correccion.comentario))])]:[a("span",[t._v(t._s(e.row.req.narticulo))])]]}},{key:"req.equivalente",fn:function(e){return[e.row.req.equivalente?[a("button",{staticClass:"btn btn-success",attrs:{type:"button"}},[t._v("SI")])]:[a("button",{staticClass:"btn btn-danger",attrs:{type:"button"}},[t._v("No")])]]}},{key:"req.articulo_id",fn:function(e){return[a("div",{staticClass:"dropdown2"},[a("button",{staticClass:"dropbtn2"},[a("i",{staticClass:"fas fa-cogs"})]),t._v(" "),a("div",{staticClass:"dropdown-content2"},[a("a",{staticClass:"button2",attrs:{disabled:1==t.requisiicion.estado_id||2==t.requisiicion.estado_id||3==t.requisiicion.estado_id||5==t.requisiicion.estado_id||6==t.requisiicion.estado_id||7==t.requisiicion.estado_id},on:{click:function(a){return t.actdesactreq(e.row.req.pda,t.preq.requisicione_id,0,null,e)}}},[a("i",{staticClass:"far fa-window-close"}),t._v("  Remover")]),t._v(" "),a("a",{staticClass:"button2",attrs:{disabled:1==t.requisiicion.estado_id||2==t.requisiicion.estado_id||3==t.requisiicion.estado_id||5==t.requisiicion.estado_id||6==t.requisiicion.estado_id||7==t.requisiicion.estado_id},on:{click:function(a){return t.abrirModalA("articulo","actualizar",e.row.req.articulo_id,e.row.req)}}},[a("i",{staticClass:"far fa-file-alt"}),t._v("  Actualizar Documentos")]),t._v(" "),a("a",{staticClass:"button2",attrs:{href:"#formulario",disabled:1==t.requisiicion.estado_id||2==t.requisiicion.estado_id||3==t.requisiicion.estado_id||5==t.requisiicion.estado_id||6==t.requisiicion.estado_id||7==t.requisiicion.estado_id},on:{click:function(a){return t.abrirModalA("articulo","actualizar_articulo",0,e.row.req)}}},[a("i",{staticClass:"far fa-edit"}),t._v("  Actualizar")])])])]}}])})],1),t._v(" "),a("div",{staticClass:"collapse",attrs:{id:"collapseCuatro","aria-labelledby":"headingTres","data-parent":"#accordion"}},[a("v-client-table",{ref:"myTabledescuento",attrs:{columns:t.columnsdetallerequisicionServ,data:t.tableDatadetallerequisicionServ,options:t.optionsdetallerequisicionServ},scopedSlots:t._u([{key:"req.nservicio",fn:function(e){return[null!=e.row.correccion?[a("span",{staticClass:"text-danger"},[t._v(t._s(e.row.req.descripcion)+" "+t._s(e.row.correccion.comentario))])]:[a("span",[t._v(t._s(e.row.req.nservicio))])]]}},{key:"req.equivalente",fn:function(e){return[e.row.req.equivalente?[a("button",{staticClass:"btn btn-success"},[t._v("SI")])]:[a("button",{staticClass:"btn btn-danger"},[t._v("NO")])]]}},{key:"req.servicio_id",fn:function(e){return[a("div",{staticClass:"dropdown2"},[a("button",{staticClass:"dropbtn2"},[a("i",{staticClass:"fas fa-cogs"})]),t._v(" "),a("div",{staticClass:"dropdown-content2"},[a("a",{staticClass:"button2",attrs:{type:"button",disabled:1==t.requisiicion.estado_id||2==t.requisiicion.estado_id||3==t.requisiicion.estado_id||5==t.requisiicion.estado_id||6==t.requisiicion.estado_id||7==t.requisiicion.estado_id},on:{click:function(a){return t.actdesactreq(null,t.preq.requisicione_id,0,e.row.req.pda,null)}}},[a("i",{staticClass:"far fa-window-close"}),t._v("  Remover")]),t._v(" "),a("a",{staticClass:"button2",attrs:{type:"button",disabled:1==t.requisiicion.estado_id||2==t.requisiicion.estado_id||3==t.requisiicion.estado_id||5==t.requisiicion.estado_id||6==t.requisiicion.estado_id||7==t.requisiicion.estado_id},on:{click:function(a){return t.abrirModalA("articulo","actualizar",e.row.req.articulo_id,e.row.req)}}},[a("i",{staticClass:"far fa-file-alt"}),t._v("  Actualizar Documentos")]),t._v(" "),a("a",{staticClass:"button2",attrs:{type:"button",disabled:1==t.requisiicion.estado_id||2==t.requisiicion.estado_id||3==t.requisiicion.estado_id||5==t.requisiicion.estado_id||6==t.requisiicion.estado_id||7==t.requisiicion.estado_id,href:"#formulario"},on:{click:function(a){return t.abrirModalA("articulo","actualizar_servicio",0,e.row.req)}}},[a("i",{staticClass:"far fa-edit"}),t._v("  Actualizar")])])])]}}])})],1)])])],1),t._v(" "),a("div",{ref:"formLote",staticClass:"card"},[a("div",{staticClass:"card-header"}),t._v(" "),a("div",{staticClass:"card-body",attrs:{id:"formulario"}},[a("form",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.preq.requisicione_id,expression:"preq.requisicione_id"}],staticClass:"form-control",attrs:{type:"text",id:"requisicione_id",name:"requisicione_id",placeholder:"Articulo",hidden:""},domProps:{value:t.preq.requisicione_id},on:{input:function(e){e.target.composing||t.$set(t.preq,"requisicione_id",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.preq.articulo_id,expression:"preq.articulo_id"}],staticClass:"form-control",attrs:{type:"text",id:"articulo_id",name:"articulo_id",placeholder:"Articulo",hidden:""},domProps:{value:t.preq.articulo_id},on:{input:function(e){e.target.composing||t.$set(t.preq,"articulo_id",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.preq.pda,expression:"preq.pda"}],staticClass:"form-control",attrs:{type:"text",id:"pda",name:"pda",placeholder:"Partida",hidden:""},domProps:{value:t.preq.pda},on:{input:function(e){e.target.composing||t.$set(t.preq,"pda",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.preq.documentacionreid,expression:"preq.documentacionreid"}],staticClass:"form-control",attrs:{type:"text",id:"documentacionreid",name:"documentacionreid",placeholder:"Articulo",hidden:""},domProps:{value:t.preq.documentacionreid},on:{input:function(e){e.target.composing||t.$set(t.preq,"documentacionreid",e.target.value)}}}),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2 form-control-label",attrs:{for:"inputArticulo"}},[t._v("Articulo/Servicio")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.preq.nombrearti,expression:"preq.nombrearti"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Articulo/Servicio",readonly:""},domProps:{value:t.preq.nombrearti},on:{input:function(e){e.target.composing||t.$set(t.preq,"nombrearti",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:null==t.requisiicion?"":1==t.requisiicion.estado_id||2==t.requisiicion.estado_id||3==t.requisiicion.estado_id||5==t.requisiicion.estado_id||7==t.requisiicion.estado_id||2==t.tipoAccionpr},on:{click:function(e){return t.abrirModalA("articulo","registrar",t.preq.requisicione_id)}}},[t._v("Buscar")])])])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2 form-control-label",attrs:{for:"comentario"}},[t._v("Comentario")]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"max:"+t.max_comentarios,expression:"'max:'+max_comentarios"},{name:"model",rawName:"v-model",value:t.preq.comentario,expression:"preq.comentario"}],staticClass:"form-control",attrs:{type:"text",rows:"5",name:"comentario",maxlength:t.max_comentarios,"aria-label":"With textarea",autocomplete:"off",id:"comentario"},domProps:{value:t.preq.comentario},on:{input:function(e){e.target.composing||t.$set(t.preq,"comentario",e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("comentario")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2 form-control-label",attrs:{for:"cantidad"}},[t._v("Cantidad")]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal:2",expression:"'decimal:2'"},{name:"model",rawName:"v-model",value:t.preq.cantidad,expression:"preq.cantidad"}],class:"form-control"+t.clases.cantidades,attrs:{type:"text",name:"cantidad",autocomplete:"off",id:"cantidad",disabled:1==t.validar_pendiente},domProps:{value:t.preq.cantidad},on:{input:function(e){e.target.composing||t.$set(t.preq,"cantidad",e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("cantidad")))])]),t._v(" "),a("label",{staticClass:"col-md-2 form-control-label",attrs:{for:"fecha_requerido"}},[t._v("Fecha Requerida")]),t._v(" "),a("div",{staticClass:"col-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.preq.fecha_requerido,expression:"preq.fecha_requerido"}],class:"form-control"+t.clases.fecharequerido,attrs:{type:"date",name:"fecha_requerido",autocomplete:"off",id:"fecha_requerido"},domProps:{value:t.preq.fecha_requerido},on:{input:function(e){e.target.composing||t.$set(t.preq,"fecha_requerido",e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("fecha_requerido")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2 form-control-label pr-1",attrs:{for:"equivalente"}},[t._v("Equivalente")]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.preq.equivalente,expression:"preq.equivalente"}],staticClass:"form-control",attrs:{id:"equivalente",name:"equivalente","data-vv-name":"equivalente",disabled:1==t.validar_pendiente},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.preq,"equivalente",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("SI")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("NO")])]),t._v(" "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("equivalente")))])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2 form-control-label",attrs:{for:"inputArticulo"}},[t._v("Documentos Requeridos")]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.preq.documentacionre,expression:"preq.documentacionre"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Documentos Requeridos",readonly:""},domProps:{value:t.preq.documentacionre},on:{input:function(e){e.target.composing||t.$set(t.preq,"documentacionre",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:2==t.tipoAccionpr},on:{click:function(e){return t.abrirModalA("articulo","documentos",t.preq.requisicione_id)}}},[t._v("Buscar")])])])])])])]),t._v(" "),a("div",{staticClass:"card-footer"},[a("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.cancelar()}}},[a("i",{staticClass:"fas fa-times"}),t._v(" Cancelar")]),t._v(" "),1==t.tipoAccionpr?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.validarpartida(),t.guardarPR(1,t.preq.requisicione_id)}}},[a("i",{staticClass:"fas fa-save"}),t._v(" Guardar")]):t._e(),t._v(" "),2==t.tipoAccionpr?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardarPR(0,t.preq.pda)}}},[a("i",{staticClass:"fas fa-save"}),t._v(" Actualizar")]):t._e()])]),t._v(" "),a("div",{staticClass:"modal fade",class:{mostrar:t.modaluno},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.tituloModala)}}),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModal()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"accordion",attrs:{id:"accordiondos"}},[a("div",{staticClass:"card"},[t._m(1),t._v(" "),a("div",{staticClass:"collapse",attrs:{id:"collapsecinco","aria-labelledby":"headingUno","data-parent":"#accordiondos"}},[a("v-server-table",{ref:"myTableArticulo",attrs:{url:"/articulo/busqueda",columns:t.columnsa,options:t.optionsa},on:{"row-click":t.seleccionarArticulo2},scopedSlots:t._u([{key:"calidad",fn:function(e){return[null!=e.row.calidad_id?[a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-toggle":"tooltip","data-placement":"top",title:e.row.descal}},[t._v("\r\n                                                    "+t._s(e.row.calidad)+"\r\n                                                ")])]:t._e()]}},{key:"child_row",fn:function(e){return[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[a("div",{staticClass:"btn-group",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-grip-horizontal"}),t._v(" Acciones\r\n                                                    ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(a){return t.abrirModal(e.row)}}},[a("i",{staticClass:"icon-pencil"}),t._v(" Actualizar Articulo\r\n                                                        ")])])])])]}}])})],1),t._v(" "),a("div",{staticClass:"collapse",attrs:{id:"collapseseis","aria-labelledby":"headingDos","data-parent":"#accordiondos"}},[a("v-server-table",{ref:"myTable",attrs:{url:"/catservicio/busqueda",columns:t.columnss,options:t.optionss},on:{"row-click":t.seleccionarServicio}})],1),t._v(" "),a("div",{staticClass:"collapse",attrs:{id:"collapsiete","aria-labelledby":"headingTres","data-parent":"#accordiondos"}},[a("v-server-table",{ref:"myTablePend",attrs:{url:"/catpendiente/busqueda",columns:t.columnsp,options:t.optionsp},on:{"row-click":t.seleccionarPendiente},scopedSlots:t._u([{key:"calidad",fn:function(e){return[null!=e.row.calidad_id?[a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-toggle":"tooltip","data-placement":"top",title:e.row.descal}},[t._v("\r\n                                                    "+t._s(e.row.calidad)+"\r\n                                                ")])]:t._e()]}}])})],1)])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.cerrarModal()}}},[a("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")])])])])])]),t._v(" "),a("div",{staticClass:"modal fade",class:{mostrar:t.modaldos},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.tituloModala)}}),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModal()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("input",{attrs:{type:"hidden",name:"id"}}),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group row"},t._l(t.documentos,function(e,i){return a("div",{key:i,staticClass:"col-md-4"},[a("div",{staticClass:"form-ch eck checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doc_req,expression:"doc_req"}],attrs:{id:e.id,type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.doc_req)?t._i(t.doc_req,e.id)>-1:t.doc_req},on:{change:function(a){var i=t.doc_req,o=a.target,r=!!o.checked;if(Array.isArray(i)){var s=e.id,n=t._i(i,s);o.checked?n<0&&(t.doc_req=i.concat([s])):n>-1&&(t.doc_req=i.slice(0,n).concat(i.slice(n+1)))}else t.doc_req=r}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"doc.id"}},[t._v("\r\n                                            "+t._s(e.nombre.replace("Certificado","Cert."))+"\r\n                                        ")])])])}),0)])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"show",rawName:"v-show",value:1==t.tipoAcciondos,expression:"tipoAcciondos==1"}],staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardardocumentos()}}},[a("i",{staticClass:"fas fa-save"}),t._v(" Guardar")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:0==t.tipoAcciondos,expression:"tipoAcciondos==0"}],staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardardocumentosupdate()}}},[a("i",{staticClass:"fas fa-save"}),t._v(" Actualizar")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.cerrarModal()}}},[a("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header bg-dark justify-content-center",attrs:{id:"headingTres"}},[e("h5",{staticClass:"mb-0"},[e("button",{staticClass:"btn btn-dark collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseCuatro","aria-expanded":"false","aria-controls":"collapseCuatro"}},[e("b",[this._v(" SERVICIOS ")])]),this._v(" "),e("button",{staticClass:"btn btn-dark collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseTres","aria-expanded":"false","aria-controls":"collapseTres"}},[e("b",[this._v(" ARTICULOS")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header bg-dark justify-content-center",attrs:{id:"headingUno"}},[e("h5",{staticClass:"mb-0"},[e("button",{staticClass:"btn btn-dark collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapsecinco","aria-expanded":"false","aria-controls":"collapseTres"}},[e("b",[this._v(" Articulos ")])]),this._v(" "),e("button",{staticClass:"btn btn-dark collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseseis","aria-expanded":"false","aria-controls":"collapseCuatro"}},[e("b",[this._v(" Servicios ")])])])])}]}},KJfb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("00Zj").call(this);e.default={data:function(){return{columns:["id","folio","nombrep","fecha_solicitud","nombre_solicita","descripcion_uso","condicion"],dataTable:[],options:{headings:{id:"Acciones",articulo_descripcion:"Artículo",nombrep:"Proyecto",nombre_solicita:"Empleado que solicita",descripcion_uso:"Uso",condicion:"Validar"},perPage:10,perPageValues:[],skin:i.skin,sortIcon:i.sortIcon,filterByColumn:!0,texts:i.texts},isLoading:!1,solicitudes:[],detalle:!1,nuevo:null,solicitud:[],detalles_ver:!1,detalles_solicitudes:null,tipo_cambio:0,moneda:0,dataTableDetalle:[],columnsDetalle:["req.descripcion","req.cantidades","req.unidad_articulo","req.comentario_partida","req.frequerido"],optionsDetalle:{headings:{"req.descripcion":"Articulo","req.cantidades":"Cantidad","req.unidad_articulo":"Unidad","req.comentario_partida":"Comentario","req.frequerido":"Fecha requerida","req.id":""},perPage:10,perPageValues:[],skin:i.skin,sortIcon:i.sortIcon,filterByColumn:!0,texts:i.texts}}},components:{},methods:{emitirEventoHijo:function(){this.$emit("validarequisicion:change")},getData:function(){this.isLoading=!0;var t=this;axios.get("/requisicionesporvalidar").then(function(e){t.solicitudes=e.data,t.dataTable=e.data,t.isLoading=!1}).catch(function(t){console.log(t)})},cargarequisicion:function(){this.getData()},cargardetalle:function(t){this.isLoading=!0,this.detalles_ver=!0,this.detalle=!0;var e=this;axios.get("/consultadashp/"+t).then(function(t){e.detalles_solicitudes=t.data,e.dataTableDetalle=t.data,e.isLoading=!1}).catch(function(t){console.log(t)})},autorizar:function(t,e){var a=this;swal({title:0!=t?"Esta seguro(a) validar la requisición?":"Esta seguro(a) de rechazar la requisición",type:"warning",showCancelButton:!0,confirmButtonColor:"#4dbd74",cancelButtonColor:"#f86c6b",confirmButtonText:"Aceptar!",cancelButtonText:"Cancelar",reverseButtons:!0}).then(function(i){if(i.value){a.isLoading=!0;var o=a;axios.post("/autorizarequisicionproyectos",{id:e,estado:t}).then(function(t){o.emitirEventoHijo(),8==t.data?toastr.success("Correcto","Requisicion validada !!!"):0==t.data&&toastr.warning("Atención","Requisicion no validada !!!"),o.getData(),o.isLoading=!1}).catch(function(t){console.error(t)})}})},maestro:function(){this.detalles_ver=!1,this.detalle=!1,this.detalles_solicitudes=null}},mounted:function(){}}},"MK/u":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".btn-uno{color:#fff;background-color:#f6a152;border-color:#f6a152;border-radius:2px}.btn-dos{background-color:#e9b443;border-color:#e9b443}.btn-dos,.btn-tres{color:#000;border-radius:2px}.btn-tres{background-color:#8bbbef;border-color:#8bbbef}.btn-cuatro{background-color:#40d0d0;border-color:#40d0d0}.btn-cinco,.btn-cuatro{color:#fff;border-radius:2px}.btn-cinco{background-color:#0d4da3;border-color:#0d4da3}.btn-seis{background-color:#0d98a3;border-color:#0d98a3}.btn-seis,.btn-siete{color:#fff;border-radius:2px}.btn-siete{background-color:#25a30d;border-color:#25a30d}.btn-ocho{color:#fff;background-color:#d04040;border-color:#d04040;border-radius:2px}.btn-nueve{color:#000;background-color:#40d088;border-color:#40d088;border-radius:2px}",""])},OthI:function(t,e,a){var i=a("MK/u");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("7fad2624",i,!0,{})},PK0e:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("time",{staticClass:"cbp_tmtime"},[a("span",{},[t._v(t._s(t.fecha))]),t._v(" "),a("span",[t._v(t._s(t.hora))])]),t._v(" "),a("div",{staticClass:"cbp_tmicon",class:t.color},[a("i",{staticClass:"fas",class:t.icono})]),t._v(" "),a("div",{staticClass:"cbp_tmlabel empty"},[a("h2",[t._v(t._s(t.nombre_estado))]),t._v(" "),a("span",[t._v(t._s(t.descripcion)+" "+t._s(t.responsable))])])])},staticRenderFns:[]}},PU9G:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("dlh+");var i=a("00Zj").call(this);e.default={data:function(){return{id_requisicion:0,isLoading:!1,solicitudes:[],detalle:!1,nuevo:null,solicitud:[],detalles_ver:!1,detalles_solicitudes:null,tipo_cambio:0,moneda:0,columns:["id","folio","nombrep","fecha_solicitud","nombre_solicita","descripcion_uso","condicion"],dataTable:[],options:{headings:{id:"Acciones",articulo_descripcion:"Artículo",nombrep:"Proyecto",nombre_solicita:"Empleado que solicita",descripcion_uso:"Uso",condicion:"Validar"},perPage:10,perPageValues:[],skin:i.skin,sortIcon:i.sortIcon,filterByColumn:!0,texts:i.texts},dataTableDetalle:[],columnsDetalle:["req.descripcion","req.cantidades","req.cantidad_almacen","req.cantidad_compra","req.unidad_articulo","req.comentario_partida","req.frequerido","autorizar"],optionsDetalle:{headings:{"req.descripcion":"Articulo","req.cantidades":"Cantidad solicitada","req.cantidad_compra":"Cantidad a comprar","req.cantidad_almacen":"Cantidad en almacén","req.unidad_articulo":"Unidad","req.comentario_partida":"Comentario","req.frequerido":"Fecha requerida","req.id":""},perPage:10,perPageValues:[],skin:i.skin,sortIcon:i.sortIcon,filterByColumn:!0,texts:i.texts}}},methods:{getData:function(){this.isLoading=!0;var t=this;axios.get("/requisicionesporautorizar").then(function(e){t.solicitudes=e.data,t.dataTable=e.data,t.isLoading=!1}).catch(function(t){console.log(t)})},cargarequisicion:function(){this.getData()},cargardetalle:function(t){this.isLoading=!0,this.detalles_ver=!0,this.detalle=!0,this.id_requisicion=t;var e=this;axios.get("/consultadashp/"+t).then(function(t){e.detalles_solicitudes=t.data,e.dataTableDetalle=t.data,e.isLoading=!1}).catch(function(t){console.log(t)})},autorizar:function(t,e){this.isLoading=!0;var a=this,i=["Almacén","Supervisor"],o=[12,14];3==t?swal({title:0!=t?"Esta seguro(a) autorizar la requisición?":"Esta seguro(a) de rechazar la requisición",type:"warning",showCancelButton:!0,confirmButtonColor:"#4dbd74",cancelButtonColor:"#f86c6b",confirmButtonText:"Aceptar!",cancelButtonText:"Cancelar",reverseButtons:!0}).then(function(i){i.value?axios.post("/autorizarequisicionproyectos",{id:e,estado:t}).then(function(t){a.isLoading=!1,3==t.data?toastr.success("Correcto","Requisicion autorizada !!!"):0==t.data&&toastr.warning("Atención","Requisicion no autorizada !!!"),a.getData(),a.isLoading=!1}).catch(function(t){console.error(t)}):a.isLoading=!1}):swal({title:"Motivo del rechazo de la requisición",input:"textarea",inputValue:"Indicado en cada partida",showCancelButton:!0,confirmButtonText:"Continuar",showLoaderOnConfirm:!0}).then(function(t){t.value&&(axios.post("enviarcomentariorechazorequi",{id:e,data:t.value}).then(function(t){console.log("Guardado correctamente")}),swal({title:"Direccionar a...",input:"select",inputOptions:i,inputPlaceholder:"Seleccionar Estado",confirmButtonText:'Continuar <i class="fa fa-arrow-right></i>',showCancelButton:!0,customClass:"form-check form-check-inline",inputValidator:function(t){return!t&&"Se Requiere Elegir un Elemento"}}).then(function(t){t.value?axios.post("/autorizarequisicionproyectos",{id:e,estado:o[t.value]}).then(function(t){a.isLoading=!1,3==t?toastr.success("Correcto","Requisición recibida correctamente"):toastr.warning("Atención","Requisición no recibida"),a.getData()}).catch(function(t){console.error(t)}):a.isLoading=!1}).catch(function(t){console.error(t)})),console.log(t),a.isLoading=!1})},maestro:function(){this.detalles_ver=!1,this.detalle=!1,this.detalles_solicitudes=null},descargar:function(t){window.open("descargar-requisicionew/"+t,"_blank")},guardarcorrecion:function(t){var e=this;swal({title:"Motivo del rechazo de la requisición",input:"textarea",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Continuar",showLoaderOnConfirm:!0}).then(function(a){a.value&&axios.post("agregar/correciones/partidas",{requisicion_id:t.id,pda:t.pda,articulo_servicio:null!=t.articulo_id?1:0,articulo_servicio_id:null!=t.articulo_id?t.articulo_id:t.servicio_id,comentario:a.value}).then(function(t){e.cargardetalle(e.id_requisicion)}).catch(function(t){console.error(t)})})}},mounted:function(){}}},PeLh:function(t,e,a){var i=a("bA9/");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("375074ec",i,!0,{})},Q4HY:function(t,e,a){var i=a("a7fN");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("ed7053be",i,!0,{})},R02A:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'.VueTables__child-row-toggler--closed:before{content:"+"}.VueTables__child-row-toggler--open:before{content:"-"}.dropbtn2{background-color:#000;color:#fff;padding:15px;font-size:15px;border:none}.dropdown2{position:relative;display:inline-block}.dropdown-content2{display:none;position:sticky;background-color:#adb1c5;min-width:50px;box-shadow:0 8px 16px 0 rgba(0,0,0,.2);z-index:1}.dropdown-content2 a{color:#000;padding:15px 20px;text-decoration:none;display:block}.button2{background-color:#fff;color:#fff;padding:auto;border:1px solid;padding:1px;text-decoration:none;display:inline-block;font-size:15px}.dropdown-content2 button2:hover{background-color:#ce2424}.dropdown2:hover .dropdown-content2{display:block}.dropdown2:hover .dropbtn2{background-color:#000}td,th{text-align:left}td:nth-child(n+2),th:nth-child(n+2){text-align:center}thead tr:nth-child(2) th{font-weight:400}.VueTables__dropdown-pagination,.VueTables__sort-icon{margin-left:40px}.VueTables__highlight{background:#ff0;font-weight:400}.VueTables__sortable{cursor:pointer}.VueTables__date-filter{border:1px solid #ccc;padding:16px;border-radius:4px;cursor:pointer}.VueTables__filter-placeholder{color:#aaa}.VueTables__list-filter{width:auto;height:auto}',""])},TFM7:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"main"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-2 form-control-label mt-1"},[t._v("Proyecto")]),t._v(" "),a("div",{staticClass:"col-md-8 mb-3"},[a("v-select",{attrs:{label:"nombre_corto",options:t.list_proyectos},model:{value:t.proyecto,callback:function(e){t.proyecto=e},expression:"proyecto"}})],1),t._v(" "),a("div",{staticClass:"col-md-2 mb-3"},[a("button",{staticClass:"btn btn-dark",on:{click:t.obtenerRequis}},[a("i",{staticClass:"fas fa-search"})])])]),t._v(" "),a("vue-element-loading",{attrs:{active:t.isLoading_requis}}),t._v(" "),a("v-client-table",{attrs:{options:t.options_requis,columns:t.columns_requis,data:t.list_requisiciones},scopedSlots:t._u([{key:"id",fn:function(e){return[a("div",{staticClass:"btn-group",attrs:{role:"group"}},[a("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-grip-horizontal"}),t._v(" Acciones\r\n                                ")]),t._v(" "),a("div",{staticClass:"dropdown-menu"},[a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(a){return t.AbrirModalHistorial(e.row)}}},[a("i",{staticClass:"fas fa-list"}),t._v(" Ver historial\r\n                                    ")])])])])]}},{key:"estado_id",fn:function(e){return[0==e.row.estado_id?a("button",{staticClass:"btn btn-uno",attrs:{type:"button"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Nuevo\r\n                        ")]):t._e(),t._v(" "),1==e.row.estado_id?a("button",{staticClass:"btn btn-dos",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-exclamation-circle"}),t._v(" En espera de validación por\r\n                        ")]):t._e(),t._v(" "),2==e.row.estado_id?a("button",{staticClass:"btn btn-tres",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" En espera de autorización\r\n                        ")]):t._e(),t._v(" "),3==e.row.estado_id?a("button",{staticClass:"btn btn-cuatro",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-check-circle"}),t._v(" En revisión por almacén\r\n                        ")]):t._e(),t._v(" "),5==e.row.estado_id?a("button",{staticClass:"btn btn-nueve",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-check-circle"}),t._v(" Autorizado por compras\r\n                        ")]):t._e(),t._v(" "),4==e.row.estado_id?a("button",{staticClass:"btn btn-ocho",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-times"}),t._v(" No autorizado\r\n                        ")]):t._e(),t._v(" "),6==e.row.estado_id?a("button",{staticClass:"btn btn-siete",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-caret-square-o-left"}),t._v(" Espera autorización compras\r\n                        ")]):t._e(),t._v(" "),7==e.row.estado_id?a("button",{staticClass:"btn btn-seis",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-caret-square-o-left"}),t._v(" Por Equivalente\r\n                        ")]):t._e(),t._v(" "),8==e.row.estado_id?a("button",{staticClass:"btn btn-cinco",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-caret-square-o-left"}),t._v(" En Espera (Calidad)\r\n                        ")]):t._e()]}},{key:"descargar",fn:function(e){return[a("button",{staticClass:"btn btn-sm btn-dark",on:{click:function(a){return t.descargarRequi(e.row.id)}}},[a("i",{staticClass:"fas fa-file-download"}),t._v(" Descargar\r\n                        ")])]}}])})],1)])]),t._v(" "),a("div",{staticClass:"modal fade",class:{mostrar:t.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("vue-element-loading",{attrs:{active:t.isLoading_historial}}),t._v(" "),a("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.tituloModal)}}),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModalHistorial()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("x")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10"},[a("ul",{staticClass:"cbp_tmtimeline"},t._l(t.historial,function(t,e){return a("li",{key:e},[a("etapa",{attrs:{etapa:t,index:e}})],1)}),0)])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.cerrarModalHistorial()}}},[a("i",{staticClass:"fas fa-window-close"}),t._v(" Cerrar")])])])])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("i",{staticClass:"fa fa-align-justify"}),this._v(" Historial de Requisiciones\r\n            ")])}]}},UkNn:function(t,e,a){var i=a("VU/8")(a("PU9G"),a("wloU"),!1,null,null,null);t.exports=i.exports},XEB0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dlh+"),o=a("00Zj").call(this);e.default={data:function(){return{requisiicion:null,max_comentarios:300,validar_pendiente:!1,validar:!1,modaluno:0,modaldos:0,doc_req:[],isLoading:!1,tituloModala:"",requisicion:{id:0,folio:"",area_solicita_id:"",formato_requisiciones:"",fecha_solicitud:"",descripcion_uso:"",tipo_compra:"",proyecto_id:"",estado_id:0,solicita_empleado_id:"",autoriza_empleado_id:"",valida_empleado_id:"",recibe_empleado_id:"",condicion:0,Area:""},produccion:!1,tableDatadetallerequisicionServ:[],columnsdetallerequisicionServ:["req.servicio_id","req.nservicio","req.nproveedor","req.comentario_partida","req.cantidades","req.equivalente","req.frequerido"],optionsdetallerequisicionServ:{headings:{"req.servicio_id":"Acciones","req.nservicio":"Servicio","req.nproveedor":"Proveedor/Marca1","req.comentario_partida":"Comentario1","req.cantidades":"Cantidad","req.equivalente":"Equivalente","req.frequerido":"Fecha requerido"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,sortable:["id","folio","nservicio","nservicio","cantidades"],filterable:["folio","nservicio","nservicio","cantidades"],filterByColumn:!0,listColumns:{condicion:[{id:1,text:"SI"},{id:0,text:"NO"}]},texts:o.texts},columnsa:["codigo","nombre","descripcion","unidad","marca","calidad"],columnss:["nombre_servicio","proveedor_marca","unidad_medida"],columnsp:["codigo","nombre","descripcion","marca","calidad"],columnsdetallerequisicion:["req.articulo_id","req.narticulo","req.comentario_partida","req.carticulo","req.cantidades","req.equivalente","req.frequerido"],tableDatadetallerequisicion:[],optionsdetallerequisicion:{headings:{"req.articulo_id":"Acciones","req.narticulo":"Nombre artículo","req.carticulo":"Código","req.darticulo":"Descripción","req.peso":"Peso","req.comentario_partida":"Comentario","req.cantidades":"Cantidad","req.equivalente":"Equivalente","req.frequerido":"Fecha requerido"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,sortable:["req.narticulo","req.carticulo","req.darticulo","req.peso","req.cantidades","req.comentario_partida","req.frequerido"],filterable:["req.narticulo","req.carticulo","req.darticulo","req.peso","req.cantidades","req.comentario_partida","req.frequerido"],filterByColumn:!0,listColumns:{condicion:[{id:1,text:"SI"},{id:0,text:"NO"}]},texts:o.texts},optionsa:{headings:{nombre:"Nombre",descripcion:"Descripción",marca:"Marca",codigo:"Codigo",id:"Acciones"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,sortable:["codigo","nombre","descripcion","marca"],filterable:["codigo","nombre","descripcion","marca"],texts:o.texts,debounce:700,childRow:!0},optionss:{headings:{nombre_servicio:"Nombre del Servicio",proveedor_marca:"Proveedor/Marca2",unidad_medida:"Unidad de Medida",id:"Acciones"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,texts:o.texts},optionsp:{headings:{nombre:"Nombre",descripcion:"Descripción",marca:"Marca",codigo:"Codigo",id:"Acciones"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,sortable:["codigo","nombre","descripcion","marca"],filterable:["codigo","nombre","descripcion","marca"],texts:o.texts,debounce:700},preq:{requisicione_id:0,articulo_id:0,servicio_id:0,peso:0,cantidad:"",equivalente:0,fecha_requerido:"",comentario:"",nombrearti:"",validado:0,documentacionre:"",documentacionreid:"",pendiente:0,req_com_id:0,part_entr:0,req_antigua:0},clases:{peso:"",cantidades:"",fecharequerido:""},tipoAccionpr:0,documentos:null,tipoAcciondos:1}},components:{},methods:{getListas:function(){var t=this;axios.get("ducumentosrequeridos").then(function(e){t.documentos=e.data}).catch(function(t){console.error()})},seleccionarArticulo2:function(t){this.max_comentarios=300,this.validar=!1,this.validar_pendiente=!1,this.preq.servicio_id=null,this.preq.articulo_id=t.row.id,this.preq.nombrearti=t.row.nombre+" "+t.row.descripcion,this.cerrarModal()},seleccionarServicio:function(t){this.max_comentarios=300;this.validar=!0,this.validar_pendiente=!1,this.preq.peso=0,this.preq.articulo_id=null,this.preq.servicio_id=t.row.id,this.preq.nombrearti=t.row.nombre_servicio+"/"+t.row.proveedor_marca,this.cerrarModal()},seleccionarPendiente:function(t){max_comentarios=300,this.validar=!1,this.validar_pendiente=!0,this.preq.servicio_id=null,this.preq.articulo_id=t.row.id,this.preq.nombrearti=t.row.descripcion,this.preq.cantidad=t.row.cantidad,this.preq.pendiente=t.row.pendiente,this.preq.req_com_id=t.row.req_com_id,this.preq.part_entr=t.row.PartEntr,this.preq.req_antigua=t.row.ReqAntigua,this.cerrarModal()},emitirEventoHijo:function(){this.$emit("detallerequisiciones:change")},cargardetalle:function(t){this.detalle=!0,this.isLoading=!0;var e=this;this.requisiicion=t,this.preq.requisicione_id=t.id,axios.get("/requisicion/"+t.id+"/requisicion").then(function(t){e.tableDatadetallerequisicion=t.data,e.isLoading=!1}).catch(function(t){console.log(t)}),axios.get("/catservicios/"+t.id).then(function(t){e.tableDatadetallerequisicionServ=t.data,e.isLoading=!1}).catch(function(t){console.log(t)})},maestro:function(){this.emitirEventoHijo(),this.cancelar()},abrirModalA:function(t,e,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];switch(t){case"articulo":switch(e){case"registrar":this.modaluno=1,this.tituloModala="Registrar partida requisición",i.a.resetObject(this.preq),this.tipoAccionpr=1,this.preq.requisicione_id=a,this.$refs.myTableArticulo.refresh();break;case"documentos":this.modaldos=1,this.tipoAcciondos=1,this.preq.documentacionre="",this.doc_req=[],this.tituloModala="Registrar los documentos requeridos";break;case"actualizar":if(this.modaldos=1,this.tipoAcciondos=0,this.tituloModala="Documentos Requeridos",void 0==o.servicio_id)var r=null;else r=o.servicio_id;this.preq.servicio_id=r;var s=o.articulo_id;this.preq.articulo_id=s;var n=o.requisicione_id;this.preq.requisicione_id=n;var c=[];axios.get("/partidadocumentos/"+s+"&"+n+"&"+r).then(function(t){for(var e=0;e<t.data.length;e++)c.push(t.data[e].documento_id)}).catch(function(t){console.log(t)}),this.doc_req=c;break;case"actualizar_articulo":this.preq.articulo_id=o.articulo_id,this.preq.pda=o.pda,this.preq.nombrearti=o.darticulo,this.preq.comentario=o.comentario_partida,this.preq.peso=o.peso,this.preq.cantidad=o.cantidades,this.preq.equivalente=o.equivalente,this.preq.fecha_requerido=o.frequerido,this.produccion=1==o.produccion,this.tipoAccionpr=2,this.preq.validado=1;break;case"actualizar_servicio":this.preq.servicio_id=o.servicio_id,this.preq.pda=o.pda,this.preq.nombrearti=o.nservicio,this.preq.comentario=o.comentario_partida,this.preq.peso=o.peso,this.preq.cantidad=o.cantidades,this.preq.equivalente=o.equivalente,this.preq.fecha_requerido=o.frequerido,this.tipoAccionpr=2,this.preq.validado=1}}},cerrarModal:function(){this.modaluno=0,this.modaldos=0,this.tituloModal="",i.a.resetObject(this.requisicion)},cancelar:function(){this.validar=!1,this.validar_pendiente=!1,this.preq.pendiente=0,this.preq.articulo_id=0,this.preq.servicio_id=0,this.preq.peso="",this.preq.cantidad="",this.preq.equivalente=0,this.preq.fecha_requerido="",this.preq.nombrearti="",this.tipoAccionpr=0,this.preq.comentario="",this.preq.documentacionre="",this.doc_req=[],this.preq.pendiente=0,this.preq.req_com_id=0,this.preq.part_entr=0,this.preq.req_antigua=0,i.a.resetObject(this.clases)},guardardocumentos:function(){for(var t=this.doc_req,e=[],a=[],i=0;i<t.length;i++)axios.get("ducumentosrequeridosb/"+t[i]).then(function(t){e.push(t.data[0].nombre),a.push(t.data[0].id)}).catch(function(t){console.error(t)});this.preq.documentacionre=e,this.preq.documentacionreid=a,this.modaldos=0},validarpartida:function(){""===this.preq.cantidad?(this.mensaje(),this.clases.peso="",this.clases.cantidades=" is-invalid"):""===this.preq.fecha_requerido?(this.mensaje(),this.clases.cantidades="",this.clases.fecharequerido=" is-invalid"):(this.preq.validado=1,this.clases.fecharequerido="")},mensaje:function(){swal({title:"Error complete todos los campos",type:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar!",confirmButtonClass:"btn btn-success",buttonsStyling:!1,reverseButtons:!0})},guardarPR:function(t,e){if(1==this.preq.validado){this.isLoading=!0,this.detalle=!0;var a=this;axios({method:t?"POST":"PUT",url:t?"/partidare":"/partidare/"+this.preq.pda,data:{requisicione_id:this.preq.requisicione_id,articulo_id:this.preq.articulo_id,servicio_id:this.preq.servicio_id,peso:this.preq.peso,cantidad:this.preq.cantidad,equivalente:this.preq.equivalente,fecha_requerido:this.preq.fecha_requerido,comentario:this.preq.comentario,documentacionreid:this.preq.documentacionreid,pda:this.preq.pda,pendiente:this.preq.pendiente,req_com_id:this.preq.req_com_id,part_entr:this.preq.part_entr,req_antigua:this.preq.req_antigua,produccion:1==this.produccion?1:0}}).then(function(e){a.max_comentarios=300,e.data.status?(a.isLoading=!1,a.cargardetalle(a.requisiicion),a.cerrarModal(),a.cancelar(),a.$refs.myTablePend.refresh(),a.preq.validado=0,t?toastr.success("Partida Registrada Correctamente"):toastr.success("Partida Actualizada Correctamente")):(swal({title:"Error no se puede seleccionar \n 2 articulos iguales \n en la misma requisición",type:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar!",confirmButtonClass:"btn btn-warning",buttonsStyling:!1,reverseButtons:!0}),a.cancelar(),a.isLoading=!1)}).catch(function(t){console.log(t),a.cancelar(),a.isLoading=!1})}},actdesactreq:function(t,e,a,i,o){var r=this;a||(this.swal_titulo="Esta seguro de remover este articulo ó servicio de la requisición?",this.swal_tle="Removido!",this.swal_msg="El registro ha sido removido con éxito."),swal({title:this.swal_titulo,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar!",cancelButtonText:"Cancelar",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1,reverseButtons:!0}).then(function(o){if(o.value){var s=r;axios.get("/partidare/"+t+"&"+e+"&"+i+"/edit").then(function(t){a||(toastr.success(s.swal_tle,s.swal_msg,"success"),s.$refs.myTablePend.refresh()),s.cargardetalle(s.requisiicion)}).catch(function(t){console.log(t)})}else o.dismiss,swal.DismissReason.cancel})},guardardocumentosupdate:function(){this.preq.requisicione_id;var t=this;axios.put("/partidare/"+this.preq.articulo_id+"/updatedoc",{documento_id:this.doc_req,partidarequisicione_art:this.preq.articulo_id,partidarequisicione_req:this.preq.requisicione_id,partidarequisicione_serv:this.preq.servicio_id}).then(function(e){t.cerrarModal(),t.cargardetalle(t.requisiicion),toastr.success("Correcto","Documentos actualizados correctamente")}).catch(function(t){console.log(t)})},agregarArt:function(){this.$refs.articulo.abrirModal("articulo","registrar")},abrirModal:function(t){this.$refs.articulo.abrirModal("articulo","actualizar",t),this.cerrarModal()}},mounted:function(){this.getListas()}}},XRin:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card border-dark"},[a("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),a("div",{staticClass:"card-header bg-dark text-white"},[a("i",{staticClass:"fa fa-align-justify"}),t._v(" Requisiciones por revisar:\r\n        "),t.detalles_ver?a("button",{staticClass:"btn btn-secondary float-sm-right",attrs:{type:"button"},on:{click:function(e){return t.maestro()}}},[a("i",{staticClass:"icon-arrow-left"}),t._v(" Atras\r\n        ")]):t._e()]),t._v(" "),a("div",{staticClass:"card-body"},[a("v-client-table",{directives:[{name:"show",rawName:"v-show",value:!t.detalle,expression:"!detalle"}],ref:"myTable",attrs:{columns:t.columns,data:t.dataTable,options:t.options},scopedSlots:t._u([{key:"id",fn:function(e){return[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[a("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-grip-horizontal"}),t._v(" Acciones\r\n                        ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(a){return t.cargardetalle(e.row.id)}}},[a("i",{staticClass:"fas fa-eye"}),t._v("  Ver partidas\r\n                            ")])])])])]}},{key:"condicion",fn:function(e){return[a("button",{staticClass:"btn btn-sm btn-success",on:{click:function(a){return t.autorizar(2,e.row.id)}}},[a("i",{staticClass:"far fa-check-square"}),t._v("  Si  ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.condicion,expression:"props.row.condicion == 1"}],staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.autorizar(0,e.row.id)}}},[a("i",{staticClass:"fas fa-window-close"}),t._v("  No")])]}}])}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.detalles_ver,expression:"detalles_ver"}]},[a("v-client-table",{attrs:{data:t.dataTableDetalle,options:t.optionsDetalle,columns:t.columnsDetalle}})],1)],1)],1)},staticRenderFns:[]}},XtNr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={data:function(){return{isLoading:!1,listaPermisos:[],widgets:{autorizarequisicion:!1,validarequisicion:!1}}},components:{autorizarequisicion:function(t){return new Promise(function(t){t()}).then(function(){return t(a("UkNn"))}.bind(null,a)).catch(a.oe)},validarequisicion:function(t){return new Promise(function(t){t()}).then(function(){return t(a("qWQq"))}.bind(null,a)).catch(a.oe)}},methods:{escucharHijo:function(){this.getListaPermisos()},getListaPermisos:function(){var t=this;this.isLoading=!0;var e=this;axios.post("/permisosdashboard/porusuariomodulo",{modulo_id:3}).then(function(a){(e.listaPermisos=a.data,e.isLoading=!1,e.listaPermisos.indexOf("autorizarequisicion")>=0)&&(e.widgets.autorizarequisicion=!0,t.$refs.autorizarequisicion.cargarequisicion());e.listaPermisos.indexOf("validarequisicion")>=0&&(e.widgets.validarequisicion=!0,t.$refs.validarequisicion.cargarequisicion())}).catch(function(t){console.log(t)})}},mounted:function(){this.getListaPermisos()}}},a7fN:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".style-chooser .vs__dropdown-menu,.style-chooser .vs__dropdown-toggle,.style-chooser .vs__search::placeholder{background:#dfe5fb;border:none;color:#394066;text-transform:lowercase;font-variant:small-caps}.style-chooser .vs__clear,.style-chooser .vs__open-indicator{fill:#394066}",""])},"bA9/":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'.btn-uno[data-v-659562ee]{color:#fff;background-color:#f6a152;border-color:#f6a152;border-radius:2px}.btn-dos[data-v-659562ee]{color:#000;background-color:#e9b443;border-color:#e9b443;border-radius:2px}.btn-tres[data-v-659562ee]{color:#000;background-color:#8bbbef;border-color:#8bbbef;border-radius:2px}.btn-cuatro[data-v-659562ee]{color:#fff;background-color:#40d0d0;border-color:#40d0d0;border-radius:2px}.btn-cinco[data-v-659562ee]{color:#fff;background-color:#0d4da3;border-color:#0d4da3;border-radius:2px}.btn-seis[data-v-659562ee]{color:#fff;background-color:#0d98a3;border-color:#0d98a3;border-radius:2px}.btn-siete[data-v-659562ee]{color:#fff;background-color:#25a30d;border-color:#25a30d;border-radius:2px}.btn-ocho[data-v-659562ee]{color:#fff;background-color:#d04040;border-color:#d04040;border-radius:2px}.btn-nueve[data-v-659562ee]{color:#000;background-color:#40d088;border-color:#40d088;border-radius:2px}.cbp_tmtimeline[data-v-659562ee]{margin:0;padding:0;list-style:none;position:relative}.cbp_tmtimeline[data-v-659562ee]:before{content:"";position:absolute;top:0;bottom:0;width:3px;background:#eee;left:20%;margin-left:-6px}.cbp_tmtimeline>li[data-v-659562ee]{position:relative}.cbp_tmtimeline>li:first-child .cbp_tmtime span.large[data-v-659562ee]{color:#444;font-size:17px!important;font-weight:700}.cbp_tmtimeline>li:first-child .cbp_tmicon[data-v-659562ee]{background:#fff;color:#666}.cbp_tmtimeline>li:nth-child(odd) .cbp_tmtime span[data-v-659562ee]:last-child{color:#444;font-size:13px}.cbp_tmtimeline>li:nth-child(odd) .cbp_tmlabel[data-v-659562ee]{background:#f0f1f3}.cbp_tmtimeline>li:nth-child(odd) .cbp_tmlabel[data-v-659562ee]:after{border-right-color:#f0f1f3}.cbp_tmtimeline>li .empty span[data-v-659562ee]{color:#777}.cbp_tmtimeline>li .cbp_tmtime[data-v-659562ee]{display:block;width:23%;padding-right:70px;position:absolute}.cbp_tmtimeline>li .cbp_tmtime span[data-v-659562ee]{display:block;text-align:right}.cbp_tmtimeline>li .cbp_tmtime span[data-v-659562ee]:first-child{font-size:15px;color:#3d4c5a;font-weight:700}.cbp_tmtimeline>li .cbp_tmtime span[data-v-659562ee]:last-child{font-size:14px;color:#444}.cbp_tmtimeline>li .cbp_tmlabel[data-v-659562ee]{margin:0 0 15px 25%;background:#f0f1f3;padding:1.2em;position:relative;border-radius:5px}.cbp_tmtimeline>li .cbp_tmlabel[data-v-659562ee]:after{right:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-right-color:#f0f1f3;border-width:10px;top:10px}.cbp_tmtimeline>li .cbp_tmlabel blockquote[data-v-659562ee]{font-size:16px}.cbp_tmtimeline>li .cbp_tmlabel .map-checkin[data-v-659562ee]{border:5px solid hsla(0,0%,92%,.2);-moz-box-shadow:0 0 0 1px #ebebeb;-webkit-box-shadow:0 0 0 1px #ebebeb;box-shadow:0 0 0 1px #ebebeb;background:#fff!important}.cbp_tmtimeline>li .cbp_tmlabel h2[data-v-659562ee]{margin:0;padding:0 0 10px;line-height:26px;font-size:16px;font-weight:400}.cbp_tmtimeline>li .cbp_tmlabel h2 a[data-v-659562ee]{font-size:15px}.cbp_tmtimeline>li .cbp_tmlabel h2 a[data-v-659562ee]:hover{text-decoration:none}.cbp_tmtimeline>li .cbp_tmlabel h2 span[data-v-659562ee]{font-size:15px}.cbp_tmtimeline>li .cbp_tmlabel p[data-v-659562ee]{color:#444}.cbp_tmtimeline>li .cbp_tmicon[data-v-659562ee]{width:40px;height:40px;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;font-size:1.4em;line-height:40px;-webkit-font-smoothing:antialiased;position:absolute;color:#fff;background:#46a4da;border-radius:50%;box-shadow:0 0 0 5px #f5f5f6;text-align:center;left:20%;top:0;margin:0 0 0 -25px}@media screen and (max-width:992px) and (min-width:768px){.cbp_tmtimeline>li .cbp_tmtime[data-v-659562ee]{padding-right:60px}}@media screen and (max-width:65.375em){.cbp_tmtimeline>li .cbp_tmtime span[data-v-659562ee]:last-child{font-size:12px}}@media screen and (max-width:47.2em){.cbp_tmtimeline[data-v-659562ee]:before{display:none}.cbp_tmtimeline>li .cbp_tmtime[data-v-659562ee]{width:100%;position:relative;padding:0 0 20px}.cbp_tmtimeline>li .cbp_tmtime span[data-v-659562ee]{text-align:left}.cbp_tmtimeline>li .cbp_tmlabel[data-v-659562ee]{margin:0 0 30px;padding:1em;font-weight:400;font-size:95%}.cbp_tmtimeline>li .cbp_tmlabel[data-v-659562ee]:after{right:auto;left:20px;border-right-color:transparent;border-bottom-color:#f5f5f6;top:-20px}.cbp_tmtimeline>li .cbp_tmicon[data-v-659562ee]{position:relative;float:right;left:auto;margin:-64px 5px 0 0}.cbp_tmtimeline>li:nth-child(odd) .cbp_tmlabel[data-v-659562ee]:after{border-right-color:transparent;border-bottom-color:#f5f5f6}}.bg-green[data-v-659562ee]{background-color:#50d38a!important;color:#fff}.bg-blush[data-v-659562ee]{background-color:#ff758e!important;color:#fff}.bg-orange[data-v-659562ee]{background-color:#ffc323!important;color:#fff}.bg-info[data-v-659562ee]{background-color:#2ca8ff!important}',""])},bJxo:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.detallerequisiciones,expression:"!detallerequisiciones"}],staticClass:"card"},[a("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),a("div",{staticClass:"card-header"},[a("i",{staticClass:"fa fa-align-justify"}),t._v(" Requisiciones\n      "),a("button",{staticClass:"btn btn-secondary float-sm-right",attrs:{type:"button"},on:{click:function(e){return t.maestroInicial()}}},[a("i",{staticClass:"fas fa-arrow-left"}),t._v(" Atras\n      ")])]),t._v(" "),a("div",{staticClass:"card-body"},[a("v-client-table",{ref:"myTable",attrs:{columns:t.columns,data:t.tableData,options:t.options},scopedSlots:t._u([{key:"r.partida",fn:function(e){return[a("button",{staticClass:"btn btn-outline-dark",on:{click:function(a){return t.cargardetalle(e.row.r)}}},[a("i",{staticClass:"fas fa-list"}),t._v(" Partidas\n          ")])]}},{key:"r.descargar",fn:function(e){return[a("button",{staticClass:"btn btn-outline-dark",on:{click:function(a){return t.descargarnew(e.row.r)}}},[a("i",{staticClass:"fas fa-file-pdf"}),t._v(" "),a("i",{staticClass:"fas fa-download"})])]}},{key:"r.id",fn:function(e){return[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[a("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-grip-horizontal"}),t._v(" \n              ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[null==e.row.r.formato_requisiciones||""==e.row.r.formato_requisiciones?void 0:t._e(),t._v(" "),0==e.row.r.condicion?void 0:t._e(),t._v(" "),0==e.row.r.estado_id||4==e.row.r.estado_id?a("div",[a("a",{directives:[{name:"show",rawName:"v-show",value:t.PermisosCrud.Update,expression:"PermisosCrud.Update"}],staticClass:"dropdown-item",attrs:{type:"button",href:"#"},on:{click:function(a){return t.abrirModal("requisicion","actualizar",e.row.r)}}},[a("i",{staticClass:"icon-pencil"}),t._v(" Actualizar requisición\n    ")])]):t._e(),t._v(" "),0==e.row.r.estado_id||4==e.row.r.estado_id||7==e.row.r.estado_id?a("div",[a("a",{directives:[{name:"show",rawName:"v-show",value:t.PermisosCrud.Delete,expression:"PermisosCrud.Delete"}],staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){return t.cerrarRequisicion(e.row.r)}}},[a("i",{staticClass:"far fa-window-close"}),t._v(" Cerrar requisición\n    ")])]):t._e()],2)])])]}},{key:"r.folio",fn:function(e){return[null!=e.row.c?[a("span",{staticClass:"text-danger"},[t._v(t._s(e.row.r.folio)+" Clic en el botón "),a("b",[t._v("No autorizado")]),t._v(" para mas detalles ")])]:[t._v("\n    "+t._s(e.row.r.folio)+"\n  ")]]}},{key:"r.estado_id",fn:function(e){return[0==e.row.r.estado_id?[a("button",{staticClass:"btn btn-uno",attrs:{type:"button"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Nuevo")])]:t._e(),t._v(" "),1==e.row.r.estado_id?[a("button",{staticClass:"btn btn-dos",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-exclamation-circle"}),t._v(" En espera de validación por")])]:t._e(),t._v(" "),2==e.row.r.estado_id?[a("button",{staticClass:"btn btn-tres",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" En espera de autorización")])]:t._e(),t._v(" "),3==e.row.r.estado_id?[a("button",{staticClass:"btn btn-cuatro",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-check-circle"}),t._v(" En revisión por almacén")])]:t._e(),t._v(" "),5==e.row.r.estado_id?[a("button",{staticClass:"btn btn-nueve",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-check-circle"}),t._v(" Autorizado por compras")])]:t._e(),t._v(" "),4==e.row.r.estado_id?[a("button",{staticClass:"btn btn-ocho",attrs:{type:"button"},on:{click:function(a){return t.vercomentarios(e.row.c.comentario)}}},[a("i",{staticClass:"fa fa-times"}),t._v(" No autorizado")])]:t._e(),t._v(" "),6==e.row.r.estado_id?[a("button",{staticClass:"btn btn-siete",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-caret-square-o-left"}),t._v(" Espera autorización compras")])]:t._e(),t._v(" "),7==e.row.r.estado_id?[a("button",{staticClass:"btn btn-seis",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-caret-square-o-left"}),t._v(" Por Equivalente")])]:t._e(),t._v(" "),8==e.row.r.estado_id?[a("button",{staticClass:"btn btn-cinco",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-caret-square-o-left"}),t._v(" En Espera (Calidad)")])]:t._e()]}},{key:"r.responsable",fn:function(e){return[1==e.row.r.estado_id?[a("span",[t._v(t._s(e.row.r.nombre_empleado_valida))])]:t._e(),t._v(" "),2==e.row.r.estado_id?[a("span",[t._v(t._s(e.row.r.nombre_empleado_autoriza))])]:t._e(),t._v(" "),3==e.row.r.estado_id?[a("span",[t._v("ALMACÉN")])]:t._e(),t._v(" "),5==e.row.r.estado_id||6==e.row.r.estado_id?[a("span",[t._v("COMPRAS")])]:t._e()]}}])})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.widgets.detallerequisiciones,expression:"widgets.detallerequisiciones"}]},[a("detallerequisiciones",{ref:"detallerequisiciones",on:{"detallerequisiciones:change":t.maestro}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}]},[a("modal",{ref:"modal",on:{"modal:click":function(e){return t.grabar(e)}}})],1)])},staticRenderFns:[]}},cAk9:function(t,e,a){var i=a("VU/8")(a("XtNr"),a("rTVA"),!1,null,null,null);t.exports=i.exports},cZYB:function(t,e,a){var i=a("VU/8")(a("q2jv"),a("3QPT"),!1,function(t){a("Q4HY")},null,null);t.exports=i.exports},"dlh+":function(t,e,a){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a={resetObject:function(t){for(var e in t)"string"==typeof t[e]?t[e]="":"number"==typeof t[e]?t[e]=0:void 0===i(t[e])?t[e]=null:"object"===i(t[e])&&(t[e]={})},getCRUD:function(t){var e=new FormData;e.append("ruta",t),e.append("identificador",1);var a={Create:!1,Read:!1,Update:!1,Delete:!1,Download:!1,Upload:!1};return axios.post("/CRUD",e).then(function(t){for(var e=0;e<t.data.length;e++)1==t.data[e].control_id&&(a.Create=!0),2==t.data[e].control_id&&(a.Read=!0),3==t.data[e].control_id&&(a.Update=!0),4==t.data[e].control_id&&(a.Delete=!0),5==t.data[e].control_id&&(a.Download=!0),6==t.data[e].control_id&&(a.Upload=!0)}).catch(function(t){console.log(t)}),a}}},e7k8:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'.cbp_tmtimeline{margin:0;padding:0;list-style:none;position:relative}.cbp_tmtimeline:before{content:"";position:absolute;top:0;bottom:0;width:3px;background:#eee;left:20%;margin-left:-6px}.cbp_tmtimeline>li{position:relative}.cbp_tmtimeline>li:first-child .cbp_tmtime span.large{color:#444;font-size:17px!important;font-weight:700}.cbp_tmtimeline>li:first-child .cbp_tmicon{background:#fff;color:#666}.cbp_tmtimeline>li:nth-child(odd) .cbp_tmtime span:last-child{color:#444;font-size:13px}.cbp_tmtimeline>li:nth-child(odd) .cbp_tmlabel{background:#f0f1f3}.cbp_tmtimeline>li:nth-child(odd) .cbp_tmlabel:after{border-right-color:#f0f1f3}.cbp_tmtimeline>li .empty span{color:#777}.cbp_tmtimeline>li .cbp_tmtime{display:block;width:23%;padding-right:70px;position:absolute}.cbp_tmtimeline>li .cbp_tmtime span{display:block;text-align:right}.cbp_tmtimeline>li .cbp_tmtime span:first-child{font-size:15px;color:#3d4c5a;font-weight:700}.cbp_tmtimeline>li .cbp_tmtime span:last-child{font-size:14px;color:#444}.cbp_tmtimeline>li .cbp_tmlabel{margin:0 0 15px 25%;background:#f0f1f3;padding:1.2em;position:relative;border-radius:5px}.cbp_tmtimeline>li .cbp_tmlabel:after{right:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-right-color:#f0f1f3;border-width:10px;top:10px}.cbp_tmtimeline>li .cbp_tmlabel blockquote{font-size:16px}.cbp_tmtimeline>li .cbp_tmlabel .map-checkin{border:5px solid hsla(0,0%,92%,.2);-moz-box-shadow:0 0 0 1px #ebebeb;-webkit-box-shadow:0 0 0 1px #ebebeb;box-shadow:0 0 0 1px #ebebeb;background:#fff!important}.cbp_tmtimeline>li .cbp_tmlabel h2{margin:0;padding:0 0 10px;line-height:26px;font-size:16px;font-weight:400}.cbp_tmtimeline>li .cbp_tmlabel h2 a{font-size:15px}.cbp_tmtimeline>li .cbp_tmlabel h2 a:hover{text-decoration:none}.cbp_tmtimeline>li .cbp_tmlabel h2 span{font-size:15px}.cbp_tmtimeline>li .cbp_tmlabel p{color:#444}.cbp_tmtimeline>li .cbp_tmicon{width:40px;height:40px;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;font-size:1.4em;line-height:40px;-webkit-font-smoothing:antialiased;position:absolute;color:#fff;background:#46a4da;border-radius:50%;box-shadow:0 0 0 5px #f5f5f6;text-align:center;left:20%;top:0;margin:0 0 0 -25px}@media screen and (max-width:992px) and (min-width:768px){.cbp_tmtimeline>li .cbp_tmtime{padding-right:60px}}@media screen and (max-width:65.375em){.cbp_tmtimeline>li .cbp_tmtime span:last-child{font-size:12px}}@media screen and (max-width:47.2em){.cbp_tmtimeline:before{display:none}.cbp_tmtimeline>li .cbp_tmtime{width:100%;position:relative;padding:0 0 20px}.cbp_tmtimeline>li .cbp_tmtime span{text-align:left}.cbp_tmtimeline>li .cbp_tmlabel{margin:0 0 30px;padding:1em;font-weight:400;font-size:95%}.cbp_tmtimeline>li .cbp_tmlabel:after{right:auto;left:20px;border-right-color:transparent;border-bottom-color:#f5f5f6;top:-20px}.cbp_tmtimeline>li .cbp_tmicon{position:relative;float:right;left:auto;margin:-64px 5px 0 0}.cbp_tmtimeline>li:nth-child(odd) .cbp_tmlabel:after{border-right-color:transparent;border-bottom-color:#f5f5f6}}.bg-green{background-color:#50d38a!important;color:#fff}.bg-blush{background-color:#ff758e!important;color:#fff}.bg-orange{background-color:#ffc323!important;color:#fff}.bg-info{background-color:#2ca8ff!important}',""])},nDCU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dlh+");function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r=a("00Zj").call(this);e.default={computed:{updated:function(){return this.exportar(this.$refs.myTable.allFilteredData)}},data:function(){return{actualizar_nombre:!1,proyecto_documento_id:0,PermisosCrud:{},modalPDF:0,nombre_archivo:"",nombre_archivo2:"",url:"/proyecto",modal:0,listaClientes:0,listaSubcategorias:[],isLoading:!1,swal_titulo:"",swal_msg:"",swal_tle:"",id:0,nombre:"",nombre_corto:"",clave:"",monto_total:0,ciudad:"",fecha_inicio:"",moneda:"MXN",cotizacion:"",fecha_fin:"",cliente_id:0,proyecto_id:0,condicional:0,pm_cliente:"",pm_interno:"",adicional:!1,agrupador:!1,listarProyAgrp:[],subcategoria_id:0,deshabilitar:!0,tituloModal:"",isProyectos_loading:!1,tipoAccion:0,fechavalidar:0,error:0,errorMostrarMsj:[],tableDocumentosProyectos:[],arreglo:{titulo:"Proyectos",emit:"abrirModal",modulo:"proyecto",accion:"registrar"},json_fields:{nombre:"String",nombre_corto:"String",clave:"String",monto_total:"String",ciudad:"String",condicion:"String",fecha_inicio:"String",fecha_fin:"String",updated_at:"String"},json_data:[],json_meta:[[{key:"charset",value:"utf-8"}]],columns:["id","nombre_corto","folio","clave","monto_total","ciudad","total_oc","total_req","condicion","fecha_inicio","fecha_fin"],tableData:[],options:{headings:{id:"Acciones",nombre:"Nombre Real del Proyecto",nombre_corto:"Nombre en Orden de Compra",clave:"Número de Orden de Compra",monto_total:"Monto Total de OC",ciudad:"Ciudad",fecha_inicio:"Fecha de Inicio",fecha_fin:"Fecha de Fin",condicion:"Condición",adicional:"P/A",total_oc:"Total OC",total_req:"Total REQ",nombre_proyecto:"Proyecto Padre"},perPage:10,perPageValues:[],skin:r.skin,sortIcon:r.sortIcon,filterByColumn:!0,listColumns:{condicion:[{id:1,text:"Activo"},{id:0,text:"Terminado"},{id:2,text:"Pausa"},{id:3,text:"Rechazado"}],adicional:[{id:1,text:"Adicional"},{id:0,text:"Principal"}]},texts:r.texts}}},methods:{validar:function(){var t=this.fecha_inicio,e=this.fecha_fin,a=new Date(t).getTime();(new Date(e).getTime()-a)/864e5<0?(this.fechavalidar=1,toastr.error("La fecha de finalizacion del Proyecto no debe ser menor a la fecha de Inicio")):this.fechavalidar=0},horaActual:function(){var t=new Date,e=t.getDate(),a=t.getMonth()+1,i=t.getFullYear();e<10&&(e="0"+e),a<10&&(a="0"+a),t=i+"-"+a+"-"+e,this.fecha_inicio=t},listar:function(){var t=this;this.isProyectos_loading=!0;var e=this;this.PermisosCrud=i.a.getCRUD(this.$route.path),axios.get("proyectos/obtener/conoc").then(function(a){t.isProyectos_loading=!1,e.tableData=a.data.proyectos}).catch(function(t){this.isProyectos_loading=!1,console.log(t)}),axios.get("/clientes").then(function(t){e.listaClientes=t.data.clientes}).catch(function(t){console.log(t)})},subirDocumento:function(t,e){var a=this;swal({title:"Documento P.O.",input:"file",inputAttributes:{accept:"application/pdf","aria-label":"Upload your profile picture"},confirmButtonText:"Subir Archivo",showCancelButton:!0,inputValidator:function(t){return!t&&"Este Campo no puede estar Vacío"}}).then(function(i){var o=a;if(i.value){var r=new FormData;r.append("metodo",e),r.append("documento_po",i.value),r.append("id",t.id),axios.post("/proyecto/subir/documento/",r).then(function(t){t.data.status?(1==e&&toastr.success("Archivo Subido Correctamente"),2==e&&toastr.success("Archivo Actualizado Correctamente"),o.listar()):swal({type:"error",html:t.data.errors.join("<br>")})}).catch(function(t){console.log(t)})}else i.dismiss,swal.DismissReason.cancel})},registrar:function(){var t=this;1!=this.adicional||0!=this.proyecto_id?0==this.fechavalidar&&this.$validator.validate().then(function(e){if(e){t.isLoading=!0;var a=t;axios.post(a.url,{metodo:0,nombre:t.nombre,nombre_corto:t.nombre_corto,clave:t.clave,moneda:t.moneda,monto_total:t.monto_total,ciudad:t.ciudad,fecha_inicio:t.fecha_inicio,fecha_fin:t.fecha_fin,cotizacion:t.cotizacion,cliente_id:t.cliente_id,pm_cliente:t.pm_cliente,pm_interno:t.pm_interno,adicional:t.adicional,proyecto_id:t.adicional?t.proyecto_id.id:null,proyecto_subcategorias_id:t.subcategoria_id}).then(function(t){a.isLoading=!1,t.data.status?(a.cerrarModal(),a.listar(),toastr.success("Proyecto Registrado Correctamente")):toastr.error(t.data.mensaje)}).catch(function(t){console.log(t)})}}):toastr.error("Seleccionar proyecto padre.")},actualizar:function(){var t=this;0==this.fechavalidar&&this.$validator.validate().then(function(e){if(e){t.isLoading=!0;var a=t;axios.put(a.url+"/"+t.id,{nombre:t.nombre,nombre_corto:t.nombre_corto,cotizacion:t.cotizacion,clave:t.clave,monto_total:t.monto_total,ciudad:t.ciudad,moneda:t.moneda,fecha_inicio:t.fecha_inicio,fecha_fin:t.fecha_fin,cliente_id:t.cliente_id,pm_cliente:t.pm_cliente,pm_interno:t.pm_interno,adicional:t.adicional,proyecto_id:t.adicional?t.proyecto_id:null,proyecto_subcategorias_id:t.subcategoria_id}).then(function(t){a.isLoading=!1,a.cerrarModal(),a.listar(),toastr.success("Proyecto Actualizado Correctamente")}).catch(function(t){console.log(t)})}})},getListaSubcategorias:function(){var t=this;axios.get("/prosubcategoria/getlist").then(function(e){t.listaSubcategorias=e.data}).catch(function(t){console.log(t)})},actdesact:function(t,e){var a=this;e?(this.swal_titulo="El proyecto ha finalizado, desea activarlo nuevamente?",this.swal_tle="Activado",this.swal_msg="Proyecto activado con éxito."):(this.swal_titulo="Esta seguro que el proyecto concluyó?",this.swal_tle="Desactivado!",this.swal_msg="Proyecto finalizado."),swal({title:this.swal_titulo,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar!",cancelButtonText:"Cancelar",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1,reverseButtons:!0}).then(function(i){if(i.value){var r=a;axios.get(r.url+"/"+t+"/edit").then(function(t){var a;e?toastr.success(r.swal_tle,r.swal_msg,"success"):toastr.error(r.swal_tle,r.swal_msg,"error"),toastr.options=(o(a={closeButton:!1},"closeButton",!1),o(a,"debug",!1),o(a,"newestOnTop",!0),o(a,"progressBar",!0),o(a,"positionClass","toast-top-center"),o(a,"preventDuplicates",!1),o(a,"onclick",null),o(a,"showDuration","300"),o(a,"hideDuration","1000"),o(a,"timeOut","5000"),o(a,"extendedTimeOut","1000"),o(a,"showEasing","swing"),o(a,"hideEasing","linear"),o(a,"showMethod","fadeIn"),o(a,"hideMethod","fadeOut"),a),r.listar()}).catch(function(t){console.log(t)})}else i.dismiss,swal.DismissReason.cancel})},pausar:function(t){var e=this;this.swal_titulo="Esta seguro de pausar el proyecto?",this.swal_tle="Pausa!",this.swal_msg="Proyecto pausado.",swal({title:this.swal_titulo,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar!",cancelButtonText:"Cancelar",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1,reverseButtons:!0}).then(function(a){if(a.value){var i=e;axios.get("proyecto-pausar/"+t).then(function(t){var e;toastr.error(i.swal_tle,i.swal_msg,"error"),toastr.options=(o(e={closeButton:!1},"closeButton",!1),o(e,"debug",!1),o(e,"newestOnTop",!0),o(e,"progressBar",!0),o(e,"positionClass","toast-top-center"),o(e,"preventDuplicates",!1),o(e,"onclick",null),o(e,"showDuration","300"),o(e,"hideDuration","1000"),o(e,"timeOut","5000"),o(e,"extendedTimeOut","1000"),o(e,"showEasing","swing"),o(e,"hideEasing","linear"),o(e,"showMethod","fadeIn"),o(e,"hideMethod","fadeOut"),e),i.listar()}).catch(function(t){console.log(t)})}else a.dismiss,swal.DismissReason.cancel})},rechazar:function(t){var e=this;this.swal_titulo="Esta seguro de rechazar el proyecto?",this.swal_tle="Rechazado!",this.swal_msg="Proyecto rechazado.",swal({title:this.swal_titulo,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar!",cancelButtonText:"Cancelar",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1,reverseButtons:!0}).then(function(a){if(a.value){var i=e;axios.get("proyecto-rechazar/"+t).then(function(t){var e;toastr.error(i.swal_tle,i.swal_msg,"error"),toastr.options=(o(e={closeButton:!1},"closeButton",!1),o(e,"debug",!1),o(e,"newestOnTop",!0),o(e,"progressBar",!0),o(e,"positionClass","toast-top-center"),o(e,"preventDuplicates",!1),o(e,"onclick",null),o(e,"showDuration","300"),o(e,"hideDuration","1000"),o(e,"timeOut","5000"),o(e,"extendedTimeOut","1000"),o(e,"showEasing","swing"),o(e,"hideEasing","linear"),o(e,"showMethod","fadeIn"),o(e,"hideMethod","fadeOut"),e),i.listar()}).catch(function(t){console.log(t)})}else a.dismiss,swal.DismissReason.cancel})},exportar:function(t){var e=this;return this.json_data=[],this.json_data.push({nombre:"Nombre",nombre_corto:"Nombre Corto",clave:"Clave",monto_total:"Monto Total",ciudad:"Ciudad",condicion:"Estado",fecha_fin:"F. Inicio",fecha_inicio:"F. Fin",updated_at:"Actualizado por ultima vez"}),t.forEach(function(t){e.json_data.push({nombre:t.nombre,nombre_corto:t.nombre_corto,clave:t.clave,monto_total:t.monto_total,ciudad:t.ciudad,fecha_inicio:t.fecha_inicio,condicion:"",fecha_fin:t.fecha_fin,updated_at:t.updated_at})}),this.json_data},cerrarModal:function(){this.modal=0,this.tituloModal=""},abrirModalPDF:function(t){var e=this;this.proyecto_documento_id=t,axios.get("/proyecto-obtener-documentos/"+t).then(function(t){e.tableDocumentosProyectos=t.data}).catch(function(t){console.error(t)}),this.modalPDF=1},cerrarModalPDF:function(){axios.get("/proyecto-delete-temporal/"+this.proyecto_documento_id).then(function(t){}).catch(function(t){console.error(t)}),this.nombre_archivo="",this.modalPDF=0},deshabilitarAgrupador:function(t){t.target.checked?this.deshabilitar=!1:this.deshabilitar=!0},guardarAgrupador:function(){this.isLoading=!0;var t=this;axios({method:"POST",url:"/guardarAgrupador",data:{nombre:this.nombre}}).then(function(e){t.isLoading=!1,t.tableData=e.data,t.cerrarModal(),t.listar(),toastr.success("Proyecto Registrado Correctamente")}).catch(function(t){console.log(t)})},abrirModal:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=t[2];switch(t[0]){case"proyecto":switch(t[1]){case"registrar":this.actualizar_nombre=!1,this.modal=1,this.tituloModal="Registrar Proyecto",this.proyecto="",this.nombre="",this.nombre_corto="",this.clave="",this.monto_total="",this.ciudad="",this.moneda="MXN",this.fecha_inicio="",this.fecha_fin="",this.horaActual(),this.tipoAccion=1,this.cliente_id=0,this.pm_cliente="",this.pm_interno="",this.adicional=!1,this.proyecto_id=0,this.subcategoria_id=0;break;case"actualizar":this.actualizar_nombre=!0,this.modal=1,this.tituloModal="Actualizar Proyecto",this.id=e.id,this.moneda=e.moneda,this.nombre=e.nombre,this.nombre_corto=e.nombre_corto,this.clave=e.clave,this.monto_total=e.monto_total,this.ciudad=e.ciudad,this.cotizacion=e.cotizacion,this.fecha_inicio=e.fecha_inicio,this.fecha_fin=e.fecha_fin,this.tipoAccion=2,this.cliente_id=e.cliente_id,this.pm_cliente=e.pm_cliente,this.pm_interno=e.pm_interno,this.adicional=e.adicional,this.proyecto_id=e.proyecto_id,this.subcategoria_id=e.proyecto_subcategorias_id}}},deleteu:function(t){var e=this;Swal.fire({title:"Esta seguro de eliminar?",text:"No se podra revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si!"}).then(function(a){a.value&&axios.get("delete/documento/proyecto/"+t.id).then(function(t){toastr.success("Eliminado Correctamente !!!"),e.abrirModalPDF(e.proyecto_documento_id)}).catch(function(t){console.error(t)})})},verdocumentos:function(t){var e=this;axios.post("proyecto-obtenerarchivos/",{id:t.id}).then(function(t){console.log(t.data),e.nombre_archivo="temp/"+t.data}).catch(function(t){console.error(t)})},Descargar:function(){window.open("proyectos/reporte/descargar")}},mounted:function(){this.listar(),this.horaActual(),this.getListaSubcategorias()}}},nHk0:function(t,e,a){var i=a("VU/8")(a("AHJP"),a("bJxo"),!1,function(t){a("OthI")},null,null);t.exports=i.exports},p8EP:function(t,e,a){var i=a("VU/8")(a("AWFs"),a("4Q6J"),!1,null,null,null);t.exports=i.exports},q2jv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dlh+");a("00Zj").call(this);e.default={data:function(){return{url:"/requisicion",isEnabled:!0,proyecto:{},modal:0,isLoading:!1,tituloModal:"",tipoAccion:0,principal:null,optionsvs:[],requisicion:{id:0,folio:"",area_solicita_id:"",formato_requisiciones:"",fecha_solicitud:"",descripcion_uso:"",tipo_compra:"",proyecto_id:0,estado_id:0,solicita_empleado_id:"",autoriza_empleado_id:"",valida_empleado_id:"",recibe_empleado_id:"",condicion:0,Area:""},listaAreasSol:[],listaProyecto:[]}},methods:{getListas:function(){var t=this,e=this;axios.get("rh/catalogos/departamento/obtener").then(function(t){t.data.status?e.listaAreasSol=t.data.departamentos:toastr.error(t.data.mensaje)}).catch(function(t){console.log(t)}),axios.get("/proyecto").then(function(t){e.listaProyecto=[],t.data.forEach(function(t){var a={id:t.proyecto.id,nombre_corto:t.proyecto.nombre_corto};e.listaProyecto.push(a)})}).catch(function(t){console.log(t)}),axios.get("/vertodosempleados").then(function(e){for(var a=0;a<e.data.length;a++)t.optionsvs.push({id:e.data[a].id,name:e.data[a].nombre+" "+e.data[a].ap_paterno+" "+e.data[a].ap_materno})}).catch(function(t){console.log(t)})},guardarRequisicion:function(t){var e=this;this.$validator.validate().then(function(a){if(a){e.isLoading=!0,e.detalle=!1;var i=e;axios({method:t?"POST":"PUT",url:t?i.url:i.url+"/"+e.requisicion.id,data:{id:e.requisicion.id,folio:e.requisicion.folio,area_solicita_id:e.requisicion.area_solicita_id,fecha_solicitud:e.requisicion.fecha_solicitud,descripcion_uso:e.requisicion.descripcion_uso,tipo_compra:e.requisicion.tipo_compra,proyecto_id:i.proyecto.id,estado_id:e.requisicion.estado_id,solicita_empleado_id:e.requisicion.solicita_empleado_id.id,autoriza_empleado_id:e.requisicion.autoriza_empleado_id.id,valida_empleado_id:e.requisicion.valida_empleado_id.id,recibe_empleado_id:e.requisicion.recibe_empleado_id,identificador:0}}).then(function(e){i.isLoading=!1,console.log(e.status),e.data.status?(i.cerrarModal(),t?(i.getPrincipal(e.data.data.proyecto_id),toastr.success("Requisicion Registrada Correctamente")):(toastr.success("Requisicion Actualizada Correctamente"),i.getData(i.principal))):(swal({type:"error",html:e.data.errors.join("<br>")}),i.cerrarModal())}).catch(function(t){console.log(t)})}else swal({title:"Complete todos los campos",type:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar!",confirmButtonClass:"btn btn-success",buttonsStyling:!1,reverseButtons:!0})})},abrirModal:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];switch(t){case"requisicion":switch(e){case"registrar":this.isEnabled=!0,this.modal=1,this.tituloModal="Registrar requisición",i.a.resetObject(this.requisicion),this.tipoAccion=1,this.disabled=0;break;case"actualizar":this.isEnabled=!1,console.error(a),this.principal=a.proyecto_id,i.a.resetObject(this.requisicion),this.modal=1,this.tituloModal="Actualizar requisición",this.requisicion.id=a.id,this.tipoAccion=2,this.disabled=1,this.requisicion.folio=a.folio,this.requisicion.area_solicita_id=a.area_solicita_id,this.requisicion.fecha_solicitud=a.fecha_solicitud,this.requisicion.descripcion_uso=a.descripcion_uso,this.requisicion.tipo_compra=a.tipo_compra,this.proyecto={id:a.proyecto_id,nombre_corto:a.p_nombre_corto},this.requisicion.estado_id=a.estado_id,this.requisicion.solicita_empleado_id={id:a.solicita_empleado_id,name:a.nombre_empleado_solicita},this.requisicion.autoriza_empleado_id={id:a.autoriza_empleado_id,name:a.nombre_empleado_autoriza},this.requisicion.valida_empleado_id={id:a.valida_empleado_id,name:a.nombre_empleado_valida}}}},cerrarModal:function(){this.modal=0,this.tituloModal="",i.a.resetObject(this.requisicion)},getData:function(t){this.$emit("modal:click",t)},getPrincipal:function(t){this.modal=0,this.$emit("modal:nuevo",t)}},mounted:function(){this.getListas()}}},qWQq:function(t,e,a){var i=a("VU/8")(a("KJfb"),a("XRin"),!1,null,null,null);t.exports=i.exports},rTVA:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("main",{staticClass:"main"},[e("div",{staticClass:"container"},[e("vue-element-loading",{attrs:{active:this.isLoading}}),this._v(" "),e("br"),this._v(" "),e("div",{staticClass:"row"},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.widgets.validarequisicion,expression:"widgets.validarequisicion"}],staticClass:"col col-md-10"},[e("validarequisicion",{ref:"validarequisicion",on:{"validarequisicion:change":this.escucharHijo}})],1)]),this._v(" "),e("div",{staticClass:"row"},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.widgets.autorizarequisicion,expression:"widgets.autorizarequisicion"}],staticClass:"col col-md-10-md-12"},[e("autorizarequisicion",{ref:"autorizarequisicion"})],1)])],1)])},staticRenderFns:[]}},rZ8E:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("dlh+");var i=a("vruV"),o=a.n(i),r=a("00Zj").call(this);e.default={components:{Etapa:o.a},data:function(){return{list_proyectos:[],url:"proyectos/requis/historial",proyecto:{},list_requisiciones:[],isLoading_requis:!1,options_requis:{headings:{id:"Acciones"},perPage:10,perPageValues:[],skin:r.skin,sortIcon:r.sortIcon,filterByColumn:!0,texts:r.texts},columns_requis:["id","folio","fecha_solicitud","solicita","estado_id","descargar"],tituloModal:"",modal:!1,isLoading_historial:!1,historial:[]}},methods:{obtenerProyectos:function(){var t=this;axios.get(this.url+"/proyectos").then(function(e){e.data.status?t.list_proyectos=e.data.proyectos:toastr.eror(e.data.mensaje)})},obtenerRequis:function(){var t=this;null!=this.proyecto&&null!=this.proyecto.id&&(this.isLoading_requis=!0,axios.get(this.url+"/requis/"+this.proyecto.id).then(function(e){t.isLoading_requis=!1,e.data.status?t.list_requisiciones=e.data.requisiciones:toastr.eror(e.data.mensaje)}))},descargarRequi:function(t){window.open("descargar-requisicionew/"+t)},cerrarModalHistorial:function(){this.historial=[],this.modal=!1},AbrirModalHistorial:function(t){var e=this;this.tituloModal=t.folio,this.modal=!0,axios.get(this.url+"/"+t.id).then(function(t){t.data.status?e.historial=t.data.historial:toastr.error(t.data.mensaje)})}},mounted:function(){var t=this;this.obtenerProyectos(),this.proyecto={id:43,nombre_corto:"TALLER"},this.obtenerRequis(),setTimeout(function(){t.AbrirModalHistorial({folio:"asd",id:11744})},100)}}},s0z0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["etapa","index"],data:function(){return{estado:0,estados:["Nueva","Cerrada","Revisada","Autorizada","Aprobada por Compras","No autorizada","Espera autorización compras","Por Equivalente","Aprobada por Almacén","Corregida"],descripciones:["Requisición creada por","Requisición enviada para revisión por","Requisición revisada y enviada a Almacén por","Requisición autorizada por","Requisición autorizada para compra por","Requisición rechazada por","7","8","Aprobado por Almacén y enviado a revisión por ","Requisición modificada y enviada a revisión por"],iconos:["fa-plus","fa-info-circle","fa-file","fa-check","fa-shopping-cart","fa-times-circle","","","fa-box","fa-pen"],colores:["bg-light","bg-warning","fa-file1","bg-success","bg-success","bg-danger","","","bg-success","bg-primary"]}},computed:{hora:function(){return this.etapa.hora},fecha:function(){return this.etapa.fecha},nombre_estado:function(){return this.estado>this.estados.length-1?"Otro":this.estados[this.estado]},descripcion:function(){return this.descripciones[this.estado]},responsable:function(){return this.etapa.empleado},icono:function(){return this.iconos[this.estado]},color:function(){return this.colores[this.estado]}},methods:{},mounted:function(){this.estado=this.etapa.estado,1==this.estado&&this.index>1&&(this.estado=9)}}},vruV:function(t,e,a){var i=a("VU/8")(a("s0z0"),a("PK0e"),!1,function(t){a("5ZcS")},null,null);t.exports=i.exports},wdrb:function(t,e,a){var i=a("VU/8")(a("XEB0"),a("D22y"),!1,function(t){a("zk1/")},null,null);t.exports=i.exports},wloU:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card border-dark"},[a("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),a("div",{staticClass:"card-header bg-dark text-white"},[a("i",{staticClass:"fa fa-align-justify"}),t._v(" Requisiciones por autorizar:\n        "),t.detalles_ver?a("button",{staticClass:"btn btn-secondary float-sm-right",attrs:{type:"button"},on:{click:function(e){return t.maestro()}}},[a("i",{staticClass:"icon-arrow-left"}),t._v(" Atras\n        ")]):t._e(),t._v(" "),t.detalles_ver?a("button",{staticClass:"btn btn-outline-white float-sm-right",on:{click:function(e){return t.descargar(t.id_requisicion)}}},[a("i",{staticClass:"fas fa-file-pdf"}),t._v(" "),a("i",{staticClass:"fas fa-download"}),t._v(" Descargar\n        ")]):t._e()]),t._v(" "),a("div",{staticClass:"card-body"},[a("v-client-table",{directives:[{name:"show",rawName:"v-show",value:!t.detalle,expression:"!detalle"}],ref:"myTable",attrs:{columns:t.columns,data:t.dataTable,options:t.options},scopedSlots:t._u([{key:"id",fn:function(e){return[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[a("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-grip-horizontal"}),t._v(" Acciones\n                ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(a){return t.cargardetalle(e.row.id)}}},[a("i",{staticClass:"fas fa-eye"}),t._v("  Ver partidas\n                  ")])])])])]}},{key:"condicion",fn:function(e){return[a("button",{staticClass:"btn btn-sm btn-success",on:{click:function(a){return t.autorizar(3,e.row.id)}}},[a("i",{staticClass:"far fa-check-square"}),t._v("  Si  ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.condicion,expression:"props.row.condicion == 1"}],staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.autorizar(0,e.row.id)}}},[a("i",{staticClass:"fas fa-window-close"}),t._v("  No")])]}}])}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.detalles_ver,expression:"detalles_ver"}]},[a("v-client-table",{attrs:{data:t.dataTableDetalle,options:t.optionsDetalle,columns:t.columnsDetalle},scopedSlots:t._u([{key:"autorizar",fn:function(e){return[null==e.row.correccion?[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.guardarcorrecion(e.row.req)}}},[a("i",{staticClass:"fas fa-window-close"}),t._v("  No")])]:t._e(),t._v(" "),null!=e.row.correccion?[t._v("\n                "+t._s(e.row.correccion.comentario)+"\n              ")]:t._e()]}},{key:"req.comentario_partida",fn:function(e){return[t._v("\n              "+t._s(e.row.req.comentario_partida)),a("br"),t._v(" "),null!=e.row.regresados?[a("span",{staticClass:"badge badge-pill badge-warning"},[t._v("Corregido")])]:t._e(),t._v(" "),null==e.row.regresados?[a("span",{staticClass:"badge badge-pill badge-info"},[t._v("Sin observaciones")])]:t._e()]}}])})],1)],1)],1)])},staticRenderFns:[]}},"zk1/":function(t,e,a){var i=a("R02A");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("4a05b9ac",i,!0,{})}});